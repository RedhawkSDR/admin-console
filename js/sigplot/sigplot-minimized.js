/*

 File: license.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser 
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or 
 (at your option) any later version. This library is distributed in the hope that it will be useful, but 
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR 
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the 
 GNU Lesser General Public License along with SigPlot.

 Portions of SigPlot may utilize the following open-source software:

   loglevel.js          - MIT License; Copyright (c) 2014, Tim Perry
   typedarray.js        - MIT License; Copyright (c) 2010, Linden Research, Inc.
   tinycolor.js         - MIT License; Copyright (c) 2013, Brian Grinstead
   CanvasInput.js       - MIT License; Copyright (c) 2013, James Simpson of GoldFire Studios
   spin.js              - MIT License; Copyright (c) 2011-2013 Felix Gnass
   Array.remove         - MIT License; Copyright (c) 2007, John Resig
   Firefox subarray fix - Public Domain; Copyright (c) 2011, Ryan Berdeen

 File: tinycolor.js
 TinyColor v0.9.15+
 https://github.com/bgrins/TinyColor
 2013-02-24, Brian Grinstead, MIT License

 File: CanvasInput.js
  CanvasInput v1.0.10
  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input

  (c) 2013, James Simpson of GoldFire Studios
  goldfirestudios.com

  (c) 2013, Axios, Inc.
  Modifications made by Axios, Inc.
  axiosengineering.com

  MIT License

 File: spin.js
 Copyright (c) 2011-2013 Felix Gnass
 Licensed under the MIT license

 File: sigplot.layer1d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.layer2d.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: typedarray.js
 $LicenseInfo:firstyear=2010&license=mit$

 Copyright (c) 2010, Linden Research, Inc.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 $/LicenseInfo$

 Copyright (c) 2013, Michael Ihde - Added big-endian/little-endian support

 File: common.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: bluefile.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.


 File: m.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: mx.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.

 File: sigplot.js
 Copyright (c) 2012-2014, Michael Ihde, All rights reserved.
 Copyright (c) 2012-2014, Axios Inc., All rights reserved.

 This file is part of SigPlot.

 SigPlot is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser
 General Public License as published by the Free Software Foundation; either version 3.0 of the License, or
 (at your option) any later version. This library is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
 PURPOSE. See the GNU Lesser General Public License for more details. You should have received a copy of the
 GNU Lesser General Public License along with SigPlot.
*/
var m=window.m||{};
(function(d,a){var e="undefined";(function(a){d.log=a()})(function(){function d(e,f){var g=e[f];if(g.bind===a){if(Function.prototype.bind===a)return s(g,e);try{return Function.prototype.bind.call(e[f],e)}catch(h){return s(g,e)}}else return e[f].bind(e)}function s(a,e){return function(){Function.prototype.apply.apply(a,[e,arguments])}}function f(a){for(var e=0;e<x.length;e++)q[x[e]]=a(x[e])}function g(){return typeof window!==e&&window.document!==a&&window.document.cookie!==a}function h(){try{return typeof window!==e&&
window.localStorage!==a}catch(d){return!1}}function l(a){var e=!1,d,f;for(f in q.levels)if(q.levels.hasOwnProperty(f)&&q.levels[f]===a){d=f;break}if(h())try{window.localStorage.mloglevel=d}catch(l){e=!0}else e=!0;e&&g()&&(window.document.cookie="mloglevel="+d+";")}var q={},C=function(){},x=["trace","debug","info","warn","error"],F=/mloglevel=([^;]+)/;q.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5};q.setLevel=function(g){if("number"===typeof g&&0<=g&&g<=q.levels.SILENT)if(l(g),g===q.levels.SILENT)f(function(){return C});
else{if(typeof console===e)return f(function(a){return function(){typeof console!==e&&(q.setLevel(g),q[a].apply(q,arguments))}}),"No console available for logging";f(function(f){return g<=q.levels[f.toUpperCase()]?typeof console===e?C:console[f]===a?console.log!==a?d(console,"log"):C:d(console,f):C})}else if("string"===typeof g&&q.levels[g.toUpperCase()]!==a)q.setLevel(q.levels[g.toUpperCase()]);else throw"log.setLevel() called with invalid level: "+g;};q.enableAll=function(){q.setLevel(q.levels.TRACE)};
q.disableAll=function(){q.setLevel(q.levels.SILENT)};(function(){var e;h()&&(e=window.localStorage.mloglevel);e===a&&g()&&(e=(F.exec(window.document.cookie)||[])[1]);q.levels[e]===a&&(e="WARN");q.setLevel(q.levels[e])})();return q})})(window.m);var ArrayBuffer,ArrayBufferView,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,DataView;
(function(){function d(){document&&document.createTextNode("").splitText(1);throw new RangeError("INDEX_SIZE_ERR");}function a(c){if(Object.getOwnPropertyNames&&Object.defineProperty){var r=Object.getOwnPropertyNames(c),n;for(n=0;n<r.length;n+=1)Object.defineProperty(c,r[n],{value:c[r[n]],writable:!1,enumerable:!1,configurable:!1})}}function e(c){function r(n){Object.defineProperty(c,n,{get:function(){return c._getter(n)},set:function(r){c._setter(n,r)},enumerable:!0,configurable:!1})}if(Object.defineProperty){var n;
for(n=0;n<c.length;n+=1)r(n)}}function u(c){return[c&255]}function s(c){return n(c[0],8)}function f(c){return[c&255]}function g(c){return p(c[0],8)}function h(c){return[c>>8&255,c&255]}function l(c){return n(c[0]<<8|c[1],16)}function q(c){return[c>>8&255,c&255]}function C(c){return p(c[0]<<8|c[1],16)}function x(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}function F(c){return n(c[0]<<24|c[1]<<16|c[2]<<8|c[3],32)}function B(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}function A(c){return p(c[0]<<
24|c[1]<<16|c[2]<<8|c[3],32)}function D(c){var r=[];for(c=c.join("");c.length;)r.push(parseInt(c.substring(0,8),2)),c=c.substring(8);return r}function E(c){var r=[],n,k;for(n=c.length;n;n-=1)for(b=c[n-1],k=8;k;k-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function L(c){return[c&255]}function T(c){return n(c[0],8)}function U(c){return[c&255]}function Q(c){return p(c[0],8)}function K(c){return[c&255,c>>8&255]}function X(c){return n(c[1]<<8|c[0],16)}function c(c){return[c&255,c>>8&255]}function t(c){return p(c[1]<<
8|c[0],16)}function G(c){return[c&255,c>>8&255,c>>16&255,c>>24&255]}function y(c){return n(c[3]<<24|c[2]<<16|c[1]<<8|c[0],32)}function R(c){return[c&255,c>>8&255,c>>16&255,c>>24&255]}function w(c){return p(c[3]<<24|c[2]<<16|c[1]<<8|c[0],32)}function Z(c){var r=[];for(c=c.join("");c.length;)r.push(parseInt(c.substring(c.length-8,c.length),2)),c=c.substring(0,c.length-8);return r}function r(c){var r=[],n,k;for(n=0;n<c.length;n++)for(b=c[n],k=8;k;k-=1)r.push(b%2?1:0),b>>=1;r.reverse();return r}function n(c,
r){var n=32-r;return c<<n>>n}function p(c,r){var n=32-r;return c<<n>>>n}function k(c,r,n){var k=(1<<r-1)-1,t,p,a;isNaN(c)?(p=(1<<k)-1,k=Math.pow(2,n-1),t=0):Infinity===c||-Infinity===c?(p=(1<<k)-1,k=0,t=0>c?1:0):0===c?(k=p=0,t=-Infinity===1/c?1:0):(t=0>c,c=Math.abs(c),c>=Math.pow(2,1-k)?(a=Math.min(Math.floor(Math.log(c)/Math.LN2),k),p=a+k,k=Math.round(c*Math.pow(2,n-a)-Math.pow(2,n))):(p=0,k=Math.round(c/Math.pow(2,1-k-n))));for(c=[];n;n-=1)c.push(k%2?1:0),k=Math.floor(k/2);for(n=r;n;n-=1)c.push(p%
2?1:0),p=Math.floor(p/2);c.push(t?1:0);c.reverse();return $(c)}function v(c,r,n){var k=[],t,p,k=aa(c);t=k.join("");c=(1<<r-1)-1;k=parseInt(t.substring(0,1),2)?-1:1;p=parseInt(t.substring(1,1+r),2);t=parseInt(t.substring(1+r),2);return p===(1<<r)-1?0!==t?NaN:Infinity*k:0<p?k*Math.pow(2,p-c)*(1+t/Math.pow(2,n)):0!==t?k*Math.pow(2,-(c-1))*(t/Math.pow(2,n)):0>k?-0:0}function z(c){return v(c,11,52)}function H(c){return k(c,11,52)}function J(c){return v(c,8,23)}function O(c){return k(c,8,23)}var W={ToInt32:function(c){return c>>
0},ToUint32:function(c){return c>>>0}};Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(c,r,n){n.hasOwnProperty("get")&&c.__defineGetter__(r,n.get);n.hasOwnProperty("set")&&c.__defineSetter__(r,n.set)});var S=window.BIG_ENDIAN_ARRAYBUFFERS?u:L,P=window.BIG_ENDIAN_ARRAYBUFFERS?s:T,I=window.BIG_ENDIAN_ARRAYBUFFERS?f:U,ba=window.BIG_ENDIAN_ARRAYBUFFERS?g:Q,ca=window.BIG_ENDIAN_ARRAYBUFFERS?h:K,da=window.BIG_ENDIAN_ARRAYBUFFERS?l:X,ea=window.BIG_ENDIAN_ARRAYBUFFERS?
q:c,fa=window.BIG_ENDIAN_ARRAYBUFFERS?C:t,ga=window.BIG_ENDIAN_ARRAYBUFFERS?x:G,ha=window.BIG_ENDIAN_ARRAYBUFFERS?F:y,M=window.BIG_ENDIAN_ARRAYBUFFERS?B:R,N=window.BIG_ENDIAN_ARRAYBUFFERS?A:w,$=window.BIG_ENDIAN_ARRAYBUFFERS?D:Z,aa=window.BIG_ENDIAN_ARRAYBUFFERS?E:r;ArrayBuffer||function(){function c(r,n,k){var t;t=function(c,r,n){var k,p,v;if(arguments.length&&"number"!==typeof arguments[0])if("object"===typeof arguments[0]&&arguments[0].constructor===t)for(k=arguments[0],this.length=k.length,this.byteLength=
this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),p=this.byteOffset=0;p<this.length;p+=1)this._setter(p,k._getter(p));else if("object"!==typeof arguments[0]||arguments[0]instanceof ArrayBuffer)if("object"===typeof arguments[0]&&arguments[0]instanceof ArrayBuffer){this.buffer=c;this.byteOffset=W.ToUint32(r);this.byteOffset>this.buffer.byteLength&&d();if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");
3>arguments.length?(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT&&d(),this.length=this.byteLength/this.BYTES_PER_ELEMENT):(this.length=W.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT);this.byteOffset+this.byteLength>this.buffer.byteLength&&d()}else throw new TypeError("Unexpected argument type(s)");else for(k=arguments[0],this.length=W.ToUint32(k.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new ArrayBuffer(this.byteLength),
p=this.byteOffset=0;p<this.length;p+=1)v=k[p],this._setter(p,Number(v));else{this.length=W.ToInt32(arguments[0]);if(0>n)throw new RangeError("ArrayBufferView size is not a small enough positive integer.");this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0}this.constructor=t;a(this);e(this)};t.prototype=new ArrayBufferView;t.prototype.BYTES_PER_ELEMENT=r;t.prototype._pack=n;t.prototype._unpack=k;t.BYTES_PER_ELEMENT=r;t.prototype._getter=
function(c){if(1>arguments.length)throw new SyntaxError("Not enough arguments");c=W.ToUint32(c);if(!(c>=this.length)){var r=[],n,k;n=0;for(k=this.byteOffset+c*this.BYTES_PER_ELEMENT;n<this.BYTES_PER_ELEMENT;n+=1,k+=1)r.push(this.buffer._bytes[k]);return this._unpack(r)}};t.prototype.get=t.prototype._getter;t.prototype._setter=function(c,r){if(2>arguments.length)throw new SyntaxError("Not enough arguments");c=W.ToUint32(c);if(!(c>=this.length)){var n=this._pack(r),k,t;k=0;for(t=this.byteOffset+c*this.BYTES_PER_ELEMENT;k<
this.BYTES_PER_ELEMENT;k+=1,t+=1)this.buffer._bytes[t]=n[k]}};t.prototype.set=function(c,r){if(1>arguments.length)throw new SyntaxError("Not enough arguments");var n,k,t,p,a,e;if("object"===typeof arguments[0]&&arguments[0].constructor===this.constructor)if(n=arguments[0],k=W.ToUint32(arguments[1]),k+n.length>this.length&&d(),e=this.byteOffset+k*this.BYTES_PER_ELEMENT,k=n.length*this.BYTES_PER_ELEMENT,n.buffer===this.buffer){t=[];p=0;for(a=n.byteOffset;p<k;p+=1,a+=1)t[p]=n.buffer._bytes[a];for(p=
0;p<k;p+=1,e+=1)this.buffer._bytes[e]=t[p]}else for(p=0,a=n.byteOffset;p<k;p+=1,a+=1,e+=1)this.buffer._bytes[e]=n.buffer._bytes[a];else if("object"===typeof arguments[0]&&"undefined"!==typeof arguments[0].length)for(n=arguments[0],t=W.ToUint32(n.length),k=W.ToUint32(arguments[1]),k+t>this.length&&d(),p=0;p<t;p+=1)a=n[p],this._setter(k+p,Number(a));else throw new TypeError("Unexpected argument type(s)");};t.prototype.subarray=function(c,n){c=W.ToInt32(c);n=W.ToInt32(n);1>arguments.length&&(c=0);2>
arguments.length&&(n=this.length);0>c&&(c=this.length+c);0>n&&(n=this.length+n);var r=this.length;c=0>c?0:c>r?r:c;r=this.length;r=(0>n?0:n>r?r:n)-c;0>r&&(r=0);return new this.constructor(this.buffer,c*this.BYTES_PER_ELEMENT,r)};return t}ArrayBuffer=function(c){c=W.ToInt32(c);if(0>c)throw new RangeError("ArrayBuffer size is not a small enough positive integer.");this.byteLength=c;this._bytes=[];this._bytes.length=c;for(c=0;c<this.byteLength;c+=1)this._bytes[c]=0;a(this)};ArrayBuffer.isNative=!1;ArrayBufferView=
function(){};Int8Array=Int8Array||c(1,S,P);Uint8Array=Uint8Array||c(1,I,ba);Int16Array=Int16Array||c(2,ca,da);Uint16Array=Uint16Array||c(2,ea,fa);Int32Array=Int32Array||c(4,ga,ha);Uint32Array=Uint32Array||c(4,M,N);Float32Array=Float32Array||c(4,O,J);Float64Array=Float64Array||c(8,H,z)}();DataView||function(){function c(n,r){return"function"===typeof n.get?n.get(r):n[r]}function n(r){return function(n,t){n=W.ToUint32(n);n+r.BYTES_PER_ELEMENT>this.byteLength&&d();n+=this.byteOffset;var p=new Uint8Array(this.buffer,
n,r.BYTES_PER_ELEMENT),a=[],e;for(e=0;e<r.BYTES_PER_ELEMENT;e+=1)a.push(c(p,e));Boolean(t)===Boolean(k)&&a.reverse();return c(new r((new Uint8Array(a)).buffer),0)}}function r(n){return function(r,t,p){r=W.ToUint32(r);r+n.BYTES_PER_ELEMENT>this.byteLength&&d();t=new n([t]);t=new Uint8Array(t.buffer);var a=[],e;for(e=0;e<n.BYTES_PER_ELEMENT;e+=1)a.push(c(t,e));Boolean(p)===Boolean(k)&&a.reverse();(new Uint8Array(this.buffer,r,n.BYTES_PER_ELEMENT)).set(a)}}var k=function(){var n=new Uint16Array([4660]),
n=new Uint8Array(n.buffer);return 18===c(n,0)}();DataView=function(c,n,r){if(!("object"===typeof c&&c instanceof ArrayBuffer))throw new TypeError("TypeError");this.buffer=c;this.byteOffset=W.ToUint32(n);this.byteOffset>this.buffer.byteLength&&d();this.byteLength=3>arguments.length?this.buffer.byteLength-this.byteOffset:W.ToUint32(r);this.byteOffset+this.byteLength>this.buffer.byteLength&&d();a(this)};ArrayBufferView&&(DataView.prototype=new ArrayBufferView);DataView.prototype.getUint8=n(Uint8Array);
DataView.prototype.getInt8=n(Int8Array);DataView.prototype.getUint16=n(Uint16Array);DataView.prototype.getInt16=n(Int16Array);DataView.prototype.getUint32=n(Uint32Array);DataView.prototype.getInt32=n(Int32Array);DataView.prototype.getFloat32=n(Float32Array);DataView.prototype.getFloat64=n(Float64Array);DataView.prototype.setUint8=r(Uint8Array);DataView.prototype.setInt8=r(Int8Array);DataView.prototype.setUint16=r(Uint16Array);DataView.prototype.setInt16=r(Int16Array);DataView.prototype.setUint32=
r(Uint32Array);DataView.prototype.setInt32=r(Int32Array);DataView.prototype.setFloat32=r(Float32Array);DataView.prototype.setFloat64=r(Float64Array)}()})();window.ArrayBuffer&&!ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=function(d,a){var e=new Uint8Array(this);void 0===a&&(a=e.length);for(var u=new ArrayBuffer(a-d),s=new Uint8Array(u),f=0;f<s.length;f++)s[f]=e[f+d];return u});
Array.prototype.remove=function(d,a){var e=this.slice((a||d)+1||this.length);this.length=0>d?this.length+d:d;return this.push.apply(this,e)};window.requestAnimFrame=function(d){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}();
window.cancelAnimFrame=function(d){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCanelAnimationFrame||function(a){window.clearTimeout(a)}}();function dashOn(d,a,e){return d.setLineDash?(d.setLineDash([a,e]),!0):void 0!==d.mozDash?(d.mozDash=[a,e],!0):d.webkitLineDash&&0===d.webkitLineDash.length?(d.webkitLineDash=[a,e],!0):!1}
function dashOff(d){d.setLineDash?d.setLineDash([]):d.mozDash?d.mozDash=null:d.webkitLineDash&&(d.webkitLineDash=[])}function getKeyCode(d){d=window.event||d;return d=d.charCode||d.keyCode}function setKeypressHandler(d){window.addEventListener?window.addEventListener("keypress",d,!1):window.attachEvent&&window.attachEvent("onkeypress",d)}Array.isArray||(Array.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)});
window.Float64Array||(window.Float64Array=function(){return window.Float64Array||function(d,a,e){if(!(d instanceof ArrayBuffer))throw"Invalid type";var u=new DataView(d),s=[];d=(d.byteLength-a)/8;s.length=void 0===e?d:Math.min(e,d);for(e=0;e<s.length;e++)s[e]=u.getFloat64(8*e+a,!0);s.subarray=function(a,e){return s.slice(a,e)};return s}}());
(function(){var d=function(){};window.console||(window.console={log:d,info:d,warn:d,debug:d,error:d});if((new Int8Array([0,1,0])).subarray(1).subarray(1)[0]){var a=function(a,d){0===arguments.length?(a=0,d=this.length):(0>a&&(a+=this.length),a=Math.max(0,Math.min(this.length,a)),1===arguments.length?d=this.length:(0>d&&(d+=this.length),d=Math.max(a,Math.min(this.length,d))));return new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d-a)};[Int8Array,Uint8Array,Int16Array,Uint16Array,
Int32Array,Uint32Array,Float32Array,Float64Array].forEach(function(e){e.prototype.subarray=a})}})();
(function(d,a){function e(a,e,l,q){a[s](u+e,"wheel"==f?l:function(a){!a&&(a=d.event);var e={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};"mousewheel"==f?(e.deltaY=-0.025*a.wheelDelta,a.wheelDeltaX&&(e.deltaX=-0.025*a.wheelDeltaX)):e.deltaY=a.detail;return l(e)},q||!1)}var u="",s,f;d.addEventListener?s="addEventListener":(s="attachEvent",u="on");
f="onwheel"in a.createElement("div")?"wheel":void 0!==a.onmousewheel?"mousewheel":"DOMMouseScroll";d.addWheelListener=function(a,d,l){e(a,f,d,l);"DOMMouseScroll"==f&&e(a,"MozMousePixelScroll",d,l)}})(window,document);
(function(d){function a(a){a=new Uint8Array(a);if(C)return String.fromCharCode.apply(null,a);for(var e="",d=0;d<a.length;d++)e+=String.fromCharCode(a[d]);return e}function e(e){this.file_name=this.file=null;this.offset=0;this.buf=e;if(null!=this.buf){e=new DataView(this.buf);this.version=a(this.buf.slice(0,4));this.headrep=a(this.buf.slice(4,8));this.datarep=a(this.buf.slice(8,12));var d="EEEI"==this.headrep,f="EEEI"==this.datarep;this.type=e.getUint32(48,d);this["class"]=this.type/1E3;this.format=
a(this.buf.slice(52,54));this.timecode=e.getFloat64(56,d);1==this["class"]?(this.xstart=e.getFloat64(256,d),this.xdelta=e.getFloat64(264,d),this.xunits=e.getInt32(272,d),this.subsize=1):2==this["class"]&&(this.xstart=e.getFloat64(256,d),this.xdelta=e.getFloat64(264,d),this.xunits=e.getInt32(272,d),this.subsize=e.getInt32(276,d),this.ystart=e.getFloat64(280,d),this.ydelta=e.getFloat64(288,d),this.yunits=e.getInt32(296,d));this.data_start=e.getFloat64(32,d);this.data_size=e.getFloat64(40,d);this.setData(this.buf,
this.data_start,this.data_start+this.data_size,f)}}function u(a){var e=document.createElement("a");e.href=a;for(var d=e.protocol.replace(":",""),f=e.hostname,g=e.port,h=e.search,l={},q=e.search.replace(/^\?/,"").split("&"),K=q.length,s=0,c;s<K;s++)q[s]&&(c=q[s].split("="),l[c[0]]=c[1]);return{source:a,protocol:d,host:f,port:g,query:h,params:l,file:(e.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||
[,""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function s(a,e,d){d=d||1024;var f=0,g=new ArrayBuffer(a.length),h=new Uint8Array(g),l=function(){for(var q=f+d;f<q;f++)h[f]=a.charCodeAt(f)&255;f>=a.length?e(g):setTimeout(l,0)};setTimeout(l,0)}function f(a){this.options=a}navigator.userAgent.match(/(iPad|iPhone|iPod)/i);var g=function(){var a=new ArrayBuffer(4),e=new Uint32Array(a),a=new Uint8Array(a);e[0]=3735928559;if(239==a[0])return"LE";if(222==a[0])return"BE";throw Error("unknown endianness");
}(),h={S:1,C:2,V:3,Q:4,M:9,X:10,T:16,U:1,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9},l={P:0.125,A:1,O:1,B:1,I:2,L:4,X:8,F:4,D:8},q={P:null,A:null,O:Uint8Array,B:Int8Array,I:Int16Array,L:Int32Array,X:null,F:Float32Array,D:Float64Array},C=!0;try{var x=new UInt8Array(new ArrayBuffer(4));x[0]=66;x[1]=76;x[2]=85;x[3]=69;"BLUE"!==String.fromCharCode.apply(null,x)&&(C=!1)}catch(F){C=!1}e.prototype={setData:function(a,e,d,f){1==this["class"]?(this.spa=h[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*
this.bps,this.ape=1,this.bpe=this.ape*this.bpa):2==this["class"]&&(this.spa=h[this.format[0]],this.bps=l[this.format[1]],this.bpa=this.spa*this.bps,this.ape=this.subsize,this.bpe=this.ape*this.bpa);void 0===f&&(f="LE"===g);if("LE"===g&&!f)throw"Not supported "+g+" "+f;if("BE"===g&&this.littleEndianData)throw"Not supported "+g+" "+f;a?(this.dview=e&&d?this.createArray(a,e,(d-e)/this.bps):this.createArray(a),this.size=this.dview.byteLength/this.bpe):this.dview=this.createArray(null,null,this.size)},
createArray:function(a,e,d){var f=q[this.format[1]];if(void 0===f)throw"unknown format "+this.format[1];void 0===e&&(e=0);void 0===d&&(d=a.length||a.byteLength/l[this.format[1]]);return a?new f(a,e,d):new f(d)}};f.prototype={readheader:function(a,d){var f=new FileReader,g=a.webkitSlice(0,512);f.onloadend=function(a){return function(g){g.target.error?alert("There was an error reading this file"):(g=new e(f.result),g.file=a,d(g))}}(a);f.readAsArrayBuffer(g)},read:function(a,d){var f=new FileReader;
f.onloadend=function(a){return function(g){g.target.error?alert("There was an error reading this file"):(g=new e(f.result),g.file=a,g.file_name=a.name,d(g))}}(a);f.readAsArrayBuffer(a)},read_http:function(a,d){var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.overrideMimeType("text/plain; charset=x-user-defined");f.onload=function(g){if(4!==f.readyState||200!==f.status&&0!==f.status)d(null);else if(g=null,f.response){g=f.response;g=new e(g);u(a);var h=u(a);g.file_name=h.file;
d(g)}else f.responseText&&s(f.responseText,function(f){f=new e(f);u(a);var g=u(a);f.file_name=g.file;d(f)})};f.onerror=function(a){d(null)};f.send(null)}};d.BlueHeader=d.BlueHeader||e;d.BlueFileReader=d.BlueFileReader||f})(this);
(function(d){function a(d,q){d=d?d:"";q=q||{};if("object"==typeof d&&d.hasOwnProperty("_tc_id"))return d;var c=e(d),t=c.r,G=c.g,y=c.b,R=c.a,w=A(100*R)/100,Z=q.format||c.format;1>t&&(t=A(t));1>G&&(G=A(G));1>y&&(y=A(y));return{ok:c.ok,format:Z,_tc_id:F++,alpha:R,toHsv:function(){var c=f(t,G,y);return{h:360*c.h,s:c.s,v:c.v,a:R}},toHsvString:function(){var c=f(t,G,y),n=A(360*c.h),a=A(100*c.s),c=A(100*c.v);return 1==R?"hsv("+n+", "+a+"%, "+c+"%)":"hsva("+n+", "+a+"%, "+c+"%, "+w+")"},toHsl:function(){var c=
u(t,G,y);return{h:360*c.h,s:c.s,l:c.l,a:R}},toHslString:function(){var c=u(t,G,y),n=A(360*c.h),a=A(100*c.s),c=A(100*c.l);return 1==R?"hsl("+n+", "+a+"%, "+c+"%)":"hsla("+n+", "+a+"%, "+c+"%, "+w+")"},toHex:function(c){return g(t,G,y,c)},toHexString:function(c){return"#"+g(t,G,y,c)},toRgb:function(){return{r:A(t),g:A(G),b:A(y),a:R}},toRgbString:function(){return 1==R?"rgb("+A(t)+", "+A(G)+", "+A(y)+")":"rgba("+A(t)+", "+A(G)+", "+A(y)+", "+w+")"},toPercentageRgb:function(){return{r:A(100*h(t,255))+
"%",g:A(100*h(G,255))+"%",b:A(100*h(y,255))+"%",a:R}},toPercentageRgbString:function(){return 1==R?"rgb("+A(100*h(t,255))+"%, "+A(100*h(G,255))+"%, "+A(100*h(y,255))+"%)":"rgba("+A(100*h(t,255))+"%, "+A(100*h(G,255))+"%, "+A(100*h(y,255))+"%, "+w+")"},toName:function(){return 0===R?"transparent":U[g(t,G,y,!0)]||!1},toFilter:function(c){var n=g(t,G,y),p=n,k=Math.round(255*parseFloat(R)).toString(16),e=k,d=q&&q.gradientType?"GradientType = 1, ":"";c&&(c=a(c),p=c.toHex(),e=Math.round(255*parseFloat(c.alpha)).toString(16));
return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr=#"+l(k)+n+",endColorstr=#"+l(e)+p+")"},toString:function(c){var n=!!c;c=c||this.format;var t=!1,n=!n&&1>R&&0<R&&("hex"===c||"hex6"===c||"hex3"===c||"name"===c);"rgb"===c&&(t=this.toRgbString());"prgb"===c&&(t=this.toPercentageRgbString());if("hex"===c||"hex6"===c)t=this.toHexString();"hex3"===c&&(t=this.toHexString(!0));"name"===c&&(t=this.toName());"hsl"===c&&(t=this.toHslString());"hsv"===c&&(t=this.toHsvString());return n?this.toRgbString():
t||this.toHexString()}}}function e(a){var e={r:0,g:0,b:0},c=1,t=!1,d=!1;if("string"==typeof a)a:{a=a.replace(C,"").replace(x,"").toLowerCase();var y=!1;if(T[a])a=T[a],y=!0;else if("transparent"==a){a={r:0,g:0,b:0,a:0,format:"name"};break a}var f;a=(f=Q.rgb.exec(a))?{r:f[1],g:f[2],b:f[3]}:(f=Q.rgba.exec(a))?{r:f[1],g:f[2],b:f[3],a:f[4]}:(f=Q.hsl.exec(a))?{h:f[1],s:f[2],l:f[3]}:(f=Q.hsla.exec(a))?{h:f[1],s:f[2],l:f[3],a:f[4]}:(f=Q.hsv.exec(a))?{h:f[1],s:f[2],v:f[3]}:(f=Q.hex6.exec(a))?{r:parseInt(f[1],
16),g:parseInt(f[2],16),b:parseInt(f[3],16),format:y?"name":"hex"}:(f=Q.hex3.exec(a))?{r:parseInt(f[1]+""+f[1],16),g:parseInt(f[2]+""+f[2],16),b:parseInt(f[3]+""+f[3],16),format:y?"name":"hex"}:!1}if("object"==typeof a){if(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b"))e=a.g,t=a.b,e={r:255*h(a.r,255),g:255*h(e,255),b:255*h(t,255)},t=!0,d="%"===String(a.r).substr(-1)?"prgb":"rgb";else if(a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")){a.s=q(a.s);a.v=q(a.v);
var d=a.h,y=a.s,e=a.v,d=6*h(d,360),y=h(y,100),e=h(e,100),t=B.floor(d),g=d-t,d=e*(1-y);f=e*(1-g*y);y=e*(1-(1-g)*y);t%=6;e={r:255*[e,f,d,d,y,e][t],g:255*[y,e,e,f,d,d][t],b:255*[d,d,y,e,e,f][t]};t=!0;d="hsv"}else a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=q(a.s),a.l=q(a.l),e=s(a.h,a.s,a.l),t=!0,d="hsl");a.hasOwnProperty("a")&&(c=a.a)}c=parseFloat(c);if(isNaN(c)||0>c||1<c)c=1;return{ok:t,format:a.format||d,r:D(255,E(e.r,0)),g:D(255,E(e.g,0)),b:D(255,E(e.b,0)),a:c}}function u(a,
e,c){a=h(a,255);e=h(e,255);c=h(c,255);var t=E(a,e,c),d=D(a,e,c),y,f=(t+d)/2;if(t==d)y=d=0;else{var g=t-d,d=0.5<f?g/(2-t-d):g/(t+d);switch(t){case a:y=(e-c)/g+(e<c?6:0);break;case e:y=(c-a)/g+2;break;case c:y=(a-e)/g+4}y/=6}return{h:y,s:d,l:f}}function s(a,e,c){function t(c,t,a){0>a&&(a+=1);1<a&&(a-=1);return a<1/6?c+6*(t-c)*a:0.5>a?t:a<2/3?c+(t-c)*(2/3-a)*6:c}a=h(a,360);e=h(e,100);c=h(c,100);if(0===e)c=e=a=c;else{var d=0.5>c?c*(1+e):c+e-c*e,y=2*c-d;c=t(y,d,a+1/3);e=t(y,d,a);a=t(y,d,a-1/3)}return{r:255*
c,g:255*e,b:255*a}}function f(a,e,c){a=h(a,255);e=h(e,255);c=h(c,255);var t=E(a,e,c),d=D(a,e,c),y,f=t-d;if(t==d)y=0;else{switch(t){case a:y=(e-c)/f+(e<c?6:0);break;case e:y=(c-a)/f+2;break;case c:y=(a-e)/f+4}y/=6}return{h:y,s:0===t?0:f/t,v:t}}function g(a,e,c,t){a=[l(A(a).toString(16)),l(A(e).toString(16)),l(A(c).toString(16))];return t&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function h(a,
e){var c=a;"string"==typeof c&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");c="string"===typeof a&&-1!=a.indexOf("%");a=D(e,E(0,parseFloat(a)));c&&(a=parseInt(a*e,10)/100);return 1E-6>B.abs(a-e)?1:a%e/parseFloat(e)}function l(a){return 1==a.length?"0"+a:""+a}function q(a){1>=a&&(a=100*a+"%");return a}var C=/^[\s,#]+/,x=/\s+$/,F=0,B=Math,A=B.round,D=B.min,E=B.max,L=B.random;a.fromRatio=function(e,d){if("object"==typeof e){var c={},t;for(t in e)e.hasOwnProperty(t)&&(c[t]="a"===t?e[t]:q(e[t]));
e=c}return a(e,d)};a.equals=function(e,d){return e&&d?a(e).toRgbString()==a(d).toRgbString():!1};a.random=function(){return a.fromRatio({r:L(),g:L(),b:L()})};a.desaturate=function(e,d){d=0===d?0:d||10;var c=a(e).toHsl();c.s-=d/100;c.s=D(1,E(0,c.s));return a(c)};a.saturate=function(e,d){d=0===d?0:d||10;var c=a(e).toHsl();c.s+=d/100;c.s=D(1,E(0,c.s));return a(c)};a.greyscale=function(e){return a.desaturate(e,100)};a.lighten=function(e,d){d=0===d?0:d||10;var c=a(e).toHsl();c.l+=d/100;c.l=D(1,E(0,c.l));
return a(c)};a.darken=function(e,d){d=0===d?0:d||10;var c=a(e).toHsl();c.l-=d/100;c.l=D(1,E(0,c.l));return a(c)};a.complement=function(e){e=a(e).toHsl();e.h=(e.h+180)%360;return a(e)};a.triad=function(e){var d=a(e).toHsl(),c=d.h;return[a(e),a({h:(c+120)%360,s:d.s,l:d.l}),a({h:(c+240)%360,s:d.s,l:d.l})]};a.tetrad=function(e){var d=a(e).toHsl(),c=d.h;return[a(e),a({h:(c+90)%360,s:d.s,l:d.l}),a({h:(c+180)%360,s:d.s,l:d.l}),a({h:(c+270)%360,s:d.s,l:d.l})]};a.splitcomplement=function(e){var d=a(e).toHsl(),
c=d.h;return[a(e),a({h:(c+72)%360,s:d.s,l:d.l}),a({h:(c+216)%360,s:d.s,l:d.l})]};a.analogous=function(e,d,c){d=d||6;c=c||30;var t=a(e).toHsl();c=360/c;e=[a(e)];for(t.h=(t.h-(c*d>>1)+720)%360;--d;)t.h=(t.h+c)%360,e.push(a(t));return e};a.monochromatic=function(e,d){d=d||6;for(var c=a(e).toHsv(),t=c.h,G=c.s,c=c.v,y=[],f=1/d;d--;)y.push(a({h:t,s:G,v:c})),c=(c+f)%1;return y};a.readability=function(e,d){var c=a(e).toRgb(),t=a(d).toRgb(),G=(299*c.r+587*c.g+114*c.b)/1E3,y=(299*t.r+587*t.g+114*t.b)/1E3,c=
Math.max(c.r,t.r)-Math.min(c.r,t.r)+Math.max(c.g,t.g)-Math.min(c.g,t.g)+Math.max(c.b,t.b)-Math.min(c.b,t.b);return{brightness:Math.abs(G-y),color:c}};a.readable=function(e,d){var c=a.readability(e,d);return 125<c.brightness&&500<c.color};a.mostReadable=function(e,d){for(var c=null,t=0,G=!1,y=0;y<d.length;y++){var f=a.readability(e,d[y]),g=125<f.brightness&&500<f.color,f=f.brightness/125*3+f.color/500;if(g&&!G||g&&G&&f>t||!g&&!G&&f>t)G=g,t=f,c=a(d[y])}return c};var T=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",
aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",
darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",
grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",
lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",
palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",
tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=a.hexNames=function(a){var e={},c;for(c in a)a.hasOwnProperty(c)&&(e[a[c]]=c);return e}(T),Q={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof module&&module.exports?module.exports=a:"undefined"!==typeof define?define(function(){return a}):d.tinycolor=a})(this);
(function(){var d=[];(window.CanvasInput=function(a){var e=this;a=a?a:{};e._canvas=a.canvas||null;e._ctx=e._canvas?e._canvas.getContext("2d"):null;e._x=a.x||0;e._y=a.y||0;e._extraX=a.extraX||0;e._extraY=a.extraY||0;e._fontSize=a.fontSize||14;e._fontFamily=a.fontFamily||"Arial";e._fontColor=a.fontColor||"#000";e._placeHolderColor=a.placeHolderColor||"#bfbebd";e._fontWeight=a.fontWeight||"normal";e._fontStyle=a.fontStyle||"normal";e._readonly=a.readonly||!1;e._maxlength=a.maxlength||null;e._width=a.width||
150;e._height=a.height||e._fontSize;e._padding=0<=a.padding?a.padding:5;e._borderWidth=0<=a.borderWidth?a.borderWidth:1;e._borderColor=a.borderColor||"#959595";e._borderRadius=0<=a.borderRadius?a.borderRadius:3;e._backgroundImage=a.backgroundImage||"";e._boxShadow=a.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)";e._innerShadow=a.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)";e._selectionColor=a.selectionColor||"rgba(179, 212, 253, 0.8)";e._placeHolder=a.placeHolder||"";e._value=a.value||e._placeHolder;
e._onsubmit=a.onsubmit||function(){};e._onkeydown=a.onkeydown||function(){};e._onkeyup=a.onkeyup||function(){};e._onfocus=a.onfocus||function(){};e._onblur=a.onblur||function(){};e._cursor=!1;e._cursorPos=0;e._hasFocus=!1;e._selection=[0,0];e._wasOver=!1;e._renderOnReturn=void 0!==a.renderOnReturn?a.renderOnReturn:!0;e._disableBlur=a.disableBlur||!1;e._tabToClear=a.tabToClear||!1;e.boxShadow(e._boxShadow,!0);e._calcWH();e._renderCanvas=document.createElement("canvas");e._renderCanvas.setAttribute("width",
e.outerW);e._renderCanvas.setAttribute("height",e.outerH);e._renderCtx=e._renderCanvas.getContext("2d");e._shadowCanvas=document.createElement("canvas");e._shadowCanvas.setAttribute("width",e._width+2*e._padding);e._shadowCanvas.setAttribute("height",e._height+2*e._padding);e._shadowCtx=e._shadowCanvas.getContext("2d");"undefined"!==typeof a.backgroundGradient?(e._backgroundColor=e._renderCtx.createLinearGradient(0,0,0,e.outerH),e._backgroundColor.addColorStop(0,a.backgroundGradient[0]),e._backgroundColor.addColorStop(1,
a.backgroundGradient[1])):e._backgroundColor=a.backgroundColor||"#fff";e._canvas&&(e.mousemoveCanvasListener=function(a){a=a||window.event;e.mousemove(a,e)},e._canvas.addEventListener("mousemove",e.mousemoveCanvasListener,!1),e.mousedownCanvasListener=function(a){a=a||window.event;e.mousedown(a,e)},e._canvas.addEventListener("mousedown",e.mousedownCanvasListener,!1),e.mouseupCanvasListener=function(a){a=a||window.event;e.mouseup(a,e)},e._canvas.addEventListener("mouseup",e.mouseupCanvasListener,!1));
e.mouseupWindowListener=function(a){e._hasFocus&&!e._mouseDown&&e.blur()};window.addEventListener("mouseup",e.mouseupWindowListener,!0);e.keydownWindowListener=function(a){a=a||window.event;e._hasFocus&&e.keydown(a,e)};window.addEventListener("keydown",e.keydownWindowListener,!1);e.keyupWindowListener=function(a){a=a||window.event;e._hasFocus&&e._onkeyup(a,e)};window.addEventListener("keyup",e.keyupWindowListener,!1);e.pasteWindowListener=function(a){a=a||window.event;if(e._hasFocus){a=a.clipboardData.getData("text/plain");
var d=e._value.substr(0,e._cursorPos),f=e._value.substr(e._cursorPos);e._value=d+a+f;e._cursorPos+=a.length;e.render()}};window.addEventListener("paste",e.pasteWindowListener,!1);d.push(e);e._inputsIndex=d.length-1;e.render()}).prototype={canvas:function(a){return"undefined"!==typeof a?(this._canvas=a,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(a){return"undefined"!==typeof a?(this._x=a,this.render()):this._x},y:function(a){return"undefined"!==typeof a?(this._y=
a,this.render()):this._y},extraX:function(a){return"undefined"!==typeof a?(this._extraX=a,this.render()):this._extraX},extraY:function(a){return"undefined"!==typeof a?(this._extraY=a,this.render()):this._extraY},fontSize:function(a){return"undefined"!==typeof a?(this._fontSize=a,this.render()):this._fontSize},fontFamily:function(a){return"undefined"!==typeof a?(this._fontFamily=a,this.render()):this._fontFamily},fontColor:function(a){return"undefined"!==typeof a?(this._fontColor=a,this.render()):
this._fontColor},placeHolderColor:function(a){return"undefined"!==typeof a?(this._placeHolderColor=a,this.render()):this._placeHolderColor},fontWeight:function(a){return"undefined"!==typeof a?(this._fontWeight=a,this.render()):this._fontWeight},fontStyle:function(a){return"undefined"!==typeof a?(this._fontStyle=a,this.render()):this._fontStyle},width:function(a){return"undefined"!==typeof a?(this._width=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._width},height:function(a){return"undefined"!==
typeof a?(this._height=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._height},padding:function(a){return"undefined"!==typeof a?(this._padding=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(a){return"undefined"!==typeof a?(this._borderWidth=a,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(a){return"undefined"!==typeof a?(this._borderColor=a,this.render()):this._borderColor},borderRadius:function(a){return"undefined"!==
typeof a?(this._borderRadius=a,this.render()):this._borderRadius},backgroundColor:function(a){return"undefined"!==typeof a?(this._backgroundColor=a,this.render()):this._backgroundColor},backgroundGradient:function(a){return"undefined"!==typeof a?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,a[0]),this._backgroundColor.addColorStop(1,a[1]),this.render()):this._backgroundColor},boxShadow:function(a,e){if("undefined"!==typeof a){var d=
a.split("px ");this._boxShadow={x:"none"===this._boxShadow?0:parseInt(d[0],10),y:"none"===this._boxShadow?0:parseInt(d[1],10),blur:"none"===this._boxShadow?0:parseInt(d[2],10),color:"none"===this._boxShadow?"":d[3]};this.shadowL=0>this._boxShadow.x?Math.abs(this._boxShadow.x)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-this._boxShadow.x);this.shadowR=this._boxShadow.blur+this._boxShadow.x;this.shadowT=0>this._boxShadow.y?Math.abs(this._boxShadow.y)+this._boxShadow.blur:Math.abs(this._boxShadow.blur-
this._boxShadow.y);this.shadowB=this._boxShadow.blur+this._boxShadow.y;this.shadowW=this.shadowL+this.shadowR;this.shadowH=this.shadowT+this.shadowB;this._calcWH();if(!e)return this._updateCanvasWH(),this.render()}else return this._boxShadow},innerShadow:function(a){return"undefined"!==typeof a?(this._innerShadow=a,this.render()):this._innerShadow},selectionColor:function(a){return"undefined"!==typeof a?(this._selectionColor=a,this.render()):this._selectionColor},placeHolder:function(a){return"undefined"!==
typeof a?(this._placeHolder=a,this.render()):this._placeHolder},value:function(a){return"undefined"!==typeof a?(this._value=a,this.focus()):this._value},onsubmit:function(a){if("undefined"!==typeof a)return this._onsubmit=a,this;this._onsubmit()},onkeydown:function(a){if("undefined"!==typeof a)return this._onkeydown=a,this;this._onkeydown()},onkeyup:function(a){if("undefined"!==typeof a)return this._onkeyup=a,this;this._onkeyup()},focus:function(a){var e=this,d;if(!e._readonly){e._hasFocus||e._onfocus(e);
e._selectionUpdated?delete e._selectionUpdated:e._selection=[0,0];e._cursorPos="number"===typeof a?a:e._clipText().length;e._placeHolder===e._value&&(e._value="");e._hasFocus=!0;e._cursor=!0;e._cursorInterval&&clearInterval(e._cursorInterval);e._cursorInterval=setInterval(function(){e._cursor=!e._cursor;e.render()},500);a=navigator.userAgent.toLowerCase();a=0<=a.indexOf("chrome")&&0<=a.indexOf("mobile")&&0<=a.indexOf("android");var s="undefined"!==typeof window.orientation;s&&!a&&document&&document.createElement&&
(d=document.createElement("input"))?(d.type="text",d.style.opacity=0,d.style.position="absolute",d.style.left=e._x+e._extraX+(e._canvas?e._canvas.offsetLeft:0)+"px",d.style.top=e._y+e._extraY+(e._canvas?e._canvas.offsetTop:0)+"px",d.style.width=e._width,d.style.height=0,document.body.appendChild(d),d.focus(),d.addEventListener("blur",function(){e.blur(e)},!1)):s&&e.value(prompt(e._placeHolder)||"");return e.render()}},blur:function(a){a=a||this;a._disableBlur||(a._onblur(a),a._cursorInterval&&clearInterval(a._cursorInterval),
a._hasFocus=!1,a._cursor=!1,a._selection=[0,0],""===a._value&&(a._value=a._placeHolder));return a.render()},disableBlur:function(a){(a||this)._disableBlur=!0},enableBlur:function(a){(a||this)._disableBlur=!1},keydown:function(a,e){var u=a.which,s=a.shiftKey,f=null,g;if(e._hasFocus){e._onkeydown(a,e);if(65===u&&(a.ctrlKey||a.metaKey))return e._selection=[0,e._value.length],a.preventDefault(),e.render();if(17===u||a.metaKey||a.ctrlKey)return e;a.preventDefault();if(8===u)!e._clearSelection()&&0<e._cursorPos&&
(s=e._value.substr(0,e._cursorPos-1),g=e._value.substr(e._cursorPos,e._value.length),e._value=s+g,e._cursorPos--);else if(37===u)0<e._cursorPos&&(e._cursorPos--,e._cursor=!0,e._selection=[0,0]);else if(39===u)e._cursorPos<e._value.length&&(e._cursorPos++,e._cursor=!0,e._selection=[0,0]);else if(13===u)e._onsubmit(a,e);else if(9===u)if(e._tabToClear)e._value="",e._cursorPos=0;else{var h=d[e._inputsIndex+1]?e._inputsIndex+1:0;h!==e._inputsIndex&&(e.blur(),setTimeout(function(){d[h].focus()},10))}else if(f=
e._mapCodeToKey(s,u)){e._clearSelection();if(e._maxlength&&e._maxlength<=e._value.length)return;s=e._value?e._value.substr(0,e._cursorPos):"";g=e._value?e._value.substr(e._cursorPos):"";e._value=s+f+g;e._cursorPos++}return 13==u&&e._renderOnReturn||13!==u?e.render():function(){}}},click:function(a,e){var d=e._mousePos(a),s=d.x,d=d.y;if(e._endSelection)delete e._endSelection,delete e._selectionUpdated;else if(e._canvas&&e._overInput(s,d)||!e._canvas){if(e._mouseDown)return e._mouseDown=!1,e.click(a,
e),e.focus(e._clickPos(s,d))}else return e.blur()},mousemove:function(a,e){var d=e._mousePos(a),s=d.x,f=d.y;(d=e._overInput(s,f))&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1);if(e._hasFocus&&0<=e._selectionStart)if(f=e._clickPos(s,f),s=Math.min(e._selectionStart,f),f=Math.max(e._selectionStart,f),!d)e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,e.render();else if(e._selection[0]!==s||e._selection[1]!==
f)e._selection=[s,f],e.render()},mousedown:function(a,e){var d=e._mousePos(a),s=d.x,d=d.y,f=e._overInput(s,d);e._mouseDown=f;e._hasFocus&&f&&(e._selectionStart=e._clickPos(s,d))},mouseup:function(a,e){var d=e._mousePos(a),s=d.x,d=d.y,f=e._clickPos(s,d)!==e._selectionStart;e._hasFocus&&0<=e._selectionStart&&e._overInput(s,d)&&f?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart;e.click(a,e)},renderCanvas:function(){return this._renderCanvas},cleanup:function(){this._canvas.removeEventListener("mouseup",
this.mouseupCanvasListener,!1);this._canvas.removeEventListener("mousedown",this.mousedownCanvasListener,!1);this._canvas.removeEventListener("mousemove",this.mousemoveCanvasListener,!1);window.removeEventListener("keydown",this.keydownWindowListener,!1);window.removeEventListener("keyup",this.keyupWindowListener,!1);window.removeEventListener("mouseup",this.mouseupWindowListener,!0);window.removeEventListener("paste",this.pasteWindowListener,!1);clearInterval(this._cursorInterval);this._canvas.style.cursor=
"default";for(var a=0;a<d.length;a++)d[a]===this&&d.remove(a)},render:function(){var a=this,e=a._renderCtx,d=a.outerW,s=a.outerH,f=a._borderRadius,g=a._borderWidth,h=a.shadowW,l=a.shadowH;e.clearRect(0,0,e.canvas.width,e.canvas.height);e.shadowOffsetX=a._boxShadow.x;e.shadowOffsetY=a._boxShadow.y;e.shadowBlur=a._boxShadow.blur;e.shadowColor=a._boxShadow.color;0<a._borderWidth&&(e.fillStyle=a._borderColor,a._roundedRect(e,a.shadowL,a.shadowT,d-h,s-l,f),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,
e.shadowBlur=0);a._drawTextBox(function(){e.shadowOffsetX=0;e.shadowOffsetY=0;e.shadowBlur=0;var q=a._clipText(),C=a._padding+a._borderWidth+a.shadowT;if(0<a._selection[1]){var x=a._textWidth(q.substring(0,a._selection[0])),F=a._textWidth(q.substring(a._selection[0],a._selection[1]));e.fillStyle=a._selectionColor;e.fillRect(C+x,C,F,a._height)}e.fillStyle=a._placeHolder===a._value&&""!==a._value?a._placeHolderColor:a._fontColor;a._cursor&&(x=a._textWidth(q.substring(0,a._cursorPos)),e.fillRect(C+x,
C,1,a._height));x=a._padding+a._borderWidth+a.shadowL;C=Math.round(C+a._height/2);e.font=a._fontStyle+" "+a._fontWeight+" "+a._fontSize+"px "+a._fontFamily;e.textAlign="left";e.textBaseline="middle";e.fillText(q,x,C);F=a._innerShadow.split("px ");q="none"===a._innerShadow?0:parseInt(F[0],10);C="none"===a._innerShadow?0:parseInt(F[1],10);x="none"===a._innerShadow?0:parseInt(F[2],10);F="none"===a._innerShadow?"":F[3];if(0<x){var B=a._shadowCtx,A=B.canvas.width,D=B.canvas.height;B.clearRect(0,0,A,D);
B.shadowBlur=x;B.shadowColor=F;B.shadowOffsetX=0;B.shadowOffsetY=C;B.fillRect(-1*d,-100,3*d,100);B.shadowOffsetX=q;B.shadowOffsetY=0;B.fillRect(A,-1*s,100,3*s);B.shadowOffsetX=0;B.shadowOffsetY=C;B.fillRect(-1*d,D,3*d,100);B.shadowOffsetX=q;B.shadowOffsetY=0;B.fillRect(-100,-1*s,100,3*s);a._roundedRect(e,g+a.shadowL,g+a.shadowT,d-2*g-h,s-2*g-l,f);e.clip();e.drawImage(a._shadowCanvas,0,0,A,D,g+a.shadowL,g+a.shadowT,A,D)}a._ctx&&(a._ctx.clearRect(a._x,a._y,e.canvas.width,e.canvas.height),a._ctx.drawImage(a._renderCanvas,
a._x,a._y));return a})},_drawTextBox:function(a){var e=this,d=e._renderCtx,s=e.outerW,f=e.outerH,g=e._borderRadius,h=e._borderWidth,l=e.shadowW,q=e.shadowH;if(""===e._backgroundImage)d.fillStyle=e._backgroundColor,e._roundedRect(d,h+e.shadowL,h+e.shadowT,s-2*h-l,f-2*h-q,g),d.fill(),a();else{var C=new Image;C.src=e._backgroundImage;C.onload=function(){d.drawImage(C,0,0,C.width,C.height,h+e.shadowL,h+e.shadowT,s,f);a()}}},_clearSelection:function(){if(0<this._selection[1]){var a=this._selection[0],
e=this._selection[1];this._value=this._value.substr(0,a)+this._value.substr(e);this._cursorPos=a;this._cursorPos=0>this._cursorPos?0:this._cursorPos;this._selection=[0,0];return!0}return!1},_clipText:function(a){a="undefined"===typeof a?this._value:a;var e=this._textWidth(a)/(this._width-this._padding);return(1<e?a.substr(-1*Math.floor(a.length/e)):a)+""},_textWidth:function(a){var e=this._renderCtx;e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily;e.textAlign=
"left";return e.measureText(a).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW;this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var a=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW);this._renderCanvas.setAttribute("height",this.outerH);this._shadowCanvas.setAttribute("width",this._width+2*this._padding);this._shadowCanvas.setAttribute("height",
this._height+2*this._padding);this._ctx&&this._ctx.clearRect(this._x,this._y,a,e)},_roundedRect:function(a,e,d,s,f,g){s<2*g&&(g=s/2);f<2*g&&(g=f/2);a.beginPath();a.moveTo(e+g,d);a.lineTo(e+s-g,d);a.quadraticCurveTo(e+s,d,e+s,d+g);a.lineTo(e+s,d+f-g);a.quadraticCurveTo(e+s,d+f,e+s-g,d+f);a.lineTo(e+g,d+f);a.quadraticCurveTo(e,d+f,e,d+f-g);a.lineTo(e,d+g);a.quadraticCurveTo(e,d,e+g,d);a.closePath()},_overInput:function(a,e){var d=a<=this._x+this._extraX+this._width+2*this._padding,s=e>=this._y+this._extraY,
f=e<=this._y+this._extraY+this._height+2*this._padding;return a>=this._x+this._extraX&&d&&s&&f},_clickPos:function(a,e){var d=this._value;this._value===this._placeHolder&&(d="");var d=this._clipText(d),s=0,f=d.length;if(a-(this._x+this._extraX)<this._textWidth(d))for(var g=0;g<d.length;g++)if(s+=this._textWidth(d[g]),s>=a-(this._x+this._extraX)){f=g;break}return f},_mousePos:function(a){var e=a.target,d=document.defaultView.getComputedStyle(e,void 0),s=parseInt(d.paddingLeft,10)||0,f=parseInt(d.paddingLeft,
10)||0,g=parseInt(d.borderLeftWidth,10)||0,d=parseInt(d.borderLeftWidth,10)||0,h=document.body.parentNode.offsetTop||0,l=document.body.parentNode.offsetLeft||0,q=0,C=0;if("unefined"!==typeof e.offsetParent){do q+=e.offsetLeft,C+=e.offsetTop;while(e=e.offsetParent)}return{x:a.pageX-(q+(s+g+l)),y:a.pageY-(C+(f+d+h))}},_mapCodeToKey:function(a,e){for(var d=[8,9,13,16,17,18,20,27,91,92],s="",s=0;s<d.length;s++)if(e===d[s])return;if("boolean"===typeof a&&"number"===typeof e)return d={32:" ",48:")",49:"!",
50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",107:"+",189:"_",186:":",187:"+",188:"<",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s=a?65<=e&&90>=e?String.fromCharCode(e):d[e]:65<=e&&90>=e?String.fromCharCode(e).toLowerCase():96===e?"0":97===e?"1":98===e?"2":99===e?"3":100===e?"4":101===e?"5":102===e?"6":103===e?"7":104===e?"8":105===e?"9":188===e?",":190===e?".":191===e?"/":192===e?"`":220===e?"\\":187===e?"=":189===e?"-":222===e?"'":186===e?";":219===e?"[":221===e?"]":
String.fromCharCode(e)}}})();
(function(d,a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):d.Spinner=a()})(this,function(){function d(a,e){var d=document.createElement(a||"div"),f;for(f in e)d[f]=e[f];return d}function a(a){for(var e=1,d=arguments.length;e<d;e++)a.appendChild(arguments[e]);return a}function e(a,e,d,f){var g=["opacity",e,~~(100*a),d,f].join("-");d=0.01+d/f*100;f=Math.max(1-(1-a)/e*(100-d),a);var h=F.substring(0,F.indexOf("Animation")).toLowerCase();x[g]||(B.insertRule("@"+
(h&&"-"+h+"-"||"")+"keyframes "+g+"{0%{opacity:"+f+"}"+d+"%{opacity:"+a+"}"+(d+0.01)+"%{opacity:1}"+(d+e)%100+"%{opacity:"+a+"}100%{opacity:"+f+"}}",B.cssRules.length),x[g]=1);return g}function u(a,e){var d=a.style,f,g;e=e.charAt(0).toUpperCase()+e.slice(1);for(g=0;g<C.length;g++)if(f=C[g]+e,void 0!==d[f])return f;if(void 0!==d[e])return e}function s(a,e){for(var d in e)a.style[u(a,d)||d]=e[d];return a}function f(a){for(var e=1;e<arguments.length;e++){var d=arguments[e],f;for(f in d)void 0===a[f]&&
(a[f]=d[f])}return a}function g(a){for(var e={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)e.x+=a.offsetLeft,e.y+=a.offsetTop;return e}function h(a,e){return"string"==typeof a?a:a[e%a.length]}function l(a){if("undefined"==typeof this)return new l(a);this.opts=f(a||{},l.defaults,A)}function q(){function e(a,f){return d("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',f)}B.addRule(".spin-vml","behavior:url(#default#VML)");l.prototype.lines=function(d,f){function g(){return s(e("group",
{coordsize:C+" "+C,coordorigin:-q+" "+-q}),{width:C,height:C})}function l(c,d,R){a(t,a(s(g(),{rotation:360/f.lines*c+"deg",left:~~d}),a(s(e("roundrect",{arcsize:f.corners}),{width:q,height:f.width,left:f.radius,top:-f.width>>1,filter:R}),e("fill",{color:h(f.color,c),opacity:f.opacity}),e("stroke",{opacity:0}))))}var q=f.length+f.width,C=2*q,c=2*-(f.width+f.length)+"px",t=s(g(),{position:"absolute",top:c,left:c});if(f.shadow)for(c=1;c<=f.lines;c++)l(c,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(c=1;c<=f.lines;c++)l(c);return a(d,t)};l.prototype.opacity=function(a,e,d,f){a=a.firstChild;f=f.shadow&&f.lines||0;a&&e+f<a.childNodes.length&&(a=(a=(a=a.childNodes[e+f])&&a.firstChild)&&a.firstChild)&&(a.opacity=d)}}var C=["webkit","Moz","ms","O"],x={},F,B=function(){var e=d("style",{type:"text/css"});a(document.getElementsByTagName("head")[0],e);return e.sheet||e.styleSheet}(),A={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={};f(l.prototype,{spin:function(a){this.stop();var e=this,f=e.opts,h=e.el=s(d(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),l=f.radius+f.length+f.width,q,C;a&&(a.insertBefore(h,a.firstChild||null),C=g(a),q=g(h),s(h,{left:("auto"==f.left?C.x-q.x+(a.offsetWidth>>1):parseInt(f.left,10)+l)+"px",top:("auto"==f.top?C.y-q.y+(a.offsetHeight>>1):parseInt(f.top,10)+l)+"px"}));h.setAttribute("role",
"progressbar");e.lines(h,e.opts);if(!F){var c=0,t=(f.lines-1)*(1-f.direction)/2,G,y=f.fps,R=y/f.speed,w=(1-f.opacity)/(R*f.trail/100),Z=R/f.lines;(function n(){c++;for(var a=0;a<f.lines;a++)G=Math.max(1-(c+(f.lines-a)*Z)%R*w,f.opacity),e.opacity(h,a*f.direction+t,G,f);e.timeout=e.el&&setTimeout(n,~~(1E3/y))})()}return e},stop:function(){var a=this.el;a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0);return this},lines:function(f,g){function l(a,c){return s(d(),
{position:"absolute",width:g.length+g.width+"px",height:g.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/g.lines*q+g.rotate)+"deg) translate("+g.radius+"px,0)",borderRadius:(g.corners*g.width>>1)+"px"})}for(var q=0,C=(g.lines-1)*(1-g.direction)/2,x;q<g.lines;q++)x=s(d(),{position:"absolute",top:1+~(g.width/2)+"px",transform:g.hwaccel?"translate3d(0,0,0)":"",opacity:g.opacity,animation:F&&e(g.opacity,g.trail,C+q*g.direction,g.lines)+" "+1/g.speed+"s linear infinite"}),
g.shadow&&a(x,s(l("#000","0 0 4px #000"),{top:"2px"})),a(f,a(x,l(h(g.color,q),"0 0 1px rgba(0,0,0,.1)")));return f},opacity:function(a,e,d){e<a.childNodes.length&&(a.childNodes[e].style.opacity=d)}});var D=s(d("group"),{behavior:"url(#default#VML)"});!u(D,"transform")&&D.adj?q():F=u(D,"animation");return l});m=window.m||{};
(function(d,a){function e(a){return(10>a?"0":"")+a}var u={0:["None","U"],1:["Time","sec"],2:["Delay","sec"],3:["Frequency","Hz"],4:["Time code format",""],5:["Distance","m"],6:["Speed","m/s"],7:["Acceleration","m/sec^2"],8:["Jerk","m/sec^3"],9:["Doppler","Hz"],10:["Doppler rate","Hz/sec"],11:["Energy","J"],12:["Power","W"],13:["Mass","g"],14:["Volume","l"],15:["Angular power density","W/ster"],16:["Integrated power density","W/rad"],17:["Spatial power density","W/m^2"],18:["Integrated power density",
"W/m"],19:["Spectral power density","W/MHz"],20:["Amplitude","U"],21:["Real","U"],22:["Imaginary","U"],23:["Phase","rad"],24:["Phase","deg"],25:["Phase","cycles"],26:["10*Log","U"],27:["20*Log","U"],28:["Magnitude","U"],29:["Unknown","U"],30:["Unknown","U"],31:["General dimensionless",""],32:["Counts",""],33:["Angle","rad"],34:["Angle","deg"],35:["Relative power","dB"],36:["Relative power","dBm"],37:["Relative power","dBW"],38:["Solid angle","ster"],40:["Distance","ft"],41:["Distance","nmi"],42:["Speed",
"ft/sec"],43:["Speed","nmi/sec"],44:["Speed","knots=nmi/hr"],45:["Acceleration","ft/sec^2"],46:["Acceleration","nmi/sec^2"],47:["Acceleration","knots/sec"],48:["Acceleration","G"],49:["Jerk","G/sec"],50:["Rotation","rps"],51:["Rotation","rpm"],52:["Angular velocity","rad/sec"],53:["Angular velocity","deg/sec"],54:["Angular acceleration","rad/sec^2"],55:["Angular acceleration","deg/sec^2"],60:["Latitude","deg"],61:["Longitude","deg"],62:["Altitude","ft"],63:["Altitude","m"]};d.Mc={colormap:[[{pos:0,
red:0,green:0,blue:0},{pos:60,red:50,green:50,blue:50},{pos:100,red:100,green:100,blue:100},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0},{pos:100,red:0,green:0,blue:0}],[{pos:0,red:0,green:0,blue:15},{pos:10,red:0,green:0,blue:50},{pos:31,red:0,green:65,blue:75},{pos:50,red:0,green:85,blue:0},{pos:70,red:75,green:80,blue:0},{pos:83,red:100,green:60,blue:0},{pos:100,red:100,green:0,blue:0}],[{pos:0,red:100,green:100,blue:0},{pos:20,red:0,green:80,blue:40},
{pos:30,red:0,green:100,blue:100},{pos:50,red:10,green:10,blue:0},{pos:65,red:100,green:0,blue:0},{pos:88,red:100,green:40,blue:0},{pos:100,red:100,green:100,blue:0}],[{pos:0,red:0,green:75,blue:0},{pos:22,red:0,green:90,blue:90},{pos:37,red:0,green:0,blue:85},{pos:49,red:90,green:0,blue:85},{pos:68,red:90,green:0,blue:0},{pos:80,red:90,green:90,blue:0},{pos:100,red:95,green:95,blue:95}],[{pos:0,red:10,green:0,blue:23},{pos:18,red:34,green:0,blue:60},{pos:36,red:58,green:20,blue:47},{pos:55,red:74,
green:20,blue:28},{pos:72,red:90,green:43,blue:0},{pos:87,red:100,green:72,blue:0},{pos:100,red:100,green:100,blue:76}]]};d.PIPESIZE=1048576;d.initialize=function(a,e){var h=new BlueHeader(null);h.version="BLUE";h.size=0;h.type=1E3;h.format="SF";h.timecode=0;h.xstart=0;h.xdelta=1;h.xunits=0;h.subsize=1;h.ystart=0;h.ydelta=1;h.yunits=0;e||(e={});for(var l in e)h[l]=e[l];h["class"]=h.type/1E3;e.pipe?(h.pipe=!0,h.in_byte=0,h.out_byte=0,h.buf=new ArrayBuffer(e.pipesize||d.PIPESIZE),h.setData(h.buf),h.data_free=
h.dview.length):h.setData(a);return h};d.force1000=function(a){2==a["class"]&&(a.size*=a.subsize,a.bpe/=a.subsize,a.ape=1)};d.grab=function(e,d,h,l){if(!e.dview)return 0;"C"===e.format[0]&&(h*=2);l=Math.min(d.length,e.dview.length-h);if(d.set===a)for(var q=0;q<l;q++)d[q]=e.dview[h+q];else d.set(e.dview.subarray(h,h+l));"C"===e.format[0]&&(l/=2);return l};d.filad=function(a,e){if(a.data_free<e.length)throw"Pipe full";var d=a.in_byte/a.dview.BYTES_PER_ELEMENT,l=d+e.length;if(l>a.dview.length){var l=
a.dview.length-d,q=e.length-l;e.subarray?(a.dview.set(e.subarray(0,l),d),a.dview.set(e.subarray(l,e.length),0)):(a.dview.set(e.slice(0,l),d),a.dview.set(e.slice(l,e.length),0));a.in_byte=q*a.dview.BYTES_PER_ELEMENT}else a.dview.set(e,d),a.in_byte=l*a.dview.BYTES_PER_ELEMENT%a.buf.byteLength;a.data_free-=e.length;if(a.onwritelisteners)for(d=0;d<a.onwritelisteners.length;d++)window.setTimeout(a.onwritelisteners[d],0)};d.pavail=function(a){return a.dview.length-a.data_free};d.grabx=function(e,d,h,l){var q=
e.dview.length-e.data_free;l===a&&(l=0);if(!h)h=Math.min(d.length-l,q);else if(h>d.length-l)throw"m.grabx : nget larger then available buffer space";if(0>h)throw"m.grabx : nget cannot be negative";if(h>q)return 0;var q=e.out_byte/e.dview.BYTES_PER_ELEMENT,s=q+h;if(s>=e.dview.length){var x=e.dview.length-q,s=s-e.dview.length;d.set(e.dview.subarray(q,e.dview.length),l);d.set(e.dview.subarray(0,s),l+x)}else d.set(e.dview.subarray(q,s),l);e.out_byte=s*e.dview.BYTES_PER_ELEMENT%e.buf.byteLength;e.data_free+=
h;return h};d.addPipeWriteListener=function(a,e){a.onwritelisteners||(a.onwritelisteners=[]);-1===a.onwritelisteners.indexOf(e)&&a.onwritelisteners.push(e)};d.units_name=function(a){a=u[a];return a[0]+" ("+a[1]+")"};d.trim_name=function(a){var e=a.indexOf("]");-1==e&&(e=a.indexOf("/"));-1==e&&(e=a.indexOf(":"));var d=a.substr(e+1,a.length).indexOf(".");0>d&&(d=a.length-e);return a.substr(e+1,e+d+1)};d.label=function(e,d){var h=u[e];if(h===a)return"";var l="?";1E3===d?l="K":0.001===d?l="m":1E6===d?
l="M":1E-6===d?l="u":1E9===d?l="G":1E-9===d?l="n":1E12===d?l="T":1E-12===d?l="p":1===d&&(l="");return h[0]+" ("+l+h[1]+")"};var s="F";d.vstype=function(a){s=a;"D"===s||"L"===s||"F"===s||"I"===s||"B"===s||alert("Unsupported vector type")};d.vlog10=function(e,d,h){d===a&&(d=1E-20);h===a&&(h=e);for(var l=0;l<e.length&&!(h.length<=l);l++)h[l]=Math.log(Math.max(e[l],d))/Math.log(10)};d.vlogscale=function(e,d,h,l){d===a&&(d=1E-20);h===a&&(h=1);l===a&&(l=e);for(var q=0;q<e.length&&!(l.length<=q);q++)l[q]=
Math.log(Math.abs(Math.max(e[q],d)))/Math.log(10),l[q]*=h};d.vsmul=function(e,d,h,l){h===a&&(h=e);l===a&&(l=h.length);l=Math.min(h.length,l);l=Math.min(e.length,l);for(var q=0;q<l&&!(h.length<=q);q++)h[q]=e[q]*d};d.vmxmn=function(a,e){var d=a[0],l=a[0],q=0,s=0;e=Math.min(e,a.length);for(var x=0;x<e;x++)a[x]>d&&(d=a[x],q=x),a[x]<l&&(l=a[x],s=x);return{smax:d,smin:l,imax:q,imin:s}};d.vmov=function(e,d,h,l,q){q===a&&(q=e.length);q=Math.min(e.length,q);for(var s=0;s<q;s++){var x=s*d,F=s*l;if(x>=e.length)break;
if(F>=h.length)break;h[F]=e[x]}};d.vfill=function(e,d,h){h===a&&(h=e.length);h=Math.min(e.length,h);for(var l=0;l<h;l++)e[l]=d};d.vabs=function(e,d,h){h===a&&(h=e.length);d===a&&(d=e);for(var l=0;l<h;l++)d[l]=Math.abs(e[l])};d.cvmag=function(e,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var l=0;l<h;l++){var q=2*l+1;if(q>=e.length)break;d[l]=Math.sqrt(e[q-1]*e[q-1]+e[q]*e[q])}};d.cvmag2=function(e,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var l=0,q=0;q<h;q++){l=2*q+1;if(l>=e.length)break;
d[q]=e[l-1]*e[l-1]+e[l]*e[l]}};d.cvpha=function(e,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var l=0,q=0,s=l=0;s<h;s++){l=2*s+1;if(l>=e.length)break;q=e[l-1];l=e[l];0===q&&0===l&&(q=1);d[s]=Math.atan2(l,q)}};d.cvphad=function(e,d,h){h===a&&(h=d.length);h=Math.min(d.length,h);for(var l=0,q=0,s=l=0;s<h;s++){l=2*s+1;if(l>=e.length)break;q=e[l-1];l=e[l];0===q&&0===l&&(q=1);d[s]=Math.atan2(l,q)*(180/Math.PI)}};d.trunc=function(a){return a-a%1};d.sign=function(a,e){return 0<=e?Math.abs(a):-Math.abs(a)};
d.sec2tod=function(a){var d="",h=Date.UTC(1950,0,1);Date.UTC(1949,11,31);var l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0,0),q=new Date(l.getFullYear(),l.getMonth(),l.getDate()+1,0,0,0,0),s=new Date(l.getFullYear(),0,1,0,0,0,0),x=new Date(l.getFullYear()+1,0,1,0,0,0),l=(q-d)/1E3,s=(x-s)/1E3,q=-1*s;0<=a?a<l?(d=d.getTime()+1E3*a,l=new Date(d),d=e(l.getHours())+":"+e(l.getMinutes())+":"+e(l.getSeconds())+":"+e(l.getUTCMilliseconds())):a<s?(h=a/l,h=[0<h?Math.floor(h):Math.ceil(h)],
l=new Date(1E3*a+d.getTime()),d=h.toString()+"::"+e(l.getHours())+":"+e(l.getMinutes())+":"+e(l.getSeconds())+":"+e(l.getUTCMilliseconds())):(l=new Date(1E3*a+h),d=l.getUTCFullYear()+":"+e(l.getUTCMonth())+":"+e(l.getUTCDate())+"::"+e(l.getUTCHours())+":"+e(l.getUTCMinutes())+":"+e(l.getUTCSeconds())+":"+e(l.getUTCMilliseconds())):a>q?(h=a/l,h=[0>=h?Math.ceil(h):Math.floor(h)],l=new Date(Math.abs(1E3*a)+d.getTime()),d=h.toString()+"::"+e(l.getHours())+":"+e(l.getMinutes())+":"+e(l.getSeconds())+":"+
e(l.getUTCMilliseconds())):(l=new Date(1E3*a+h),d=l.getUTCFullYear()+":"+e(l.getUTCMonth())+":"+e(l.getUTCDate())+"::"+e(l.getUTCHours())+":"+e(l.getUTCMinutes())+":"+e(l.getUTCSeconds())+":"+e(l.getUTCMilliseconds()));0!=a%1&&(d+="."+(a%1).toPrecision(6).slice(2,8));return d};d.sec2tod_j1970=function(a){var d="";0<=a&&86400>a?(d=new Date(1E3*a),d=e(d.getHours())+":"+e(d.getMinutes())+":"+e(d.getSeconds())):0>a&&-31536E3<a?(d=new Date(1E3*a),d=(a/86400*-1).toString()+"::"+e(d.getHours())+":"+e(d.getMinutes())+
":"+e(d.getSeconds())):(d=new Date(1E3*(a-631152E3)),d=d.getFullYear()+":"+e(d.getMonth())+":"+e(d.getDate())+"::"+e(d.getHours())+":"+e(d.getMinutes())+":"+e(d.getSeconds()));0!=a%1&&(d+="."+(a%1).toPrecision(6).slice(2,8));return d};d.throttle=function(a,e){var d=(new Date).getTime();return function(){var l=(new Date).getTime();l-d>=a&&(d=l,e.apply(null,arguments))}}})(window.m);var mx=window.mx||{};
(function(d,a,e){function u(){this.ymax=this.ymin=this.xmax=this.xmin=this.yl=this.xl=this.yo=this.xo=0;this.mode=this.func=e}function s(c){this.root=c;this.parent=document.createElement("div");this.parent.style.position="relative";this.parent.width=c.clientWidth;this.parent.height=c.clientHeight;c.appendChild(this.parent);this.canvas=document.createElement("canvas");this.canvas.style.position="absolute";this.canvas.style.top="0px";this.canvas.style.left="0px";this.canvas.width=c.clientWidth;this.canvas.height=
c.clientHeight;this.parent.appendChild(this.canvas);this.active_canvas=this.canvas;this.wid_canvas=document.createElement("canvas");this.wid_canvas.style.position="absolute";this.wid_canvas.style.top="0px";this.wid_canvas.style.left="0px";this.wid_canvas.style.zIndex=1;this.wid_canvas.width=c.clientWidth;this.wid_canvas.height=c.clientHeight;this.parent.appendChild(this.wid_canvas);this.level=this.text_h=this.text_w=0;this.width=this.parent.width;this.height=this.parent.height;this.ymrk=this.xmrk=
this.ypos=this.xpos=0;this.origin=1;this.stk=[new d.STKSTRUCT];d.setbgfg(this,"black","white");this.warpbox=this.event_cb=e;this.rmode=!1;this.linewidth=1;this.style=e;this.xi=!1;this.l=this.state_mask=this.button_press=this.button_release=0;this.r=this.width;this.t=0;this.b=this.height;this.scrollbar_x=new d.SCROLLBAR;this.scrollbar_y=new d.SCROLLBAR;this.prompt=e;this.pixel=[];this._renderCanvas=document.createElement("canvas")}function f(c,a,e,d,f,w,g){f<=e?g>e&&0<(d-a)*(g-e)-(w-a)*(f-e)&&(c+=
1):g<=e&&0>(d-a)*(g-e)-(w-a)*(f-e)&&(c-=1);return c}function g(c,a){a.animationFrameHandle||(a.animationFrameHandle=requestAnimFrame(d.withWidgetLayer(c,function(){d.erase_window(c);a.animationFrameHandle=e;var G=1.5*c.text_h;a.x=Math.max(a.x,0);a.y=Math.max(a.y,0);a.x=Math.min(a.x,c.width-a.w);a.y=Math.min(a.y,c.height-a.h);var y=a.x+K.GBorder+Math.max(0,K.sidelab),f=a.y+K.GBorder+K.toplab*(G+K.GBorder),w=a.w-2*K.GBorder-Math.abs(K.sidelab);d.widgetbox(c,a.x,a.y,a.w,a.h,y,f,w,a.h-2*K.GBorder-K.toplab*
(G+K.GBorder),a.title);var g=c.wid_canvas.getContext("2d");g.lineWidth=1;g.strokeStyle=c.xwbs;g.beginPath();g.moveTo(y,f-4+0.5);g.lineTo(y+w-1,f-4+0.5);g.stroke();g.strokeStyle=c.xwts;g.beginPath();g.moveTo(y,f-3+0.5);g.lineTo(y+w-1,f-3+0.5);g.stroke();for(var r=0;r<a.items.length;r++){var n=a.items[r],p=f+G*r;"separator"==n.style?(g.fillStyle=c.xwbs,g.fillRect(y,p,w,G),g.beginPath(),g.moveTo(y,p+0.5),g.lineTo(y+w,p+0.5),g.stroke(),g.textBaseline="middle",g.textAlign="left",g.fillStyle=c.xwfg,g.fillText(" "+
n.text+" ",y+2*c.text_w,p+G/2)):(g.fillStyle=c.xwlo,g.fillRect(y,p,w,G),g.beginPath(),g.moveTo(y,p+0.5),g.lineTo(y+w,p+0.5),g.stroke(),n.selected&&d.shadowbox(c,y-1,p,w+2,G,1,2,"",0),g.textBaseline="middle",g.textAlign="left",g.fillStyle=c.xwfg,"checkbox"===n.style?(g.fillText(" "+n.text+" ",y+2*c.text_w,p+G/2),g.strokeStyle=c.xwfg,g.strokeRect(y+1+c.text_w,p+(G-c.text_w)/2,c.text_w,c.text_w),n.checked&&(g.beginPath(),g.moveTo(y+1+c.text_w,p+(G-c.text_w)/2),g.lineTo(y+1+c.text_w+c.text_w,p+(G-c.text_w)/
2+c.text_w),g.stroke(),g.beginPath(),g.moveTo(y+1+c.text_w+c.text_w,p+(G-c.text_w)/2),g.lineTo(y+1+c.text_w,p+(G-c.text_w)/2+c.text_w),g.stroke())):(g.fillText(" "+n.text+" ",y,p+G/2),n.checked&&(g.beginPath(),g.moveTo(y+1,p+c.text_h/4),g.lineTo(y+1+c.text_w-2,p+c.text_h/4+c.text_h/2),g.lineTo(y+1,p+c.text_h/4+c.text_h),g.lineTo(y+1,p+c.text_h/4),g.fill())))}})))}function h(c,a){d.onWidgetLayer(c,function(){d.erase_window(c)});c.menu=e;c.widget=null;for(var G=0;G<a.items.length;G++){var y=a.items[G];
if(y.selected){y.handler?y.handler():y.menu&&(G=y.menu,"function"===typeof y.menu&&(G=y.menu()),G.finalize=a.finalize,d.menu(c,G));break}}!c.menu&&a.finalize&&a.finalize()}function l(c,a){d.onWidgetLayer(c,function(){d.erase_window(c)});c.menu=e;c.widget=null;!c.menu&&a.finalize&&a.finalize()}function q(c,a,e){var d=!0,f;f=a/c;0<c?f>e.tL?d=!1:f>e.tE&&(e.tE=f):0>c?f<e.tE?d=!1:f<e.tL&&(e.tL=f):0<a&&(d=!1);return d}function C(c,a,e,d,f,w,g,r){0>a&&(a=0);0>e&&(e=0);0>d&&(d=0);0>f&&(f=0);r&&(c.lineWidth=
r);g&&(c.strokeStyle=g);1===c.lineWidth%2&&(a===d&&(d=a=Math.floor(a)+0.5),e===f&&(f=e=Math.floor(e)+0.5));if(!w||!w.mode)c.beginPath(),c.moveTo(a,e),c.lineTo(d,f),c.stroke(),c.beginPath();else if("dashed"===w.mode){if(dashOn(c,w.on,w.off))c.beginPath(),c.moveTo(a,e),c.lineTo(d,f),c.stroke(),dashOff(c);else if(c.beginPath(),e===f)for(f=Math.min(a,d),d=Math.max(a,d);f<d;)c.moveTo(f,e),c.lineTo(f+w.on,e),c.stroke(),f+=w.on+w.off;else if(a===d)for(d=Math.min(e,f),f=Math.max(e,f);d<f;)c.moveTo(a,d),c.lineTo(a,
d+w.on),c.stroke(),d+=w.on+w.off;else throw"Only horizontal or vertical dashed lines are supported";c.beginPath()}else if("xor"===w.mode)if("undefined"===typeof Uint8ClampedArray)c.beginPath(),c.moveTo(a,e),c.lineTo(d,f),c.stroke(),c.beginPath();else{g=w=0;if(e===f)w=Math.abs(d-a),g=r,a=Math.min(a,d);else if(a===d)w=r,g=Math.abs(f-e),e=Math.min(e,f);else throw"Only horizontal and vertical lines can be drawn with XOR";if(0!==w&&0!==g){a=Math.floor(a);e=Math.floor(e);d=c.getImageData(a,e,w,g);f=d.data;
w=0;for(r=f.length;w<r;w+=4)f[w]=255-f[w],f[w+1]=255-f[w+1],f[w+2]=255-f[w+2],f[w+3]=255;c.putImageData(d,a,e);c.clearRect(0,0,1,1)}}}function x(c,a,e,d,f){F(c,a,f);e&&(c.strokeStyle=e);d&&(c.fillStyle=d);c.fill();c.closePath()}function F(c,a,e){if(!(1>a.length)){var d=a[0].x,f=a[0].y;c.lineWidth=e?e:1;c.beginPath();c.moveTo(d,f);for(e=0;e<a.length;e++)d=a[e].x,f=a[e].y,c.lineTo(d,f)}}function B(c){return Math.floor(Math.round(c/100*255))}function A(c,a,e){return"rgb("+Math.round(c)+", "+Math.round(a)+
", "+Math.round(e)+")"}function D(c,a){var e,d;if(".000000"===c.substring(5,8))e=4;else for(e=c.length-1;"0"===c[e];)e-=1;for(d=0;" "===c[d]&&(5<e-d+1||a);)d+=1;e=c.substring(d,e+1);-1===e.indexOf(".")&&(e+=".");return e}function E(c){c._animationFrameHandle=e;var a=c.warpbox;c.active_canvas.getContext("2d");if(a&&c.xpos>=a.xmin&&c.xpos<=a.xmax&&c.ypos>=a.ymin&&c.ypos<=a.ymax){a.xl=c.xpos;a.yl=c.ypos;var G=Math.min(a.xo,a.xl),y=Math.min(a.yo,a.yl),f=Math.abs(a.xl-a.xo),g=Math.abs(a.yl-a.yo);0!==f&&
0!==g&&("vertical"===a.mode?(G=c.l,f=c.r-c.l):"horizontal"===a.mode&&(y=c.t,g=c.b-c.t),d.onWidgetLayer(c,function(){d.erase_window(c);d.draw_box(c,"xor",G,y,f,g,a.style.opacity,a.style.fill_color)}))}}function L(c,a,e){return c<a?a:c>e?e:c}function T(c,a,d,f,g,w,h,r,n,p,k,v,z){p===e&&(p=0);k===e&&(k=0);v===e&&(v=d.width-p);z===e&&(z=d.height-k);c._renderCanvas.width=d.width;c._renderCanvas.height=d.height;for(var l=c._renderCanvas.getContext("2d"),J=l.createImageData(c._renderCanvas.width,c._renderCanvas.height),
q=new Uint8Array(d),s=0;s<d.height;++s)for(var S=0;S<d.width;++S){var P=4*(s*d.width+S);J.data[P]=q[P];J.data[P+1]=q[P+1];J.data[P+2]=q[P+2];J.data[P+3]=255}l.putImageData(J,0,0);a.save();a.globalAlpha=f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1);a.drawImage(c._renderCanvas,p,k,v,z,w,h,r,n);a.restore()}function U(c,a,d,f,g,w,h,r,n,p,k,v,z){p===e&&(p=0);k===e&&(k=0);v===e&&(v=d.width-p);z===e&&(z=d.height-k);if(32768>d.width&&32768>d.height){c._renderCanvas.width=
d.width;c._renderCanvas.height=d.height;var l=c._renderCanvas.getContext("2d"),J=l.createImageData(c._renderCanvas.width,c._renderCanvas.height);d=new Uint8ClampedArray(d);J.data.set(d);l.putImageData(J,0,0)}else 32768>v&&32768>z?(c._renderCanvas.width=v,c._renderCanvas.height=z,Q(c._renderCanvas,d,p,k,v,z)):(c._renderCanvas.width=Math.min(2*r,d.width),c._renderCanvas.height=Math.min(2*n,d.height),Q(c._renderCanvas,d,p,k,v,z),v=c._renderCanvas.width,z=c._renderCanvas.height),k=p=0;a.save();a.globalAlpha=
f;g||(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1);a.drawImage(c._renderCanvas,p,k,v,z,w,h,r,n);a.restore()}function Q(c,a,e,d,f,g){var h=new Uint32Array(a);f||(f=a.width);g||(g=a.height);e||(e=0);d||(d=0);var r=c.width,n=c.height;c=c.getContext("2d");var p=c.createImageData(r,n),k=new ArrayBuffer(p.data.length),v=new Uint8ClampedArray(k),k=new Uint32Array(k);f/=r;g/=n;for(var z=0,l=0,n=z=0;n<k.length;n++)z=Math.round(Math.floor(n%r)*f)+e,l=Math.round(Math.floor(n/
r)*g)+d,z=Math.floor(l*a.width+z),k[n]=h[z];p.data.set(v);c.putImageData(p,0,0)}d.XW_INIT=-3;d.XW_DRAW=1;d.XW_EVENT=2;d.XW_UPDATE=3;d.XW_COMMAND=5;d.SB_EXPAND=1;d.SB_SHRINK=2;d.SB_FULL=3;d.SB_STEPINC=4;d.SB_STEPDEC=5;d.SB_PAGEINC=6;d.SB_PAGEDEC=7;d.SB_DRAG=8;d.SB_WHEELUP=9;d.SB_WHEELDOWN=10;d.L_ArrowLeft=1001;d.L_ArrowRight=1002;d.L_ArrowUp=1003;d.L_ArrowDown=1004;d.L_dashed=801;d.GBorder=3;d.L_RModeOff=900;d.L_RModeOn=901;d.L_PixelSymbol=1;d.L_CircleSymbol=2;d.L_SquareSymbol=3;d.L_PlusSymbol=4;d.L_XSymbol=
5;d.L_TriangleSymbol=6;d.L_ITriangleSymbol=7;d.L_HLineSymbol=8;d.L_VLineSymbol=9;d.STKSTRUCT=function(){this.y2=this.x2=this.y1=this.x1=this.yscl=this.xscl=this.ymax=this.ymin=this.xmax=this.xmin=0};d.SCROLLBAR=function(){this.repeat_count=this.origin=this.mxevent=this.arrow=this.a2=this.a1=this.soff=this.swmin=this.sw=this.s1=this.h=this.w=this.y=this.x=this.repeat_pause=this.initial_pause=this.dragoutline=this.scale=this.page=this.step=this.trange=this.tmin=this.srange=this.smin=this.action=this.flag=
null};d.open=function(c){c=new s(c);c.wid_canvas.oncontextmenu=function(c){c.preventDefault();return!1};this._ctx=c.active_canvas.getContext("2d");c.onmousemove=function(c){return function(a){var f=a.target.getBoundingClientRect();c.xpos=a.offsetX===e?a.pageX-f.left-window.scrollX:a.offsetX;c.ypos=a.offsetX===e?a.pageY-f.top-window.scrollY:a.offsetY;c.warpbox&&(c.warpbox.style=a.ctrlKey&&c.warpbox.alt_style!==e?c.warpbox.alt_style:c.warpbox.def_style,d.redraw_warpbox(c));d.widget_callback(c,a)}}(c);
c.onmouseup=function(c){return function(a){if(c.warpbox){d.onWidgetLayer(c,function(){d.erase_window(c)});var f=c.warpbox;c.warpbox=e;if(1==a.which&&f.func){var g=f.xo,w=f.yo,h=f.xl,r=f.yl;"vertical"==f.mode?(g=c.l,h=c.r):"horizontal"==f.mode&&(w=c.t,r=c.b);f.func(a,g,w,h,r,f.style.return_value)}}d.widget_callback(c,a)}}(c);c.onmousedown=function(c){return function(a){a.preventDefault();d.widget_callback(c,a);return!1}}(c);c.onkeydown=function(c){return function(a){c.warpbox&&17===getKeyCode(a)&&
c.warpbox.style!==c.warpbox.alt_style&&(c.warpbox.style=c.warpbox.alt_style,d.redraw_warpbox(c));d.widget_callback(c,a)}}(c);c.onkeyup=function(c){return function(a){c.warpbox&&17===getKeyCode(a)&&c.warpbox.style!==c.warpbox.def_style&&(c.warpbox.style=c.warpbox.def_style,d.redraw_warpbox(c))}}(c);c.ontouchend=function(c){return function(a){c.onmouseup({which:1})}}(c);c.ontouchmove=function(c){return function(a){var f=c.canvas,g=0,w=0;if(f.offsetParent!==e){do g+=f.offsetLeft,w+=f.offsetTop;while(f=
f.offsetParent)}c.xpos=a.targetTouches[0].pageX-g;c.ypos=a.targetTouches[0].pageY-w;d.redraw_warpbox(c)}}(c);d.enableListeners(c);return c};d.enableListeners=function(c){d.addEventListener(c,"mousemove",c.onmousemove,!1);window.addEventListener("mouseup",c.onmouseup,!1);d.addEventListener(c,"mousedown",c.onmousedown,!1);window.addEventListener("keydown",c.onkeydown,!1);window.addEventListener("keyup",c.onkeyup,!1)};d.disableListeners=function(c){d.removeEventListener(c,"mousemove",c.onmousemove,!1);
window.removeEventListener("mouseup",c.onmouseup,!1);d.removeEventListener(c,"mousedown",c.onmousedown,!1);window.removeEventListener("keydown",c.onkeydown,!1);window.removeEventListener("keyup",c.onkeyup,!1)};d.addEventListener=function(c,a,e,d){return c.wid_canvas.addEventListener(a,e,d)};d.removeEventListener=function(c,a,e,d){return c.wid_canvas.removeEventListener(a,e,d)};d.dispatchEvent=function(c,a){return c.wid_canvas.dispatchEvent(a)};d.onWidgetLayer=function(c,a){var e=c.active_canvas;c.active_canvas=
c.wid_canvas;try{if(a)return a()}finally{c.active_canvas=e}};d.withWidgetLayer=function(c,a){return function(){d.onWidgetLayer(c,a)}};d.render=function(c,a){if(a){var d=c.active_canvas;d._animationFrameHandle||(d._animationFrameHandle=requestAnimFrame(function(){d._animationFrameHandle=e;a()}))}};d.fullscreen=function(c,a){a===e&&(a=!c.fullscreen);a?(c.fullscreen={position:c.root.style.position,height:c.root.style.height,width:c.root.style.width,left:c.root.style.left,top:c.root.style.top,zIndex:c.root.style.zIndex},
c.root.style.position="fixed",c.root.style.height="100%",c.root.style.width="100%",c.root.style.left="0px",c.root.style.top="0px",c.root.style.zIndex=99):(c.root.style.position=c.fullscreen.position,c.root.style.height=c.fullscreen.height,c.root.style.width=c.fullscreen.width,c.root.style.left=c.fullscreen.left,c.root.style.top=c.fullscreen.top,c.root.style.zIndex=c.root.style.zIndex,c.fullscreen=e);d.checkresize(c)};d.checkresize=function(c){var a=c.canvas;return a.height!==c.root.clientHeight||
a.width!==c.root.clientWidth?(c.height=c.root.clientHeight,c.width=c.root.clientWidth,c.canvas.height=c.height,c.canvas.width=c.width,c.wid_canvas.height=c.height,c.wid_canvas.width=c.width,!0):!1};d.invertbgfg=function(c){d.setbgfg(c,c.fg,c.bg,!c.xi)};d.mixcolor=function(c,a,e){c=tinycolor(c).toRgb();a=tinycolor(a).toRgb();var d=1-e;a.r=c.r*d+a.r*e;a.g=c.g*d+a.g*e;a.b=c.b*d+a.b*e;return tinycolor(a).toHexString(!0)};d.linear_gradient=function(c,a,e,d,f,g){var h=c.active_canvas.getContext("2d");c=
1/g.length;a=h.createLinearGradient(a,e,d,f);for(e=0;e<g.length-1;e++)a.addColorStop(c*e,g[e]);a.addColorStop(1,g[g.length-1]);return a};d.setbgfg=function(c,a,e,f){c.bg=a;c.fg=e;c.xi=f;tinycolor.equals(c.bg,"black")&&tinycolor.equals(c.fg,"white")?(c.xwfg=c.fg,c.xwbg="rgb(35%,35%,30%)",c.xwts="rgb(60%,60%,55%)",c.xwbs="rgb(25%,25%,20%)",c.xwms=d.mixcolor(c.xwts,c.xwbs,0.5),c.xwlo="rgb(15%,15%,10%)",c.hi=c.xwts):tinycolor.equals(c.bg,"white")&&tinycolor.equals(c.fg,"black")?(c.xwfg=c.fg,c.xwbg="rgb(60%,60%,55%)",
c.xwts="rgb(80%,80%,75%)",c.xwbs="rgb(40%,40%,35%)",c.xwms=d.mixcolor(c.xwts,c.xwbs,0.5),c.xwlo="rgb(70%,70%,65%)",c.hi=c.xwbs):(a=tinycolor(c.bg).toRgb(),127.5<Math.sqrt(0.299*a.r*a.r+0.587*a.g*a.g+0.114*a.b*a.b)?(c.xwfg="black",c.xwbg="rgb(60%,60%,55%)",c.xwts="rgb(80%,80%,75%)",c.xwbs="rgb(40%,40%,35%)",c.xwms=d.mixcolor(c.xwts,c.xwbs,0.5),c.xwlo="rgb(70%,70%,65%)",c.hi=c.xwts):(c.xwfg="white",c.xwbg="rgb(35%,35%,30%)",c.xwts="rgb(60%,60%,55%)",c.xwbs="rgb(25%,25%,20%)",c.xwms=d.mixcolor(c.xwts,
c.xwbs,0.5),c.xwlo="rgb(15%,15%,10%)",c.hi=c.xwbs))};d.settheme=function(c,a){c.bg=a.bg;c.fg=a.fg;c.xi=a.xi;c.xwfg=a.xwfg;c.xwbg=a.xwbg;c.xwts=a.xwts;c.xwbs=a.xwbs;c.xwlo=a.xwlo;c.hi=a.hi};d.close=function(c){var a=c.wid_canvas;a.removeEventListener("mousemove",c.onmousemove,!1);a.removeEventListener("mouseup",c.onmouseup,!1);c.parent&&c.parent.parentNode&&c.parent.parentNode.removeChild(c.parent)};d.scrollbar=function(c,a,f,g,h,w,l,r,n,p,k){var v,z,H,J=0,q=new d.SCROLLBAR;v=a.flag!==e?a.flag:a;z=
Math.abs(v);H=w-h>g-f?3>c.origin?2:4:c.origin&2?3:1;10>z&&(a=q);if(10>z||0===a.action)d.scroll(c,a,d.XW_INIT,e,k),a.flag=v,a.initial_pause=-1,d.scroll_loc(a,f,h,g-f+1,w-h+1,H,k);a.srange=l.pe-l.ps;switch(z){case 0:f=g=h=1;break;case 1:case 11:f=g=0.9*a.srange;h=2;break;case 2:case 12:f=0.1*a.srange;g=9*f;h=2;break;case 3:case 13:f=1;g=a.srange-1;h=1;break;default:return 0}d.scroll_vals(a,l.ps,a.srange,r,n-r,f,g,h,k);0===v?d.scroll(c,a,d.XW_DRAW,e,e):d.scroll(c,a,d.XW_EVENT,p,k)&&(l.ps!==a.smin&&(l.ps=
a.smin,J+=1),l.pe!==a.smin+a.srange&&(l.pe=a.smin+a.srange,J+=2));return J};d.scroll=function(c,a,f,g,h){var w;if(a===e)return!1;switch(f){case d.XW_INIT:d.scroll_loc(a,0,0,c.width,20,1,h);d.scroll_vals(a,0,10,0,100,1,10,1,h);a.flag=0;a.action=0;a.initial_pause=0.25;a.repeat_pause=0.05;a.mxevent=!0;a.repeat_count=0;break;case d.XW_EVENT:w=0;if(a.mxevent)w=c.button_release?-c.button_release:c.button_press;else if("mousedown"===g.type||"mouseup"===g.type){switch(g.which){case 1:w=1;break;case 2:w=2;
break;case 3:w=3;break;case 4:w=4;break;case 5:w=5}"mouseup"===g.type&&(w=-w)}else if("mousewheel"===g.type||"DOM-MouseScroll"===g.type)g.wheelDelta&&0<g.wheelDelta?w=4:g.wheelDelta&&0>g.wheelDelta&&(w=5);if(0===a.action){if(4===w||5===w)c.xpos=a.x;if(1!==w&&2!==w&&4!==w&&5!==w||c.xpos<a.x||c.ypos<a.y||c.xpos>a.x+a.w||c.ypos>a.y+a.h)return!1}else if(0>w){a.action=a.repeat_count=0;break}a.origin&1?(g=c.xpos-a.x,a.origin&2&&(g=a.w-g)):(g=c.ypos-a.y,2>=a.origin&&(g=a.h-g));if(0===a.action){a.repeat_count=
0;var l=d.scroll_real2pix(a);a.s1=h.s1=l.s1;a.sw=h.sw=l.sw;a.soff=h.soff=g-a.s1;if(0===a.trange)a.smin=h.smin=a.tmin,a.srange=h.srange=0;else switch(w){case 1:a.action=g>a.a1&&g<a.a2?0<a.soff?d.SB_PAGEINC:d.SB_PAGEDEC:0<a.soff?d.SB_STEPINC:d.SB_STEPDEC;break;case 4:a.action=d.SB_WHEELUP;break;case 5:a.action=d.SB_WHEELDOWN;break}}else switch(a.action){case d.SB_WHEELUP:case d.SB_WHEELDOWN:case d.SB_EXPAND:case d.SB_SHRINK:case d.SB_FULL:a.action=a.repeat_count=0}case d.XW_COMMAND:w=a.smin;g=a.srange;
switch(a.action){case d.SB_STEPINC:w+=a.step;break;case d.SB_STEPDEC:w-=a.step;break;case d.SB_PAGEINC:w+=a.page;break;case d.SB_PAGEDEC:w-=a.page;break;case d.SB_FULL:w=a.tmin;g=a.trange;break;case d.SB_EXPAND:g*=a.scale;w=0>=w&&0<=w+a.srange?w*a.scale:w-(g-a.srange)/2;break;case d.SB_SHRINK:g/=a.scale;w=0>w&&0<=w+a.srange?w+g/a.scale:0===w&&0<=w+a.srange?g/a.scale:w+(a.srange-g)/2;break;case d.SB_WHEELUP:w-=a.page;break;case d.SB_WHEELDOWN:w+=a.page}0<a.trange?(w=Math.max(a.tmin,Math.min(w,a.tmin+
a.trange-g)),g=Math.min(g,a.trange)):(w=Math.min(a.tmin,Math.max(w,a.tmin+a.trange-g)),g=Math.max(g,a.trange));a.smin===w&&a.srange===g?a.action!=d.SB_DRAG&&(a.action=a.repeat_count=0):(a.smin=h.smin=w,a.srange=h.srange=g,a.repeat_count++);f===d.XW_COMMAND&&(d.scroll(c,a,d.XW_UPDATE,e),a.action=0);break;case d.XW_DRAW:case d.XW_UPDATE:d.redrawScrollbar(a,c,f)}return!0};d.scroll_loc=function(c,t,f,g,h,w,l){c!==e&&(c.x=l.x=t,c.y=l.y=f,c.w=l.w=g,c.h=l.h=h,c.origin=l.origin=Math.max(1,Math.min(4,w)),
c.origin&1?(c.a2=l.a2=c.w,c.arrow=l.arrow=Math.min(a.trunc((c.w-a.trunc(2*d.GBorder))/3),c.h+d.GBorder)):(c.a2=l.a2=c.h,c.arrow=l.arrow=Math.min(a.trunc((c.h-a.trunc(2*d.GBorder))/3),c.w+d.GBorder)),c.a1=l.a1=c.arrow+d.GBorder,c.a2-=c.arrow+d.GBorder,l.a2-=c.arrow+d.GBorder,c.swmin=l.swmin=Math.min(10,c.a2-c.a1),c.s1=l.s1=0,c.sw=l.sw=0,c.action=l.action=0)};d.scroll_vals=function(c,a,d,f,g,w,h,r,n){c!==e&&(c.smin=n.smin=a,c.srange=n.srange=d,c.tmin=n.tmin=f,c.trange=n.trange=g,c.step=n.step=w,c.page=
n.page=h,c.scale=n.scale=Math.max(r,1))};d.draw_symbol=function(c,a,e,f,g,w){var h=new Int32Array(new ArrayBuffer(4)),r=new Int32Array(new ArrayBuffer(4));h[0]=e;r[0]=f;d.draw_symbols(c,a,h,r,1,g,w)};d.draw_symbols=function(c,e,f,g,h,w,l){for(var r=c.active_canvas.getContext("2d"),n=0,p=0,k=0,v=0,z=0,z=!1,H=[],n=0;4>n;n++)H[n]={x:0,y:0};v="";z=0>l;p=Math.abs(l);k=2*p;r.fillStyle=e;r.strokeStyle=e;switch(w){case d.L_CircleSymbol:for(n=0;n<h;n++)H=f[n],c=g[n],r.beginPath(),z?(r.arc(H,c,p,0,360),r.fill()):
(r.arc(H,c,p,0,360),r.stroke());break;case d.L_SquareSymbol:if(z)for(n=0;n<h;n++)r.fillRect(f[n]-p,g[n]-p,k,k);else for(n=0;n<h;n++)r.strokeRect(f[n]-p,g[n]-p,k,k);break;case d.L_PixelSymbol:k=1;for(n=0;n<h;n+=k)r.beginPath(),r.arc(f[n],g[n],1,0,2*Math.PI,!0),r.fill();break;case d.L_ITriangleSymbol:p=-p;case d.L_TriangleSymbol:k=a.trunc(1.5*p);v=a.trunc(0.8*p);H[1].x=-v;H[1].y=k;H[2].x=2*v;H[2].y=0;H[3].x=-v;H[3].y=-k;c=[];for(n=0;4>n;n++)c[n]={x:0,y:0};if(z)for(n=0;n<h;n++)c[0].x=f[n],c[0].y=g[n]-
p,c[1].x=c[0].x+H[1].x,c[1].y=c[0].y+H[1].y,c[2].x=c[1].x+H[2].x,c[2].y=c[1].y+H[2].y,c[3].x=c[2].x+H[3].x,c[3].y=c[2].y+H[3].y,x(r,c);else for(n=0;n<h;n++)c[0].x=f[n],c[0].y=g[n]-p,c[1].x=c[0].x+H[1].x,c[1].y=c[0].y+H[1].y,c[2].x=c[1].x+H[2].x,c[2].y=c[1].y+H[2].y,c[3].x=c[2].x+H[3].x,c[3].y=c[2].y+H[3].y,z=r,F(z,c,void 0),z.stroke(),z.closePath();break;case d.L_PlusSymbol:for(n=0;n<h;n++)v=f[n],z=g[n],C(r,v,z+p,v,z-p),C(r,v+p,z,v-p,z);break;case d.L_HLineSymbol:for(n=0;n<h;n++)v=f[n],z=g[n],C(r,
v+p,z,v-p,z);break;case d.L_VLineSymbol:for(n=0;n<h;n++)v=f[n],z=g[n],C(r,v,z+p,v,z-p);break;case d.L_XSymbol:for(n=0;n<h;n++)v=f[n],z=g[n],C(r,v-p,z-p,v+p,z+p),C(r,v+p,z-p,v-p,z+p);break;default:if(v=w,p=a.trunc(c.text_w/2),z)for(n=0;n<h;n++)r.fillText(v.substring(0,2),f[n]-p,g[n]+p)}};d.trace=function(c,t,g,h,l,w,s,r,n,p){if(g===e||h===e)throw"mx.trace requires xpoint and ypoint";w===e&&(w=1);s===e&&(s=1);r===e&&(r=0);n===e&&(n=0);p===e&&(p={});if(0>=l)a.log.warn("No points to draw");else if(0===
s&&0===r)a.log.warn("No line or symbol to draw");else{var k=e;p.dashed&&(k={mode:"dashed",on:4,off:4});var v=d.origin(c.origin,4,c.stk[c.level]);if(0!==v.xscl&&0!==v.yscl){var z=v.x1,H=v.y1,J=v.xmin,O=1/v.xscl,x=v.ymin,S=1/v.yscl;p.noclip||d.clip(c,z,H,v.x2-z+1,v.y2-H+1);var P=Math.abs(v.xmax-v.xmin),I=Math.abs(v.ymax-v.ymin),C=Math.min(v.xmin,v.xmax),v=Math.min(v.ymin,v.ymax),A=C+P,B=v+I,D=4*Math.ceil(1.33*g.length),F=new Int32Array(new ArrayBuffer(D)),D=new Int32Array(new ArrayBuffer(D)),u=0;if(0===
s){for(var E=w-1;E<=l;E+=w){var M=g[E],N=h[E],L=M>=C&&M<=A&&N>=v&&N<=B;L&&(F[u]=Math.round((M-J)*O)+z,D[u]=Math.round((N-x)*S)+H,u+=1)}0!=r&&1<u&&d.draw_symbols(c,t,F.subarray(0),D.subarray(0),u,r,n)}else if(!0===p.vertsym){for(E=w-1;E<=l;E+=w)M=g[E],N=h[E],M>=C&&M<=A&&(s=Math.round((M-J)*O)+z,d.draw_line(c,t,s,0,s,c.height),N>=v&&N<=B&&(F[u]=s,D[u]=Math.round((N-x)*S)+H,u+=1));0!=r&&1<u&&d.draw_symbols(c,t,F.subarray(0),D.subarray(0),u,r,n)}else if(!0===p.horzsym){for(E=w-1;E<=l;E+=w)M=g[E],N=h[E],
N>=v&&N<=B&&(s=Math.round((N-x)*S)+H,d.draw_line(c,t,0,s,c.width,s),M>=C&&M<=A&&(F[u]=Math.round((M-J)*O)+z,D[u]=s,u+=1));0!=r&&1<u&&d.draw_symbols(c,t,F.subarray(0),D.subarray(0),u,r,n)}else{var K;if(p&&p.highlight){K=[];K.push({start:z,color:t});for(E=0;E<p.highlight.length;E++)p.highlight[E].xstart>=A||p.highlight[E].xend<=C||(N=Math.max(p.highlight[E].xstart,C),M=Math.min(p.highlight[E].xend,A),N<M&&(N=Math.round((N-J)*O)+z,M=Math.round((M-J)*O)+z,K.push({start:N,end:M,color:p.highlight[E].color})));
K.sort(function(c,a){return c.start-a.start})}else K=t;var Q,T=(c.stk[c.level].xmax+c.stk[c.level].xmin)/2,U=(c.stk[c.level].ymax+c.stk[c.level].ymin)/2,M=g[0],N=h[0];Q=f(0,T,U,c.stk[c.level].xmin,c.stk[c.level].ymin,M,N);(L=M>=C&&M<=A&&N>=v&&N<=B)?(F[u]=Math.round((M-J)*O)+z,D[u]=Math.round((N-x)*S)+H,u+=1,0!=r&&d.draw_symbols(c,t,F,D,1,r,n)):u=0;for(var V=0,X=!1,E=w;E<=w*(l-1);E+=w)if(P=M,I=N,M=g[E],N=h[E],Q=f(Q,T,U,P,I,M,N),X=M>=C&&M<=A&&N>=v&&N<=B,L&&X)F[u]=Math.round((M-J)*O)+z,D[u]=Math.round((N-
x)*S)+H,u+=1;else if(L=X,P-=M,I-=N,0!==P||0!==I){var Y={tL:1,tE:0};q(P,C-M,Y)&&q(-P,M-A,Y)&&q(I,v-N,Y)&&q(-I,N-B,Y)&&(1>Y.tL&&(F[u]=Math.round((M-J+Y.tL*P)*O)+z,D[u]=Math.round((N-x+Y.tL*I)*S)+H,u+=1),0<Y.tE?(F[u]=Math.round((M-J+Y.tE*P)*O)+z,D[u]=Math.round((N-x+Y.tE*I)*S)+H,u+=1,d.draw_lines(c,K,F.subarray(V,u),D.subarray(V,u),u-V,s,k),0!=r&&2<u-V&&d.draw_symbols(c,t,F.subarray(V+1,u),D.subarray(V+1,u),u-V-1,r,n),V=u):(F[u]=Math.round((M-J)*O)+z,D[u]=Math.round((N-x)*S)+H,u+=1))}Q=f(Q,T,U,M,N,c.stk[c.level].xmax,
c.stk[c.level].ymin);Q=f(Q,T,U,c.stk[c.level].xmax,c.stk[c.level].ymin,c.stk[c.level].xmin,c.stk[c.level].ymin);0<u-V&&(d.draw_lines(c,K,F.subarray(V,u),D.subarray(V,u),u-V,s,k),X&&(V+=1),0!=r&&1<u-V&&d.draw_symbols(c,t,F.subarray(V,u),D.subarray(V,u),u-1,r,n));p.fillStyle&&(1<u||0!==Q)&&d.fill_trace(c,p.fillStyle,F,D,u)}p.noclip||d.clip(c,0,0,0,0)}}};d.draw_mode=function(c,a,d){c.linewidth=a===e?1:a;c.style=d};d.draw_line=function(c,d,f,g,h,w,l,r){var n=c.active_canvas.getContext("2d");l===e&&(l=
c.linewidth);r===e&&(r=c.style);"number"===typeof d&&(c.pixel&&0!==c.pixel.length?(d=Math.max(0,Math.min(c.pixel.length,d)),d=A(c.pixel[d].red,c.pixel[d].green,c.pixel[d].blue)):(a.log.warn("COLORMAP not initialized, defaulting to foreground"),colors=c.fg));C(n,f,g,h,w,r,d,l)};d.rubberline=function(c,a,e,d,f){c=c.active_canvas.getContext("2d");C(c,a,e,d,f,{mode:"xor"},"white",1)};d.fill_trace=function(c,a,e,f,g){var h=c.active_canvas.getContext("2d");Array.isArray(a)?h.fillStyle=d.linear_gradient(c,
0,0,0,c.b-c.t,a):h.fillStyle=a;if(1>g)h.fillRect(c.l,c.t,c.r-c.l,c.b-c.t);else if(a){a=e[0];var l=f[0];h.beginPath();l==c.t?h.lineTo(c.l,c.t):h.lineTo(c.l,c.b);h.lineTo(a,l);for(var r=1;r<g;r++)a=e[r],l=f[r],h.lineTo(a,l);l==c.t&&h.lineTo(c.r,c.t);h.lineTo(c.r,c.b);f[0]==c.t&&h.lineTo(c.l,c.b);h.closePath();h.fill()}};d.draw_lines=function(c,d,f,g,h,l,q){var r=c.active_canvas.getContext("2d");if(!(1>h)){var n=f[0],p=g[0];l===e&&(l=c.linewidth);q===e&&(q=c.style);q&&"dashed"===q.mode&&(dashOn(r,q.on,
q.off)||a.log.warn("WARNING: Dashed lines aren't supported on your browser"));r.lineWidth=l;c=0;"string"===typeof d?d=[{start:0,color:d}]:d instanceof Array||(d.start===e&&(d.start=0),d=[d]);for(l=0;l<d.length;l++)null!=d[l].end&&d[l].end<n?d.remove(l):d[l].start<n&&(c=l);r.strokeStyle=d[c].color;r.beginPath();r.moveTo(n,p);for(l=0;l<h;l++)if(n!=f[l]||p!=g[l]){n=f[l];p=g[l];q=!1;if(0<c&&null!=d[c].end&&d[c].end<n)for(q=!0;null!=d[c].end&&d[c].end<n&&(d.remove(c),c-=1,0!==c););if(c+1<d.length&&d[c+
1].start<=n)for(q=!0;c+1<d.length&&d[c+1].start<=n;)c++;r.lineTo(n,p);q&&(r.stroke(),r.strokeStyle=d[c].color,r.beginPath(),r.lineTo(n,p))}r.stroke();dashOff(r);r.beginPath()}};d.clip=function(c,a,e,d,f){c=c.active_canvas.getContext("2d");0===a&&0===e&&0===d&&0===f?c.restore():(c.save(),c.beginPath(),c.rect(a,e,d,f),c.clip())};d.clear_window=function(c){var a=c.active_canvas.getContext("2d");a.fillStyle=c.bg;a.fillRect(0,0,c.width,c.height)};d.erase_window=function(c){c.active_canvas.getContext("2d").clearRect(0,
0,c.width,c.height)};d.rubberbox=function(c,a,e,f,g){d.warpbox(c,c.xpos,c.ypos,c.xpos,c.ypos,0,c.width,0,c.width,a,e,f,g)};d.warpbox=function(c,a,e,d,f,g,h,r,n,p,k,v,z){v||(v={});c.warpbox=new u;c.warpbox.xo=a;c.warpbox.yo=e;c.warpbox.xl=d;c.warpbox.yl=f;c.warpbox.xmin=g;c.warpbox.xmax=h;c.warpbox.ymin=r;c.warpbox.ymax=n;c.warpbox.func=p;c.warpbox.mode=k;c.warpbox.style=v;c.warpbox.def_style=v;c.warpbox.alt_style=z};d.origin=function(c,a,e){c=Math.max(1,c);a=Math.max(1,a);var f=new d.STKSTRUCT;f.xmin=
e.xmin;f.xmax=e.xmax;f.ymin=e.ymin;f.ymax=e.ymax;f.xscl=e.xscl;f.yscl=e.yscl;f.x1=e.x1;f.y1=e.y1;f.x2=e.x2;f.y2=e.y2;if(c!==a){var g=Math.abs(a-c);c=a+c;if(2===g||5!==c)f.xmin=e.xmax,f.xmax=e.xmin,f.xscl=-e.xscl;if(2===g||5===c)f.ymin=e.ymax,f.ymax=e.ymin,f.yscl=-e.yscl}return f};d.mult=function(c,a){var e=Math.max(Math.abs(c),Math.abs(a));if(0===e)return 1;var d=0.1447648*Math.log(e),d=d|d;1>e&&(d-=1);return 0>d?1/Math.pow(10,-3*d):Math.pow(10,3*d)};d.widget_callback=function(c,a){if(c.prompt&&3===
a.which)c.prompt.input.onsubmit();c.widget&&c.widget.callback(a)};d.prompt=function(c,a,f,g,h,l,q,r,n){if(l!==e&&(h=f(l),!h.valid))throw"Prompt default input value not valid due to '"+h.reason+"'";d.onWidgetLayer(c,function(){var p=c.active_canvas.getContext("2d"),k=p.font.indexOf("px"),v=k+3,k=p.font.substr(0,k),p=p.font.substr(v,p.font.length).toString(),p=new CanvasInput({height:c.text_h,fontFamily:p,fontSize:new Number(k),backgroundColor:c.bg,fontColor:c.fg,borderWidth:0,borderRadius:0,padding:0,
boxShadow:"none",innerShadow:"none",width:30*c.text_w,value:l!==e?l.toString():"",disableBlur:!0,renderOnReturn:!1,tabToClear:!0}),z=function(a,r){return function(){var k=this.value(),p=f(k);p.valid?(c.prompt=e,this.cleanup(),d.onWidgetLayer(c,function(){d.erase_window(c)}),g(k)):(d.message(c,"Value: '"+k+"' isn't valid due to '"+p.reason+"' - RETRY",e,a,r),setTimeout(function(){d.onWidgetLayer(c,function(){d.erase_window(c)});c.widget=null},null!=n?n:4E3))}},v=function(c,a,e){return function(n,r){d.onWidgetLayer(c,
function(){var k=(e.length+2)*c.text_w,p=k+31*c.text_w+6,v=2*c.text_h+6;n||(n=c.xpos);r||(r=c.ypos);var f=Math.max(0,Math.min(n,c.width-p)),g=Math.max(0,Math.min(r,c.height-v)),t=f+3,h=g+3,l=h+1.5*c.text_h,w=t+c.text_w;d.widgetbox(c,f,g,p,v,t,h,0,"");d.text(c,w,l,e);p=l-1.15*c.text_h;a.x(t+c.text_w+k-c.text_w);a.y(p);a.onsubmit(z(f,p-75));a.canvas()?a.render():a.canvas(c.active_canvas)})}}(c,p,a);v(q,r);p.focus();c.prompt={redraw:v,input:p}})};d.floatValidator=function(c,a){return(a!==e&&!1!==a||
""!==c)&&isNaN(parseFloat(c))||!isFinite(c)?{valid:!1,reason:"Failed float validation: not a valid floating point number"}:{valid:!0,reason:""}};d.intValidator=function(c,a){return(a===e||!1===a)&&""===c||parseFloat(c)==parseInt(c)&&!isNaN(c)?{valid:!0,reason:""}:{valid:!1,reason:"Failed integer validation: not a valid integer"}};d.message=function(c,a,e,f,g){d.onWidgetLayer(c,function(){var e=a.split(/\r\n|\r|\n/g),h=0;if(1==e.length){e=[];h=Math.min((c.width-6)/c.text_w-2,a.length);if(0>=h)return;
for(;40<h&&2.5*c.text_h*a.length<c.height*h;)h-=5;for(var r=0,n=0,p=0,k=0,v=0,z=0,e=[],l=!0;n<a.length;){for(var v=n+h-1,z=v=Math.min(v,a.length-1),q=!1,r=n;r<=v&&!q;r++)switch(a[r]){case ",":case ";":case " ":case ":":z=r;break;case "-":case "/":z!=r-1&&(z=r);break;case "@":case "\n":case "\r":l=!1,q=!0,z=r}r===a.length&&(z=v);q?e.push(a.substring(n,z)):(r=a.substring(n,z+1).replace(/^\s+/,""),e.push(r));n=z+1;k=Math.max(k,e[p].length)}}else for(p=0;p<e.length;p++)h=Math.min((c.width-6)/c.text_w-
2,Math.max(h,e[p].length));k=e.length;6<k&&(l=!1);r=0;p=Math.max(1,c.height/c.text_h);z=Math.min(k,r+p-1);h=(h+2)*c.text_w+6;k=(z-r+1)*c.text_h+6;f||(f=c.xpos);g||(g=c.ypos);n=Math.max(0,Math.min(f,c.width-h));v=Math.max(0,Math.min(g,c.height-k));p=n+3;q=v+3;d.widgetbox(c,n,v,h,k,p,q,0,"");k=q+c.text_h/3;for(p+=c.text_w;r<z;)k+=c.text_h,l&&(p=n+h/2-e[r].length*c.text_w/2),d.text(c,p,k,e[r]),r++;c.widget={type:"ONESHOT",callback:function(a){if("mousedown"===a.type||"keydown"===a.type)c.widget=null,
d.onWidgetLayer(c,function(){d.erase_window(c)})}}})};d.draw_box=function(c,a,d,f,g,h,l,r){var n=c.active_canvas.getContext("2d");if("xor"!==a)n.lineWidth=1,n.strokeStyle=a,n.strokeRect(d,f,g,h);else if("undefined"===typeof Uint8ClampedArray)n.lineWidth=1,n.strokeStyle=c.fg,n.strokeRect(d,f,g,h);else{d=Math.floor(d);f=Math.floor(f);g=Math.floor(g);h=Math.floor(h);c=c.canvas.getContext("2d");for(var p=c.getImageData(d,f,g,1),k=p.data,v=0;v<p.data.length;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],
k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(p,d,f);p=c.getImageData(d,f+h,g,1);k=p.data;for(v=0;v<p.data.length;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(p,d,f+h);p=c.getImageData(d,f,1,h);k=p.data;for(v=0;v<h;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(p,d,f);p=c.getImageData(d+g,f,1,h);k=p.data;for(v=0;v<h;v++)k[4*v]=255-k[4*v],k[4*v+1]=255-k[4*v+1],k[4*v+2]=255-k[4*v+2],k[4*v+3]=255;n.putImageData(p,
d+g,f)}l!==e&&0<l&&(c=n.globalAlpha,n.globalAlpha=l,n.fillStyle=r?r:a,n.fillRect(d+1,f+1,g-1,h-1),n.globalAlpha=c)};d.set_font=function(c,a){var e=c.canvas.getContext("2d"),d=c.wid_canvas.getContext("2d");if(c.font&&c.font.width==a)e.font=c.text_h+"px "+c.font.font,d.font=c.text_h+"px "+c.font.font;else{var f=1;do{f+=1;e.font=f+"px Courier New, monospace";d.font=f+"px Courier New, monospace";var g=e.measureText("M");c.text_w=g.width;c.text_h=f}while(c.text_w<a);c.font={font:"Courier New, monospace",
width:a}}};d.textline=function(c,a,e,d,f,g){var h=c.active_canvas.getContext("2d");g||(g={});g.color||(g.color=c.fg);g.width||(g.width=1);C(h,a,e,d,f,g,g.color,g.width)};d.tics=function(c,a,e){var d=1,f=c;if(a===c)return{dtic:1,dtic1:c};d=Math.abs(a-c)/e;e=Math.max(d,1E-36);e=Math.log(e)/Math.log(10);0>e?(e=Math.ceil(e),e-=1):e=Math.floor(e);d*=Math.pow(10,-e);e=Math.pow(10,e);d=1.75>d?e:2.25>d?2*e:3.5>d?2.5*e:7>d?5*e:10*e;0===d&&(d=1);a>=c?(e=Math.floor(0<=c?c/d+0.995:c/d-0.005),f=e*d):(e=Math.floor(0<=
c?c/d+0.005:c/d-0.995),f=e*d,d*=-1);f+d===f&&(d=a-c);return{dtic:d,dtic1:f}};d.drawaxis=function(c,f,g,h,l,q){var s=d.origin(c.origin,1,c.stk[c.level]),r=0,n=0,p=0,k=0,v=0,z=0;h=h===e?30:h;l=l===e?30:l;q.exactbox?(r=Math.floor(s.x1),n=Math.floor(s.y1),p=Math.floor(s.x2),k=Math.floor(s.y2),v=p-r,z=k-n):(r=Math.max(Math.floor(s.x1)-2,0),n=Math.max(Math.floor(s.y1)-2,0),p=Math.min(Math.floor(s.x2)+2,c.width),k=Math.min(Math.floor(s.y2)+2,c.height),v=p-r-4,z=k-n-4);var H=c.active_canvas.getContext("2d");
q.fillStyle?Array.isArray(q.fillStyle)?H.fillStyle=d.linear_gradient(c,0,0,0,k-n,q.fillStyle):H.fillStyle=q.fillStyle:H.fillStyle=c.bg;H.fillRect(r,n,p-r,k-n);q.noaxisbox||(d.textline(c,r,n,p,n),d.textline(c,p,n,p,k),d.textline(c,p,k,r,k),d.textline(c,r,k,r,n));var J=1==h?!0:!1,O={dtic:0,dtic1:0},H={dtic:0,dtic1:0};0>f?(O.dtic1=s.xmin,O.dtic=(s.xmin-s.xmax)/f):O=d.tics(s.xmin,s.xmax,f);var x=1;J||(x=d.mult(s.xmin,s.xmax));0>g?(H.dtic1=s.ymin,H.dtic=(s.ymin-s.ymax)/g):H=d.tics(s.ymin,s.ymax,g);f=1;
f=d.mult(s.ymin,s.ymax);J=!q.noxtlab;g=!q.noytlab;var S=Math.max(0,r-4*c.text_w),P=0,P=q.ontop?Math.min(c.height,Math.floor(k+1.5*c.text_h)):Math.max(c.text_h,Math.floor(n-0.5*c.text_h)),I,u;0<P&&(q.noyplab||(u=a.label(l,f)),q.noxplab||(I=a.label(h,x)));I&&u?d.text(c,S,P,u+" vs "+I):I?d.text(c,S,P,I):u&&d.text(c,S,P,u);h=5.5*c.text_w;l=0;l=q.ontop?q.inside?n+1*c.text_h:n-0.2*c.text_h:q.inside?k-0.5*c.text_h:k+1*c.text_h+2;var v=s.xmin!==s.xmax?v/(s.xmax-s.xmin):v/1,x=0!==x?1/x:1,C;J&&(C=1E-6<Math.abs(O.dtic)/
Math.max(Math.abs(O.dtic1),Math.abs(O.dtic)));0===O.dtic&&(O.dtic=s.xmax-O.dtic1+1);u="";for(S=O.dtic1;S<=s.xmax;S+=O.dtic)I=r+Math.round(v*(S-s.xmin))+2,I<r||(q.grid&&"y"!==q.grid?(q.gridStyle||(q.gridStyle={mode:"dashed",on:1,off:3}),d.textline(c,I,k,I,n,q.gridStyle)):(d.textline(c,I,k-2,I,k+2),d.textline(c,I,n-2,I,n+2)),J&&(C?(u="",u=d.format_f(S*x,12,6),u=D(u,!0),P=Math.round(u.length/2)*c.text_w,q.inside&&(I=Math.max(r+P,I),I=Math.min(p-P,I)),d.text(c,I-P,l,u)):S===O.dtic1&&(u=(O.dtic1*x).toString(),
q.inside&&(I=Math.floor(Math.max(r+h,I))),d.text(c,I-h,l,u))));h=q.yonright?q.inside?Math.min(p-6*c.text_w,c.width-5*c.text_w):Math.min(p+c.text_w,c.width-5*c.text_w):q.inside?Math.max(0,r+c.text_w):Math.max(0,Math.floor(r-5.5*c.text_w));l=0.4*c.text_h;v=s.ymin!==s.ymax?-z/(s.ymax-s.ymin):-z/1;x=0!==f?1/f:1;z=s.ymax>=s.ymin?function(c){return c<=s.ymax}:function(c){return c>=s.ymax};for(C=H.dtic1;z(C);C+=H.dtic)I=k+Math.round(v*(C-s.ymin))-2,I>k||(q.grid&&"x"!==q.grid?(q.gridStyle||(q.gridStyle={mode:"dashed",
on:1,off:3}),d.textline(c,r,I,p,I,q.gridStyle)):(d.textline(c,r-2,I,r+2,I),d.textline(c,p-2,I,p+2,I)),!g||q.inside&&(I<n+c.text_h||I>k-2*c.text_h)||(O=d.format_f(C*x,12,6),O=D(O,q.inside),d.text(c,h,Math.min(k,I+l),O)))};d.inrect=function(c,a,e,d,f,g){return c>=e&&c<=e+f&&a>=d&&a<=d+g};var K={GBorder:3,sidelab:0,toplab:1};d.menu=function(c,a){var f=1.5*c.text_h;if(a){if(!c.widget){a.x=c.xpos;a.y=c.ypos;a.val=0;a.h=2*K.GBorder+f*a.items.length+K.toplab*(f+K.GBorder)-1;a.y=a.y-((K.toplab+Math.max(1,
a.val)-0.5)*f+(1+K.toplab)*K.GBorder)+1;for(var q=a.title.length,s=0,w=0;w<a.items.length;w++){var x=a.items[w],q=Math.max(q,x.text.length);"checkbox"===x.style&&(q+=2);"separator"===x.style&&(q+=2);x.checked&&"checkbox"!=x.style&&(s=f*w)}a.y-=s;q=(q+2)*c.text_w;a.w=2*K.GBorder+Math.abs(K.sidelab)+q-1;a.x-=a.w/2;c.menu=a;c.widget={type:"MENU",callback:function(r){var n=a;if(r===e)g(c,n);else if("mousemove"===r.type){n.drag_x!=e&&n.drag_y!=e&&2<Math.abs(c.xpos-n.drag_x)&&2<Math.abs(c.ypos-n.drag_y)&&
(n.x+=c.xpos-n.drag_x,n.y+=c.ypos-n.drag_y,n.drag_x=c.xpos,n.drag_y=c.ypos);var p=n.x+K.GBorder+Math.max(0,K.sidelab),k=n.w-2*K.GBorder-Math.abs(K.sidelab),f=1.5*c.text_h,z=n.y+K.GBorder+K.toplab*(f+K.GBorder);for(r=0;r<n.items.length;r++){var q=z+f*r,s=n.items[r];s.selected=!1;d.inrect(c.xpos,c.ypos,p,q,k,f)&&(s.selected=!0)}g(c,n)}else if("mouseup"===r.type)n.drag_x=e,n.drag_y=e;else if("mousedown"===r.type)r.preventDefault(),1===r.which?c.xpos>n.x&&c.xpos<n.x+n.w&&c.ypos>n.y&&c.ypos<n.y+1.5*c.text_h?
(n.drag_x=c.xpos,n.drag_y=c.ypos):h(c,n):l(c,n);else if("keydown"===r.type&&c.menu)if(n=c.menu,r.preventDefault(),r=getKeyCode(r),13===r)h(c,n);else if(38===r){for(r=0;r<n.items.length;r++)if(s=n.items[r],s.selected){s.selected=!1;n.items[r-1]!==e&&(n.items[r-1].selected=!0);break}else r===n.items.length-1&&(s.selected=!0);g(c,n)}else if(40===r){for(r=0;r<n.items.length;r++)if(s=n.items[r],s.selected){s.selected=!1;n.items[r+1]!==e&&(n.items[r+1].selected=!0);break}else r===n.items.length-1&&(n.items[0].selected=
!0);g(c,n)}else if(48<=r&&57>=r||65<=r&&90>=r){r=String.fromCharCode(r).toUpperCase();n.keypresses=n.keypresses===e?r:n.keypresses+r;for(r=p=0;r<n.items.length;r++)s=n.items[r],s.selected=!1,s.text&&0===s.text.toUpperCase().indexOf(n.keypresses)&&(0==p&&(s.selected=!0),p++);0==p?(n.keypresses=e,g(c,n)):1==p?h(c,n):g(c,n)}}}}g(c,a)}};d.widgetbox=function(c,a,e,f,g,h,l,r,n,p){d.shadowbox(c,a,e,f,g,1,2,"",0);p&&(g=p.length,g=Math.min(g,f/c.text_w),g=Math.max(g,1),a+=(f-g*c.text_w)/2,e+=3,d.text(c,a,
e+(l-e+0.7*c.text_h)/2,p,c.xwfg));0<r&&0<n&&(e=c.active_canvas.getContext("2d"),e.fillStyle=c.bg,e.fillRect(h,l,r,n))};d.text=function(c,a,d,f,g){var h=c.active_canvas.getContext("2d");a=Math.max(0,a);d=Math.max(0,d);if(0>a||0>d)throw"On No!";h.textBaseline="bottom";h.textAlign="left";h.fillStyle=g===e?c.fg:g;h.fillText(f,a,d)};d.getcolor=function(c,a,e){for(c=0;6>c&&0===a[c+1].pos;c++);for(;e>a[c].pos&&6>c;)c++;if(0===c||e>=a[c].pos)return A(B(a[c].red),B(a[c].green),B(a[c].blue));e=B((e-a[c-1].pos)/
(a[c].pos-a[c-1].pos)*100);var d=255-e;return A(a[c].red/100*e+a[c-1].red/100*d,a[c].green/100*e+a[c-1].green/100*d,a[c].blue/100*e+a[c-1].blue/100*d)};d.redraw_warpbox=function(c){c.warpbox&&(c._animationFrameHandle&&cancelAnimFrame(c._animationFrameHandle),c._animationFrameHandle=requestAnimFrame(function(){E(c)}))};d.format_g=function(c,a,e,f){a=Math.abs(c).toString();var g=a.indexOf(".");-1===g&&(a+=".",g=a.length);f=0;var h=a.indexOf("e");-1!==h&&(f=parseInt(a.slice(h+1,a.length)),a=a.slice(0,
h));for(var h=Math.min(e-(a.length-g)+1,e),l=0;l<h;l++)a+="0";if(0!==c)if(1>Math.abs(c))if("0."==a.slice(0,2))for(l=2;l<a.length;l++)if("0"===a[l])f-=1;else{a="0."+a.slice(l,l+e);break}else a=a.slice(0,e+2);else g>e?(f=Math.max(0,a.length-e-2),a=a[0]+"."+a.slice(1,9)):a=a.slice(0,e+2);0===f?a+="    ":(e=d.pad(Math.abs(f).toString(),2,"0"),a=0>f?a+"E-"+e:a+"E+"+e);return 0>c?"-"+a:" "+a};d.format_f=function(a,e,f){a=a.toFixed(f).toString();return a=d.pad(a,e+f," ")};d.pad=function(a,e,d){for(;a.length<
e;)a=d+a;return a};d.shadowbox=function(c,e,f,g,h,l,q,r){for(var n=r.length,p=0,k=0,p=0,k=[],v=0;11>v;v++)k[v]={x:0,y:0};v=!(1===q||-1===q);0!==q&&0<d.GBorder&&(p=a.trunc(Math.min(g,h)/3),p=Math.max(1,Math.min(p,d.GBorder)));if(0<p){k[0].x=k[1].x=e;k[8].x=k[9].x=e+g;k[1].y=k[8].y=f;k[0].y=k[9].y=f+h;switch(l){case d.L_ArrowLeft:k[0].y=k[1].y=f+a.trunc(h/2);e+=2;--g;break;case d.L_ArrowRight:k[8].y=k[9].y=f+a.trunc(h/2);--e;--g;break;case d.L_ArrowUp:k[1].x=k[8].x=e+a.trunc(g/2);f+=2;--h;break;case d.L_ArrowDown:k[0].x=
k[9].x=e+a.trunc(g/2),--f,--h}k[2]=k[8];k[10]=k[0];e+=p;f+=p;g-=2*p;h-=2*p}k[4].x=k[5].x=e;k[3].x=k[6].x=e+g;k[3].y=k[4].y=f;k[5].y=k[6].y=f+h;switch(l){case d.L_ArrowLeft:k[4].y=k[5].y=f+a.trunc(h/2);break;case d.L_ArrowRight:k[3].y=k[6].y=f+a.trunc(h/2);break;case d.L_ArrowUp:k[3].x=k[4].x=e+a.trunc(g/2);break;case d.L_ArrowDown:k[5].x=k[6].x=e+a.trunc(g/2)}k[7]=k[3];l=c.active_canvas.getContext("2d");0<p&&(l.fillStyle=0<q?c.xwts:c.xwbs,x(l,k.slice(0,7)),l.fillStyle=0>q?c.xwts:c.xwbs,x(l,k.slice(5,
11)));v&&(l.fillStyle=c.xwbg,x(l,k.slice(3,8)));l.fillStyle=c.xwfg;l.textBaseline="alphabetic";v&&0<n&&(n=Math.min(n,a.trunc(g/c.text_w)),n=Math.max(n,1),p=e+a.trunc((g-n*c.text_w)/2),k=f+a.trunc((h+0.7*c.text_h)/2),l.fillText(r,p,k))};d.ifevent=function(a,d){a.button_press=0;a.button_release=0;a.state_mask=0;var f=d.target.getBoundingClientRect(),g=d.offsetX===e?d.pageX-f.left-window.scrollX:d.offsetX,f=d.offsetX===e?d.pageY-f.top-window.scrollY:d.offsetY;switch(d.type){case "mousedown":a.xpos=L(g,
0,a.width);a.ypos=L(f,0,a.height);switch(d.which){case 1:a.button_press=1;break;case 2:a.button_press=2;break;case 3:a.button_press=3;break;case 4:a.button_press=4;break;case 5:a.button_press=5}break;case "mouseup":switch(a.xpos=L(g,0,a.width),a.ypos=L(f,0,a.height),d.which){case 1:a.button_release=1;break;case 2:a.button_release=2;break;case 3:a.button_release=3;break;case 4:a.button_release=4;break;case 5:a.button_release=5}}};d.scroll_real2pix=function(a){if(0===a.range)return{s1:a.a1,sw:a.a2-
a.a1};var e,d;e=(a.a2-a.a1)/a.trange;d=a.a1+Math.floor(0.5+(a.smin-a.tmin)*e);e=d+Math.floor(0.5+a.srange*e);d=d>a.a2-a.swmin?a.a2-a.swmin:Math.max(d,a.a1);e=e<a.a1+a.swmin?a.a1+a.swmin:Math.min(e,a.a2);return{s1:d,sw:Math.max(e-d,a.swmin)}};d.redrawScrollbar=function(c,e,f){var g,h,l,q,r,n,p,k,v=e.active_canvas.getContext("2d");h=d.scroll_real2pix(c);p=h.s1;k=h.sw;n=p;h=c.x;l=c.y;q=c.w;r=c.h;c.origin&1?(g=l+r/2,c.origin&2&&(n=q-n-k),f===d.XW_DRAW&&(f=c.arrow,d.shadowbox(e,h,l,f,r-1,d.L_ArrowLeft,
2,"",0),d.shadowbox(e,h+q-f,l,f-1,r,d.L_ArrowRight,2,"",0)),e.legacyRender?d.draw_line(e,e.fg,h+c.a1,g,h+c.a2,g):(v=v.createLinearGradient(h+c.a1,0,h+c.a2,0),v.addColorStop(0,e.xwbs),v.addColorStop(0.5,e.xwts),v.addColorStop(1,e.xwbs),d.draw_line(e,v,h+c.a1,g,h+c.a2,g,1)),d.shadowbox(e,h+n,l,k+1,r,1,2,"",0)):(g=h+a.trunc(q/2),2>=c.origin&&(n=r-n-k),f===d.XW_DRAW&&(f=c.arrow,d.shadowbox(e,h,l,q-1,f,d.L_ArrowUp,2,"",0),d.shadowbox(e,h,l+r-f,q-1,f,d.L_ArrowDown,2,"",0)),e.legacyRender?d.draw_line(e,
e.fg,g,l+c.a1,g,l+c.a2):(v=v.createLinearGradient(0,l+c.a1,0,l+c.a2),v.addColorStop(0,e.xwbs),v.addColorStop(0.5,e.xwts),v.addColorStop(1,e.xwbs),d.draw_line(e,v,g,l+c.a1,g,l+c.a2)),d.shadowbox(e,h,l+n,q,k+1,1,2,"",0));c.s1=p;c.sw=k};d.real_to_pixel=function(a,e,f,g){a=d.origin(a.origin,4,a.stk[a.level]);if(0===a.xscl||0===a.yscl)return{x:0,y:0};var h=a.x1,l=a.y1,q=a.xmin,r=1/a.xscl,n=a.ymin,p=1/a.yscl,k=e>a.xmax||e<a.xmin||f>a.ymin||f<a.ymax;g&&(e=Math.min(e,a.xmax),f=Math.max(e,a.xmin),f=Math.min(f,
a.ymin),f=Math.max(f,a.ymax));e=Math.round((e-q)*r)+h;f=Math.round((f-n)*p)+l;return{x:e,y:f,clipped:k}};d.pixel_to_real=function(a,e,d){e=Math.min(a.r,Math.max(a.l,e));d=Math.min(a.b,Math.max(a.t,d));var f=a.level;return{x:2!=a.origin&&3!=a.origin?a.stk[f].xmin+(e-a.stk[f].x1)*a.stk[f].xscl:a.stk[f].xmin+(a.stk[f].x2-e)*a.stk[f].xscl,y:2<a.origin?a.stk[f].ymin+(d-a.stk[f].y1)*a.stk[f].yscl:a.stk[f].ymin+(a.stk[f].y2-d)*a.stk[f].yscl}};d.colormap=function(a,e,d){a.pixel=Array(d);for(var f=Array(d),
g=100/(Math.max(2,d)-1),h=0;h<d;h++)f[h]=g*h+0.5;for(g=0;6>g&&0==e[g+1].pos;g++);for(h=0;h<d;h++){a.pixel[h]=0;for(var l=f[h];6>g&&Math.floor(l)>e[g].pos;)g++;if(0===g||l>=e[g].pos)a.pixel[h]={red:B(e[g].red),green:B(e[g].green),blue:B(e[g].blue)};else{var l=B((l-e[g-1].pos)/(e[g].pos-e[g-1].pos)*100),r=255-l;a.pixel[h]={red:e[g].red/100*l+e[g-1].red/100*r,green:e[g].green/100*l+e[g-1].green/100*r,blue:e[g].blue/100*l+e[g-1].blue/100*r}}}};d.colorbar=function(a,e,f,g,h){for(var l=1;l<h;l++)d.draw_line(a,
Math.floor(a.pixel.length*(l-1)/h),e,f+h-l,e+g,f+h-l);d.draw_box(a,a.fg,e+0.5,f,g,h)};var X="undefined"===typeof Uint8ClampedArray?T:U;d.shift_image_rows=function(a,e,d){a=new Uint32Array(e);0<d?(d*=e.width,a.set(a.subarray(0,a.length-d),d)):0>d&&(d=Math.abs(d)*e.width,a.set(a.subarray(d)));return e};d.update_image_row=function(a,e,d,f,g,h){f=new Uint32Array(e,f*e.width*4,e.width);var l=1;h!=g&&(l=a.pixel.length/Math.abs(h-g));for(h=0;h<d.length;h++){var r=Math.floor((d[h]-g)*l),r=Math.max(0,Math.min(a.pixel.length-
1,r));(r=a.pixel[r])&&(f[h]=-16777216|r.blue<<16|r.green<<8|r.red)}return e};d.create_image=function(c,e,f,g,h,l){c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),d.colormap(c,a.Mc.colormap[1],16));var q=1;l!=h&&(q=c.pixel.length/Math.abs(l-h));l=new ArrayBuffer(f*g*4);l.width=f;l.height=g;for(var r=new Uint32Array(l),n=0;n<r.length;n++){var p=Math.floor((e[(3===c.origin||4===c.origin?Math.floor(n/f):g-Math.floor(n/f)-
1)*f+(1===c.origin||4===c.origin?Math.floor(n%f):f-Math.floor(n%f)-1)]-h)*q),p=Math.max(0,Math.min(c.pixel.length-1,p));(p=c.pixel[p])&&(r[n]=-16777216|p.blue<<16|p.green<<8|p.red)}return l};d.put_image=function(c,e,f,g,h,l,q,r,n,p,k){n=c.active_canvas.getContext("2d");c.pixel&&0!==c.pixel.length||(a.log.warn("COLORMAP not initialized, defaulting to foreground"),d.colormap(c,a.Mc.colormap[1],16));f=Math.floor(0<h?f*h:-h);g=Math.floor(g*l);l=new ArrayBuffer(f*g*4);l.width=f;l.height=g;h=new Uint32Array(l);
for(var v=0;v<img.length;v++){var z=Math.max(0,e[v]),z=Math.min(c.pixel.length-1,z);(z=c.pixel[z])&&(h[v]=-16777216|z.blue<<16|z.green<<8|z.red)}X(c,n,l,p,k,q,r,f,g);return l};d.draw_image=function(a,e,f,g,h,l,q,r){var n=Math.max(f,a.stk[a.level].xmin),p=Math.min(h,a.stk[a.level].xmax),k=Math.max(g,a.stk[a.level].ymin),v=Math.min(l,a.stk[a.level].ymax),z=(e.width-1)/(h-f);f=Math.max(0,Math.floor((n-f)*z));h=Math.min(e.width,e.width-Math.floor((h-p)*z)-f);z=(e.height-1)/(l-g);g=Math.max(0,Math.floor((k-
g)*z));l=Math.min(e.height,e.height-Math.floor((l-v)*z)-g);var s,J;1===a.origin?(s=d.real_to_pixel(a,n,v),J=d.real_to_pixel(a,p,k)):2===a.origin?(s=d.real_to_pixel(a,p,v),J=d.real_to_pixel(a,n,k)):3===a.origin?(s=d.real_to_pixel(a,p,k),J=d.real_to_pixel(a,n,v)):4===a.origin&&(s=d.real_to_pixel(a,n,k),J=d.real_to_pixel(a,p,v));n=J.x-s.x;J=J.y-s.y;p=a.active_canvas.getContext("2d");X(a,p,e,q,r,s.x,s.y,n,J,f,g,h,l)}})(window.mx,window.m);
(function(d,a,e,u){d.Layer1D=function(a){this.plot=a;this.ybuf=this.xbuf=u;this.xmax=this.xmin=this.imin=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=u;this.size=0;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=this.opacity=1;this.options={}};d.Layer1D.prototype={init:function(a,g){this.hcb=a;this.hcb.buf_type="D";this.ybufn=this.xbufn=this.size=this.offset=
0;this.hcb.pipe?this.size=g.framesize:2==a["class"]?(e.force1000(a),this.size=a.subsize):this.size=a.size;2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);this.xstart=a.xstart;this.xdelta=a.xdelta;var h=a.xstart+a.xdelta*(this.size-1);this.xmin=Math.min(a.xstart,h);this.xmax=Math.max(a.xstart,h);this.xlab=a.xunits;this.ylab=a.yunits;if(this.hcb.pipe){this.drawmode="scrolling";this.position=0;this.tl=g.tl;this.ybufn=this.size*Math.max(this.skip*
d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT);this.ybuf=new ArrayBuffer(this.ybufn);var l=this;e.addPipeWriteListener(this.hcb,function(){l._onpipewrite()})}},_onpipewrite:function(){var a=new d.PointArray(this.ybuf),g=this.tl;g===u&&(g=e.pavail(this.hcb));if("lefttoright"===this.drawmode)this.position=0,a.set(a.subarray(0,this.size-g),g);else if("righttoleft"===this.drawmode)this.position=this.size-g,a.set(a.subarray(g),0);else if("scrolling"!==this.drawmode)throw"Invalid draw mode";
g=Math.min(g,this.size-this.position);a=e.grabx(this.hcb,a,g,this.position);this.position=(this.position+a)%this.size},get_data:function(a,g){var h=this.plot._Gx,l=this.hcb,q=this.skip,s;s=2===l["class"]?l.subsize:l.size;var x=0,q=0;h.index?(x=Math.floor(a),q=Math.floor(g+0.5)):0<=l.xdelta?(x=Math.floor((a-l.xstart)/l.xdelta)-1,q=Math.floor((g-l.xstart)/l.xdelta+0.5)):(x=Math.floor((g-l.xstart)/l.xdelta)-1,q=Math.floor((a-l.xstart)/l.xdelta+0.5));x=Math.max(0,x);q=Math.min(s,q);h=Math.max(0,Math.min(q-
x+1,h.bufmax));0>l.xdelta&&(x=q-h+1);if(!(x>=this.imin&&x+h<=this.imin+this.size&&this.ybuf!==u||this.modified)&&2>=l["class"]){s=this.offset+x;q=this.skip;this.ybufn=h*Math.max(q*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT);if(this.ybuf===u||this.ybuf.byteLength<this.ybufn)this.ybuf=new ArrayBuffer(this.ybufn);q=new d.PointArray(this.ybuf);h=e.grab(l,q,s,h);this.imin=x;this.xstart=l.xstart+x*this.xdelta;this.size=h}},change_settings:function(a){if(a.index!==u)if(a.index)this.xmin=
this.xdelta=this.xstart=1,this.xmax=this.size;else{this.xstart=this.hcb.xstart+this.imin*this.xdelta;this.xdelta=this.hcb.xdelta;var e=this.hcb.xstart+this.hcb.xdelta*(this.size-1);this.xmin=Math.min(this.hcb.xstart,e);this.xmax=Math.max(this.hcb.xstart,e)}a.drawmode!==u&&(this.drawmode=a.drawmode,this.position=0,this.ybufn=this.size*Math.max(this.skip*d.PointArray.BYTES_PER_ELEMENT,d.PointArray.BYTES_PER_ELEMENT),this.ybuf=new ArrayBuffer(this.ybufn))},prep:function(a,g){var h=this.plot._Gx,l=this.plot._Mx,
q=Math.ceil(this.size),s=this.skip;if(0!==q){q*d.PointArray.BYTES_PER_ELEMENT>h.pointbufsize&&(h.pointbufsize=q*d.PointArray.BYTES_PER_ELEMENT,h.xptr=new ArrayBuffer(h.pointbufsize),h.yptr=new ArrayBuffer(h.pointbufsize));var x=new d.PointArray(this.ybuf),u=new d.PointArray(h.xptr),B=this.xmin,A=this.xmax,D,E;if(5===h.cmode||0<this.xsub)0>=q?(B=h.panxmin,A=h.panxmax):5!==h.cmode?u=new d.PointArray(this.xbuf):this.cx?e.vmov(x,s,u,1,q):0!==this.line?(E=e.vmxmn(x,q),u[0]=E.smax,u[1]=E.smin,q=2):u=x,
0<q&&(E=e.vmxmn(u,q),A=E.smax,B=E.smin);else if(0<q){E=this.xstart;var L=this.xdelta,x=q;h.index?(D=0,q-=1):0<=L?(D=Math.max(1,Math.min(x,Math.round((a-E)/L)))-1,q=Math.max(1,Math.min(x,Math.round((g-E)/L)+2))-1):(D=Math.max(1,Math.min(x,Math.round((g-E)/L)-1))-1,q=Math.max(1,Math.min(x,Math.round((a-E)/L)+2))-1);q=q-D+1;0>q&&(console.log("Nothing to plot"),q=0);x=(new d.PointArray(this.ybuf)).subarray(D*s);E+=L*D;for(D=0;D<q;D++)u[D]=h.index?this.imin+D+1:E+D*L}h.panxmin>h.panxmax?(h.panxmin=B,h.panxmax=
A):(h.panxmin=Math.min(h.panxmin,B),h.panxmax=Math.max(h.panxmax,A));if(0>=q)console.log("Nothing to plot");else{B=new d.PointArray(h.yptr);if(this.cx)1===h.cmode?e.cvmag(x,B,q):2===h.cmode?25===h.plab?(e.cvpha(x,B,q),e.vsmul(B,1/(2*Math.PI),B,q)):24!==h.plab?e.cvpha(x,B,q):e.cvphad(x,B,q):3===h.cmode?e.vmov(x,s,B,1,q):6<=h.cmode?e.cvmag2(x,B,q):4<=h.cmode&&e.vmov(x.subarray(1),s,B,1,q);else if(5===h.cmode)e.vfill(B,0,q);else if(1===h.cmode||6<=h.cmode)for(D=0;D<q;D++)B[D]=Math.abs(x[D]);else for(D=
0;D<q;D++)B[D]=x[D];6<=h.cmode&&(e.vlog10(B,h.dbmin,B),s=10,7==h.cmode&&(s=20),0<h.lyr.length&&h.lyr[0].cx&&(s/=2),e.vsmul(B,s,B));E=e.vmxmn(B,q);A=E.smax;B=E.smin;s=A-B;0>s&&(A=B,B=A+s,s=-s);1E-20>=s?(B-=1,A+=1):(B-=0.02*s,A+=0.02*s);0===l.level&&(h.panymin>h.panymax?(h.panymin=B,h.panymax=A):(h.panymin=Math.min(h.panymin,B),h.panymax=Math.max(h.panymax,A)),1<h.autol&&(s=1/Math.max(h.autol,1),h.panymin=h.panymin*s+l.stk[0].ymin*(1-s),h.panymax=h.panymax*s+l.stk[0].ymax*(1-s)));return q}}},draw:function(){var e=
this.plot._Mx,g=this.plot._Gx,h=this.color,l=this.symbol,s=this.radius,u=0,x={};x.fillStyle=g.fillStyle;this.options&&(x.highlight=this.options.highlight,x.noclip=this.options.noclip);0===this.line?u=0:(u=1,0<this.thick?u=this.thick:0>this.thick&&(u=Math.abs(this.thick),x.dashed=!0),1===this.line&&(x.vertsym=!0),2===this.line&&(x.horzsym=!0));var F=g.segment&&5!==g.cmode&&0<this.xsub&&!0,B=this.xdelta,A,D;this.xdata?(A=this.xmin,D=this.xmax):(A=Math.max(this.xmin,e.stk[e.level].xmin),D=Math.min(this.xmax,
e.stk[e.level].xmax),A>=D&&(g.panxmin=Math.min(g.panxmin,this.xmin),g.panxmax=Math.max(g.panxmax,this.xmax)));if(!g.all){var E=(g.bufmax-1)*B;-0<=E?D=Math.min(D,A+E):A=Math.max(A,D+E)}if(0!==u||0!==l){for(;A<D;)this.hcb.pipe||this.get_data(A,D),E=this.prep(A,D),0<E&&!F&&a.trace(e,h,new d.PointArray(g.xptr),new d.PointArray(g.yptr),E,1,u,l,s,x),g.all?0===this.size?A=D:g.index?A+=E:0<=B?A+=this.size*B:D+=this.size*B:A=D;this.position&&"scrolling"===this.drawmode&&(g=a.real_to_pixel(e,this.position*
this.xdelta,0),g.x>e.l&&g.x<e.r&&a.draw_line(e,"white",g.x,e.t,g.x,e.b))}},add_highlight:function(a){this.options.highlight||(this.options.highlight=[]);a instanceof Array?this.options.highlight.push.apply(this.options.highlight,a):this.options.highlight.push(a);this.plot.refresh()},remove_highlight:function(a){if(this.options.highlight){for(var e=this.options.highlight.length;e--;)a!==this.options.highlight[e]&&a!==this.options.highlight[e].id||this.options.highlight.splice(e,1);this.plot.refresh()}},
get_highlights:function(){return this.options.highlight?this.options.highlight.slice(0):[]},clear_highlights:function(){this.options.highlight&&(this.options.highlight=u,this.plot.refresh())}};var s=[0,53,27,80,13,40,67,93,7,60,33,87,20,47,73,100];d.Layer1D.overlay=function(f,g,h){var l=f._Gx,q=f._Mx;2==g["class"]&&e.force1000(g);g.buf_type="D";var C=1;2==g["class"]&&(C=Math.min(g.size/g.subsize,16-l.lyr.length));for(var x=0;x<C;x++){var F=new d.Layer1D(f);F.init(g,h);F.color=a.getcolor(q,e.Mc.colormap[3],
s[l.lyr.length%s.length]);2===g["class"]?(F.name=g.file_name?e.trim_name(g.file_name):"layer_"+l.lyr.length,F.name=F.name+"."+a.pad((x+1).toString(),3,"0"),F.offset=x*g.subsize):(F.name=g.file_name?e.trim_name(g.file_name):"layer_"+l.lyr.length,F.offset=0);for(var B in h)F[B]!==u&&(F[B]=h[B]);f.add_layer(F)}}})(window.sigplot=window.sigplot||{},mx,m);
(function(d,a,e,u){d.Layer2D=function(a){this.plot=a;this.ybuf=this.xbuf=u;this.xmax=this.xmin=this.imin=this.ydelta=this.ystart=this.xdelta=this.xstart=this.offset=0;this.name="";this.cx=!1;this.hcb=u;this.display=!0;this.color=0;this.line=3;this.thick=1;this.symbol=0;this.radius=3;this.ysub=this.xsub=this.skip=0;this.modified=this.xdata=!1;this.preferred_origin=4;this.opacity=1;this.lpb=u;this.yc=1;this.options={}};d.Layer2D.prototype={init:function(a){var f=this.plot._Gx,g=this.plot._Mx;this.hcb=
a;this.hcb.buf_type="D";if(this.hcb.pipe){var h=this;this.frame=0;this.lps=Math.max(1,g.b-g.t);e.addPipeWriteListener(this.hcb,function(){h._onpipewrite()});this.buf=new ArrayBuffer(this.lps*this.hcb.subsize*this.hcb.spa*d.PointArray.BYTES_PER_ELEMENT);this.zbuf=new d.PointArray(this.buf)}else this.lps=a.size;this.ybufn=this.xbufn=this.offset=0;this.drawmode="scrolling";2>=a["class"]&&(this.xsub=-1,this.ysub=1,this.cx="C"===a.format[0]);this.skip=1;this.cx&&(this.skip=2);f.index?(this.xmin=this.xdelta=
this.xstart=1,this.xmax=a.subsize,this.ymin=this.ydelta=this.ystart=1,this.ymax=size):(this.xstart=a.xstart,this.xdelta=a.xdelta,f=a.xstart+a.xdelta*(a.subsize-1),this.xmin=Math.min(a.xstart,f),this.xmax=Math.max(a.xstart,f),this.ystart=a.ystart,this.ydelta=a.ydelta,f=a.ystart+a.ydelta*(this.lps-1),this.ymin=Math.min(a.ystart,f),this.ymax=Math.max(a.ystart,f));this.xframe=this.hcb.subsize;this.yframe=this.lps*this.hcb.subsize/this.xframe;0===this.lpb&&(this.lpb=this.yframe);if(!this.lpb||0>=this.lpb)this.lpb=
16;this.lpb=Math.max(1,this.lpb/this.yc)*this.yc;this.xlab=a.xunits;this.ylab=a.yunits},_onpipewrite:function(){var s=this.plot._Gx,f=this.plot._Mx;if("falling"===this.drawmode)this.frame=0,this.zbuf.set(this.zbuf.subarray(0,(this.lps-1)*this.hcb.subsize*this.hcb.spa),this.hcb.subsize*this.hcb.spa),this.img&&a.shift_image_rows(f,this.img,1);else if("rising"===this.drawmode)this.frame=this.lps-1,this.zbuf.set(this.zbuf.subarray(this.hcb.subsize*this.hcb.spa),0),this.img&&a.shift_image_rows(f,this.img,
-1);else if("scrolling"===this.drawmode)this.frame>=this.lps&&(this.frame=0);else throw"Invalid draw mode";e.grabx(this.hcb,this.zbuf,this.hcb.subsize*this.hcb.spa,this.frame*this.hcb.subsize*this.hcb.spa);var g;if(this.cx){var h=this.zbuf.subarray(this.frame*this.hcb.subsize*this.hcb.spa,(this.frame+1)*this.hcb.subsize*this.hcb.spa);g=new d.PointArray(this.hcb.subsize);1===s.cmode?e.cvmag(h,g,g.length):2===s.cmode?25===s.plab?(e.cvpha(h,g,g.length),e.vsmul(ypoint,1/(2*Math.PI),ypoint,g.length)):
24!==s.plab?e.cvpha(h,g,g.length):e.cvphad(h,g,g.length):3===s.cmode?e.vmov(h,this.skip,g,1,g.length):6<=s.cmode?e.cvmag2(h,g,g.length):4<=s.cmode&&e.vmov(h.subarray(1),this.skip,g,1,g.length)}else g=this.zbuf.subarray(this.frame*this.hcb.subsize,(this.frame+1)*this.hcb.subsize),1===s.cmode&&e.vabs(g);6===s.cmode?e.vlogscale(g,s.dbmin,10):7===s.cmode&&e.vlogscale(g,s.dbmin,20);for(var h=g[0],l=g[0],q=0;q<g.length;q++)g[q]<h&&(h=g[q]),g[q]>l&&(l=g[q]);1===s.autol?(s.zmin=h,s.zmax=l):1<s.autol&&(q=
1/Math.max(s.autol,1),s.zmin=s.zmin*q+h*(1-q),s.zmax=s.zmax*q+l*(1-q));this.img&&a.update_image_row(f,this.img,g,this.frame,s.zmin,s.zmax);"scrolling"===this.drawmode&&(this.frame=(this.frame+1)%this.lps)},get_data:function(){var a=this.hcb;this.buf||(this.buf=new ArrayBuffer(this.lps*a.subsize*this.hcb.spa*d.PointArray.BYTES_PER_ELEMENT),this.zbuf=new d.PointArray(this.buf));this.hcb.pipe||e.grab(a,this.zbuf,0,a.subsize)},get_z:function(a,e){return this.zbuf[Math.floor(e/this.hcb.ydelta)*this.hcb.subsize+
Math.floor(a/this.hcb.xdelta)]},change_settings:function(a){a.cmode!==u&&(this.img=u);a.cmap!==u&&(this.img=u);a.drawmode!==u&&(this.drawmode=a.drawmode,this.frame=0,this.buf=new ArrayBuffer(this.lps*this.hcb.subsize*this.hcb.spa*d.PointArray.BYTES_PER_ELEMENT),this.zbuf=new d.PointArray(this.buf),this.img=u)},prep:function(d,f){var g=this.plot._Gx,h=this.plot._Mx,l=this.lps,q=this.xmin,C=this.xmax,x;this.get_data(d,f);if(!(5===g.cmode||0<this.xsub)&&0<l){var F=this.xstart,B=this.xdelta,A=l;g.index?
(x=0,l-=1):0<=B?(x=Math.max(1,Math.min(A,Math.round((d-F)/B)))-1,l=Math.max(1,Math.min(A,Math.round((f-F)/B)+2))-1):(x=Math.max(1,Math.min(A,Math.round((f-F)/B)-1))-1,l=Math.max(1,Math.min(A,Math.round((d-F)/B)+2))-1);l=l-x+1;0>l&&(console.log("Nothing to plot"),l=0)}g.panxmin>g.panxmax?(g.panxmin=q,g.panxmax=C):(g.panxmin=Math.min(g.panxmin,q),g.panxmax=Math.max(g.panxmax,C));if(0>=l)console.log("Nothing to plot");else{!(5===g.cmode||0<this.ysub)&&0<l&&(q=this.ystart,C=this.ydelta,A=l,g.index?(x=
0,l-=1):0<=C?(x=Math.max(1,Math.min(A,Math.round((d-q)/C)))-1,l=Math.max(1,Math.min(A,Math.round((f-q)/C)+2))-1):(x=Math.max(1,Math.min(A,Math.round((f-q)/C)-1))-1,l=Math.max(1,Math.min(A,Math.round((d-q)/C)+2))-1),l=l-x+1,0>l&&(console.log("Nothing to plot"),l=0));g.panymin>g.panxmax?(g.panymin=this.ymin,g.panymax=this.ymax):(g.panymin=Math.min(g.panymin,this.ymin),g.panymax=Math.max(g.panymax,this.ymax));1===g.cmode?e.vabs(this.zbuf):6===g.cmode?e.vlogscale(this.zbuf,g.dbmin,10):7===g.cmode&&e.vlogscale(this.zbuf,
g.dbmin,20);x=this.zbuf[0];A=this.zbuf[0];for(q=0;q<this.zbuf.length&&!(q/this.xframe>=this.lpb);q++)this.zbuf[q]<x&&(x=this.zbuf[q]),this.zbuf[q]>A&&(A=this.zbuf[q]);g.zmin=g.zmin!==u?Math.min(g.zmin,x):x;g.zmax=g.zmax!==u?Math.min(g.zmax,A):A;this.img=a.create_image(h,this.zbuf,this.hcb.subsize,this.lps,g.zmin,g.zmax);this.img.cmode=g.cmode;this.img.cmap=g.cmap;this.img.origin=h.origin;return l}},draw:function(){var e=this.plot._Mx,f=this.plot._Gx,g=this.hcb;if(this.hcb.pipe){var h=Math.max(1,e.b-
e.t);if(h!=this.lps&&this.buf){var l=new ArrayBuffer(h*this.hcb.subsize*d.PointArray.BYTES_PER_ELEMENT),q=new d.PointArray(l);q.set(this.zbuf.subarray(0,q.length));this.buf=l;this.zbuf=q;this.lps=h;this.frame>=this.lps&&(this.frame=0);h=g.ystart+g.ydelta*(this.lps-1);this.ymin=Math.min(g.ystart,h);this.ymax=Math.max(g.ystart,h);this.plot.rescale()}}h=Math.max(this.xmin,e.stk[e.level].xmin);l=Math.min(this.xmax,e.stk[e.level].xmax);if(h>=l)f.panxmin=Math.min(f.panxmin,this.xmin),f.panxmax=Math.max(f.panxmax,
this.xmax);else{var u=Math.max(this.ymin,e.stk[e.level].ymin),x=Math.min(this.ymax,e.stk[e.level].ymax),q=Math.abs(l-h)+1,F=Math.abs(x-u)+1,q=Math.floor(q/g.xdelta),F=Math.floor(F/g.ydelta),q=Math.min(q,g.subsize),F=Math.min(F,g.size),g=a.real_to_pixel(e,h,u),x=a.real_to_pixel(e,l,x),F=(x.y-g.y)/F;f.xe=Math.max(1,Math.round((x.x-g.x)/q));f.ye=Math.max(1,Math.round(F));this.img?f.cmode===this.img.cmode&&f.cmap===this.img.cmap&&e.origin===this.img.origin||this.prep(h,l):this.prep(h,l);this.img&&a.draw_image(e,
this.img,this.xmin,this.ymin,this.xmax,this.ymax,this.opacity,f.rasterSmoothing);this.frame&&(f=a.real_to_pixel(e,0,this.frame*this.ydelta),f.y>e.t&&f.y<e.b&&a.draw_line(e,"white",e.l,f.y,e.r,f.y))}}};d.Layer2D.overlay=function(a,f,g){var h=a._Gx;f.buf_type="D";var l=new d.Layer2D(a);l.init(f);l.name=f.file_name?e.trim_name(f.file_name):"layer_"+h.lyr.length;for(var q in g)l[q]!==u&&(l[q]=g[q]);a.add_layer(l)}})(window.sigplot=window.sigplot||{},mx,m);var sigplot=window.sigplot||{};
(function(d,a,e){function u(){this.yptr=this.xptr=void 0;this.ymax=this.ymin=this.xmax=this.xmin=this.panymax=this.panymin=this.panxmax=this.panxmin=this.xdelta=this.xstart=this.arety=this.aretx=this.ymrk=this.xmrk=this.rety=this.retx=0;this.zmax=this.zmin=void 0;this.pmt=this.pyscl=this.pxscl=this.dbmin=0;this.format=this.note="";this.modsource=this.modlayer=this.pthk=this.pyl=this.py2=this.py1=this.px2=this.px1=this.pb=this.pt=this.pr=this.pl=0;this.modified=!1;this.ydiv=this.xdiv=this.modmode=
0;this.cross=this.expand=this.all=!1;this.grid=!0;this.gridBackground=void 0;this.index=!1;this.legend=this.specs=this.pan=!0;this.xdata=!1;this.show_readout=this.show_y_axis=this.show_x_axis=!0;this.autohide_panbars=this.autohide_readout=this.hide_note=!1;this.panning=void 0;this.panmode=0;this.hold=!1;this.isec=this.nsec=this.iysec=this.sections=0;this.ylab=this.xlab=void 0;this.default_rubberbox_action="zoom";this.default_rubberbox_mode="box";this.wheelscroll_mode_natural=!0;this.scroll_time_interval=
10;this.stillPanning=this.repeatPanning=void 0;this.autol=-1;this.wheelZoom=this.rasterSmoothing=this.lineSmoothing=!1;this.wheelZoomPercent=0.2;this.inContinuousZoom=!1;this.lyr=[];this.HCB=[];this.plugins=[];this.plotData=document.createElement("canvas");this.plotData.valid=!1}function s(c,e){var d=c._Mx;a.removeEventListener(d,"mousedown",c.onmousedown,!1);a.menu(d,{title:"SCROLLBAR",refresh:function(){c.refresh()},finalize:function(){a.addEventListener(d,"mousedown",c.onmousedown,!1);c.refresh()},
items:[{text:"Expand Range",handler:function(){t(c,a.SB_EXPAND,e)}},{text:"Shrink Range",handler:function(){t(c,a.SB_SHRINK,e)}},{text:"Expand Full",handler:function(){t(c,a.SB_FULL,e)}}]})}function f(c){var d=c._Gx,p=c._Mx;a.removeEventListener(p,"mousedown",c.onmousedown,!1);var k={text:"Cntrls...",menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2==d.cntrls,handler:function(){c.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1==d.cntrls,handler:function(){c.change_settings({xcnt:-1})}},
{text:"Off",checked:0==d.cntrls,handler:function(){c.change_settings({xcnt:0})}},{text:"LM Click",checked:1==d.cntrls,handler:function(){c.change_settings({xcnt:1})}},{text:"Continuous",checked:2==d.cntrls,handler:function(){c.change_settings({xcnt:2})}}]}},f={text:"CX Mode...",menu:{title:"COMPLEX MODE",items:[{text:"Magnitude",checked:1==d.cmode,handler:function(){c.change_settings({cmode:1})}},{text:"Phase",checked:2==d.cmode,handler:function(){c.change_settings({cmode:2})}},{text:"Real",checked:3==
d.cmode,handler:function(){c.change_settings({cmode:3})}},{text:"Imaginary",checked:4==d.cmode,handler:function(){c.change_settings({cmode:4})}},{text:"IR: Imag/Real",checked:5==d.cmode,handler:function(){c.change_settings({cmode:5})}},{text:"10*Log10",checked:6==d.cmode,handler:function(){c.change_settings({cmode:6})}},{text:"20*Log10",checked:7==d.cmode,handler:function(){c.change_settings({cmode:7})}}]}},g={text:"Scaling...",menu:{title:"SCALING",items:[{text:"Y Axis",style:"separator"},{text:"Parameters...",
checked:0===d.autoy,handler:function(){d.autoy=0;L(c,"Y Axis Min:",a.floatValidator,function(a){parseFloat(a)!==p.stk[p.level].ymin?(""===a&&(a=0),G(c,parseFloat(a),p.stk[p.level].ymax,"Y")):c.refresh()},p.stk[p.level].ymin,void 0,void 0,function(){L(c,"Y Axis Max:",a.floatValidator,function(a){parseFloat(a)!==p.stk[p.level].ymax?(""===a&&(a=0),G(c,p.stk[p.level].ymin,parseFloat(a),"Y")):c.refresh()},p.stk[p.level].ymax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===d.autoy,handler:function(){d.autoy=
1}},{text:"Max Auto",checked:2===d.autoy,handler:function(){d.autoy=2}},{text:"Full Auto",checked:3===d.autoy,handler:function(){d.autoy=3}},{text:"X Axis",style:"separator"},{text:"Parameters...",checked:0===d.autox,handler:function(){d.autox=0;L(c,"X Axis Min:",a.floatValidator,function(a){parseFloat(a)!==p.stk[p.level].xmin?(""===a&&(a=0),G(c,parseFloat(a),p.stk[p.level].xmax,"X")):c.refresh()},p.stk[p.level].xmin,void 0,void 0,function(){L(c,"X Axis Max:",a.floatValidator,function(a){parseFloat(a)!==
p.stk[p.level].xmax?(""===a&&(a=0),G(c,p.stk[p.level].xmin,parseFloat(a),"X")):c.refresh()},p.stk[p.level].xmax,void 0,void 0,void 0)})}},{text:"Min Auto",checked:1===d.autox,handler:function(){d.autox=1}},{text:"Max Auto",checked:2===d.autox,handler:function(){d.autox=2}},{text:"Full Auto",checked:3===d.autox,handler:function(){d.autox=3}}]}},h={text:"Settings...",menu:{title:"SETTINGS",items:[{text:"ALL Mode",checked:d.all,style:"checkbox",handler:function(){c.change_settings({all:!d.all})}},{text:"Controls...",
menu:{title:"CONTROLS OPTIONS",items:[{text:"Continuous (Disabled)",checked:-2==d.cntrls,handler:function(){c.change_settings({xcnt:-2})}},{text:"LM Click (Disabled)",checked:-1==d.cntrls,handler:function(){c.change_settings({xcnt:-1})}},{text:"Off",checked:0==d.cntrls,handler:function(){c.change_settings({xcnt:0})}},{text:"LM Click",checked:1==d.cntrls,handler:function(){c.change_settings({xcnt:1})}},{text:"Continuous",checked:2==d.cntrls,handler:function(){c.change_settings({xcnt:2})}}]}},{text:"Mouse...",
menu:{title:"MOUSE OPTIONS",items:[{text:"LM Drag (Zoom)",checked:"zoom"===d.default_rubberbox_action,handler:function(){d.default_rubberbox_action="zoom"}},{text:"LM Drag (Select)",checked:"select"===d.default_rubberbox_action,handler:function(){d.default_rubberbox_action="select"}},{text:"LM Drag (Disabled)",checked:void 0===d.default_rubberbox_action,handler:function(){d.default_rubberbox_action=void 0}},{text:"Mode...",menu:{title:"MOUSE Mode",items:[{text:"Box",checked:"box"===d.default_rubberbox_mode,
handler:function(){d.default_rubberbox_mode="box"}},{text:"Horizontal",checked:"horizontal"===d.default_rubberbox_mode,handler:function(){d.default_rubberbox_mode="horizontal"}},{text:"Vertical",checked:"vertical"===d.default_rubberbox_mode,handler:function(){d.default_rubberbox_mode="vertical"}}]}},{text:"CROSShairs...",menu:{title:"Crosshairs Mode",items:[{text:"Off",checked:!d.cross,handler:function(){d.cross=!1}},{text:"On",checked:!0===d.cross,handler:function(){d.cross=!0}},{text:"Horizontal",
checked:"horizontal"===d.cross,handler:function(){d.cross="horizontal"}},{text:"Vertical",checked:"vertical"===d.cross,handler:function(){d.cross="vertical"}}]}},{text:"Mousewheel Natural Mode",checked:d.wheelscroll_mode_natural,style:"checkbox",handler:function(){c.change_settings({wheelscroll_mode_natural:!d.wheelscroll_mode_natural})}}]}},{text:"CROSShairs",checked:d.cross,style:"checkbox",handler:function(){c.change_settings({cross:!d.cross})}},{text:"GRID",checked:d.grid,style:"checkbox",handler:function(){c.change_settings({grid:!d.grid})}},
{text:"INDEX Mode",checked:d.index,style:"checkbox",handler:function(){c.change_settings({index:!d.index})}},{text:"LEGEND",checked:d.legend,style:"checkbox",handler:function(){c.change_settings({legend:!d.legend})}},{text:"PAN Scrollbars",checked:d.pan,style:"checkbox",handler:function(){c.change_settings({pan:!d.pan})}},{text:"PHase UNITS...",menu:{title:"PHASE UNITS",items:[{text:"Radians",checked:23==d.plab,handler:function(){c.change_settings({phunits:"R"})}},{text:"Degrees",checked:24==d.plab,
handler:function(){c.change_settings({phunits:"D"})}},{text:"Cycles",checked:25==d.plab,handler:function(){c.change_settings({phunits:"C"})}}]}},{text:"SPECS",checked:d.specs,style:"checkbox",handler:function(){c.change_settings({specs:!d.specs})}},{text:"XDIVisions...",handler:function(){L(c,"X Divisions:",function(c){var d=a.intValidator(c),n=e.trunc(p.width/2);return d.valid&&c>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+")."}:d},function(a){parseFloat(a)!==d.xdiv&&(""===a&&(a=
1),d.xdiv=parseFloat(a));c.refresh()},d.xdiv,void 0,void 0,void 0)}},{text:"XLABel...",handler:function(){L(c,"X Units:",function(c){console.log("The value is "+c);return a.intValidator(c)},function(a){parseFloat(a)!==d.xlab&&(0>a&&(a=0),d.xlab=parseFloat(a));c.refresh()},d.xlab,void 0,void 0,void 0)}},{text:"YDIVisions...",handler:function(){L(c,"Y Divisions:",function(c){var d=a.intValidator(c),n=e.trunc(p.height/2);return d.valid&&c>n?{valid:!1,reason:"Exceeds maximum number of divisions ("+n+
")."}:d},function(a){parseFloat(a)!==d.ydiv&&(""===a&&(a=1),d.ydiv=parseFloat(a));c.refresh()},d.ydiv,void 0,void 0,void 0)}},{text:"YINVersion",checked:4===p.origin,style:"checkbox",handler:function(){c.change_settings({yinv:4!==p.origin})}},{text:"YLABel...",handler:function(){L(c,"Y Units:",function(c){return a.intValidator(c)},function(a){parseFloat(a)!==d.ylab&&(0>a&&(a=0),d.ylab=parseFloat(a));c.refresh()},d.ylab,void 0,void 0,void 0)}},{text:"X-axis",checked:d.show_x_axis,style:"checkbox",
handler:function(){c.change_settings({show_x_axis:!d.show_x_axis})}},{text:"Y-axis",checked:d.show_y_axis,style:"checkbox",handler:function(){c.change_settings({show_y_axis:!d.show_y_axis})}},{text:"Readout",checked:d.show_readout,style:"checkbox",handler:function(){c.change_settings({show_readout:!d.show_readout})}},{text:"Invert Colors",checked:p.xi,style:"checkbox",handler:function(){a.invertbgfg(p)}}]}},l={text:"Colormap...",menu:{title:"COLORMAP",items:[{text:"Greyscale",checked:0===d.cmap,handler:function(){c.change_settings({cmap:0})}},
{text:"Ramp Colormap",checked:1===d.cmap,handler:function(){c.change_settings({cmap:1})}},{text:"Color Wheel",checked:2===d.cmap,handler:function(){c.change_settings({cmap:2})}},{text:"Spectrum",checked:3===d.cmap,handler:function(){c.change_settings({cmap:3})}},{text:"Sunset",checked:4===d.cmap,handler:function(){c.change_settings({cmap:4})}}]}},q=function(e){return{title:"TRACE OPTIONS",items:[{text:"Dashed...",handler:function(){var k=1;if(void 0!==e)k=Math.abs(c._Gx.lyr[e].thick);else{if(0===
d.lyr.length)return;for(var k=Math.abs(c._Gx.lyr[0].thick),p=0;p<d.lyr.length;p++)if(k!=Math.abs(c._Gx.lyr[p].thick)){k=1;break}}L(c,"Line thickness:",a.intValidator,function(a){if(void 0!==e)c._Gx.lyr[e].line=3,c._Gx.lyr[e].thick=-1*a,c._Gx.lyr[e].symbol=0;else for(var e=0;e<d.lyr.length;e++)c._Gx.lyr[e].line=3,c._Gx.lyr[e].thick=-1*a,c._Gx.lyr[e].symbol=0},k)}},{text:"Dots...",handler:function(){var k=3;if(void 0!==e)k=Math.abs(c._Gx.lyr[e].radius);else{if(0===d.lyr.length)return;for(var p=0;p<
d.lyr.length;p++)if(k!=Math.abs(c._Gx.lyr[p].radius)){k=3;break}}L(c,"Radius/Shape:",a.intValidator,function(a){var k;0>a?(k=3,a=Math.abs(a)):0<a?k=2:(k=1,a=0);if(void 0!==e)c._Gx.lyr[e].line=0,c._Gx.lyr[e].radius=a,c._Gx.lyr[e].symbol=k;else for(var p=0;p<d.lyr.length;p++)c._Gx.lyr[p].line=0,c._Gx.lyr[p].radius=a,c._Gx.lyr[p].symbol=k},k)}},{text:"Solid...",handler:function(){var k=1;if(void 0!==e)k=Math.abs(c._Gx.lyr[e].thick);else{if(0===d.lyr.length)return;for(var k=Math.abs(c._Gx.lyr[0].thick),
p=0;p<d.lyr.length;p++)if(k!=Math.abs(c._Gx.lyr[p].thick)){k=1;break}}L(c,"Line thickness:",a.intValidator,function(a){if(void 0!==e)c._Gx.lyr[e].line=3,c._Gx.lyr[e].thick=a,c._Gx.lyr[e].symbol=0;else for(var k=0;k<d.lyr.length;k++)c._Gx.lyr[k].line=3,c._Gx.lyr[k].thick=a,c._Gx.lyr[k].symbol=0},k)}},{text:"Toggle",style:void 0!==e?"checkbox":void 0,checked:void 0!==e?c._Gx.lyr[e].display:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].display=!c._Gx.lyr[e].display;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].display=
!c._Gx.lyr[a].display}},{text:"Symbols...",menu:{title:"SYMBOLS",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=0,c._Gx.lyr[e].symbol=0;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=0,c._Gx.lyr[a].symbol=0}},{text:"Pixels",checked:void 0!==e?1==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=1,c._Gx.lyr[e].symbol=1;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=
1,c._Gx.lyr[a].symbol=1}},{text:"Circles",checked:void 0!==e?2==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=4,c._Gx.lyr[e].symbol=2;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=4,c._Gx.lyr[a].symbol=2}},{text:"Squares",checked:void 0!==e?3==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=4,c._Gx.lyr[e].symbol=3;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=4,c._Gx.lyr[a].symbol=3}},{text:"Plusses",checked:void 0!==
e?4==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=4,c._Gx.lyr[e].symbol=4;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=4,c._Gx.lyr[a].symbol=4}},{text:"X's",checked:void 0!==e?5==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=4,c._Gx.lyr[e].symbol=5;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=4,c._Gx.lyr[a].symbol=5}},{text:"Triangles",checked:void 0!==e?6==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==
e)c._Gx.lyr[e].radius=6,c._Gx.lyr[e].symbol=6;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=6,c._Gx.lyr[a].symbol=6}},{text:"Downward Triangles",checked:void 0!==e?7==c._Gx.lyr[e].symbol:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].radius=6,c._Gx.lyr[e].symbol=7;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].radius=6,c._Gx.lyr[a].symbol=7}}]}},{text:"Line Type...",menu:{title:"LINE TYPE",items:[{text:"Retain Current"},{text:"None",checked:void 0!==e?0==c._Gx.lyr[e].line:void 0,
handler:function(){if(void 0!==e)c._Gx.lyr[e].line=0;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].line=0}},{text:"Verticals",checked:void 0!==e?1==c._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].line=1;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].line=1}},{text:"Horizontals",checked:void 0!==e?2==c._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].line=2;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].line=2}},{text:"Connecting",checked:void 0!==
e?3==c._Gx.lyr[e].line:void 0,handler:function(){if(void 0!==e)c._Gx.lyr[e].line=3;else for(var a=0;a<d.lyr.length;a++)c._Gx.lyr[a].line=3}}]}},{text:"Thickness...",handler:function(){var k=1;void 0!==e&&(k=c._Gx.lyr[e].thick);L(c,"Thickness",a.intValidator,function(a){""===a&&(a=1);a=Math.max(0,a);if(void 0!==e)c._Gx.lyr[e].thick=a;else for(var k=0;k<d.lyr.length;k++)c._Gx.lyr[k].thick=a},k,void 0,void 0,void 0)}},{text:"Opacity...",handler:function(){var k=1;void 0!==e&&(k=c._Gx.lyr[e].opacity);
L(c,"Opacity:",a.floatValidator,function(a){""===a&&(a=1);a=Math.max(0,a);a=Math.min(1,a);if(void 0!==e)c._Gx.lyr[e].opacity=a;else for(var k=0;k<d.lyr.length;k++)c._Gx.lyr[k].opacity=a},k,void 0,void 0,void 0)}}]}},s={text:"Plugins...",menu:{title:"PLUGINS",items:function(){for(var a=[],c=0;c<d.plugins.length;c++){var e=d.plugins[c];e.impl.menu&&("function"===typeof e.impl.menu?a.push(e.impl.menu()):a.push(e.impl.menu))}return a}()}};a.menu(p,{title:"SIG-PLOT",finalize:function(){p.prompt||a.addEventListener(p,
"mousedown",c.onmousedown,!1);c.refresh()},items:[{text:"Refresh"},k,f,g,{text:"Grid",handler:function(){c.change_settings({grid:!d.grid})}},h,l,{text:"Traces...",menu:function(){var a=c._Gx,e={title:"TRACE",items:[]};e.items.push({text:"All",menu:q()});for(var d=0;d<a.lyr.length;d++)e.items.push({text:a.lyr[d].name,menu:q(d)});return e}},{text:"Files...",menu:{title:"FILES OPTIONS",items:[{text:"Deoverlay File...",menu:function(){var a=c._Gx,e={title:"DEOVERLAY",items:[]};e.items.push({text:"Deoverlay All",
handler:function(){c.deoverlay()}});for(var d=0;d<a.lyr.length;d++){var n=function(a){return function(){c.deoverlay(a)}}(d);e.items.push({text:a.lyr[d].name,handler:n})}return e}}]}},s,{text:"Keypress Info",handler:function(){a.message(p,y)}},{text:"Exit",handler:function(){var c=document.createEvent("Event");c.initEvent("sigplotexit",!0,!0);a.dispatchEvent(p,c)}}]})}function g(c){return function(d,p,k,f,g,h){var l,q=c._Gx,s=c._Mx,t=Math.min(p,f);l=Math.min(k,g);var u=Math.abs(f-p),w=Math.abs(g-k);
void 0===h||"zoom"===h?1===d.which&&(2>u&&2>w?(t=!1,l=c._Mx,u=l.xpos,w=l.ypos,p=l.text_h,k=l.text_w,f=" ",u<l.l-k&&w<=l.b&&w>=l.t?(f="YCENTER",t=!0):w>l.b+e.trunc(0.5*k)&&w<=l.b+e.trunc(e.trunc(3*p)/2)&&u>=l.l&&u<=l.r&&(f="XCENTER",t=!0),l=f,t?" "!==l&&E(c,l,0,d):1===q.cntrls&&(d=document.createEvent("Event"),d.initEvent("mtag",!0,!0),d.x=q.xmrk,d.y=q.ymrk,d.w=void 0,d.h=void 0,a.dispatchEvent(s,d))):(c.pixel_zoom(p,k,f,g),c.refresh())):"select"===h&&(d=document.createEvent("Event"),d.initEvent("mtag",
!0,!0),q=Q(c,t,l),t=Q(c,t+u,l+w),d.x=q.x,d.y=q.y,d.w=Math.abs(t.x-q.x),d.h=Math.abs(t.y-q.y),a.dispatchEvent(s,d))}}function h(c,d){var p=c._Mx,k=c._Gx;k.xmin=void 0===d.xmin?0:d.xmin;k.xmax=void 0===d.xmax?0:d.xmax;var f=void 0!==d.xmin,g=void 0!==d.xmax,h=void 0===d.cmode?"":d.cmode.toUpperCase();k.ylab=d.ylab;k.ymin=void 0===d.ymin?0:d.ymin;k.ymax=void 0===d.ymax?0:d.ymax;var q=void 0!==d.ymin,s=void 0!==d.ymax;void 0!==d.colors&&a.setbgfg(p,d.colors.bg,d.colors.fg,p.xi);void 0!==d.xi&&a.invertbgfg(p);
k.forcelab=void 0===d.forcelab?!0:d.forcelab;k.all=void 0===d.all?!1:d.all;k.expand=void 0===d.expand?!1:d.expand;k.xlab=d.xlab;k.segment=void 0===d.segment?!1:d.segment;k.plab=24;var t=void 0===d.phunits?"D":d.phunits;"R"===t[0]?k.plab=23:"C"===t[0]&&(k.plab=25);k.xdiv=void 0===d.xdiv?5:d.xdiv;k.ydiv=void 0===d.ydiv?5:d.ydiv;p.origin=1;d.yinv&&(p.origin=4);k.pmt=void 0===d.pmt?1:d.pmt;k.bufmax=void 0===d.bufmax?32768:d.bufmax;k.sections=void 0===d.nsec?0:d.nsec;k.anno_type=void 0===d.anno_type?0:
d.anno_type;k.xfmt=void 0===d.xfmt?"":d.xfmt;k.yfmt=void 0===d.yfmt?"":d.yfmt;k.index=void 0===d.index?!1:d.index;if(t=k.index||"IN"===h.slice(0,2))f&&1===k.xmin&&(f=!1),g&&1===k.xmin&&(g=!1);k.yptr=void 0;k.xptr=void 0;k.pointbufsize=0;k.xdata=!1;k.note="";k.hold=0;e.vstype("D");d.inputs||l(c,!1);var u=h.slice(0,2);if("IN"===u||"AB"===u||"__"===u)u=h.slice(2,4);k.cmode=0<k.lyr.length&&k.lyr[0].cx?1:3;"MA"===u&&(k.cmode=1);"PH"===u&&(k.cmode=2);"RE"===u&&(k.cmode=3);"IM"===u&&(k.cmode=4);if("LO"===
u||"D1"===u)k.cmode=6;if("L2"===u||"D2"===u)k.cmode=7;if("RI"===u||"IR"===u)k.index?alert("Imag/Real mode not permitted in INDEX mode"):k.cmode=5;k.basemode=k.cmode;c.change_settings({cmode:k.cmode});k.dbmin=1E-20;6<=k.cmode&&(h=10,7===k.cmode&&(h=20),"L"===u[0]?0<k.lyr.length&&k.lyr[0].cx?(k.ymin=Math.max(k.ymin,1E-10),k.ymax=Math.max(k.ymax,1E-10)):(k.ymin=Math.max(k.ymin,1E-20),k.ymax=Math.max(k.ymax,1E-20)):0<k.lyr.length&&k.lyr[0].cx?(k.ymin=Math.max(-18*h,k.ymin),k.ymax=Math.max(-18*h,k.ymax),
k.dbmin=1E-37):Math.min(k.ymin,k.ymax)<-20*h&&(k.ymin=Math.max(-37*h,k.ymin),k.ymax=Math.max(-37*h,k.ymax),k.dbmin=Math.pow(10,Math.min(k.ymin,k.ymax)/h)));p.level=0;t&&!k.index&&(f&&(k.xmin=k.xstart+k.xdelta*(k.xmin-1)),f&&(k.xmax=k.xstart+k.xdelta*(k.xmax-1)));k.autox=void 0===d.autox?-1:d.autox;0>k.autox&&(k.autox=0,f||(k.autox+=1),g||(k.autox+=2));k.autoy=void 0===d.autoy?-1:d.autoy;0>k.autoy&&(k.autoy=0,q||(k.autoy+=1),s||(k.autoy+=2));k.autol=void 0===d.autol?-1:d.autol;f||(k.xmin=void 0);g||
(k.xmax=void 0);U(c,{get_data:!0},k.xmin,k.xmax,k.xlab,k.ylab);f||(k.xmin=p.stk[0].xmin);g||(k.xmax=p.stk[0].xmax);q||(k.ymin=p.stk[0].ymin);s||(k.ymax=p.stk[0].ymax);k.xmin>k.xmax&&(p.stk[0].xmin=k.xmax,k.xmax=k.xmin,k.xmin=p.stk[0].xmin);k.ymin>k.ymax&&(p.stk[0].ymin=k.ymax,k.ymax=k.ymin,k.ymin=p.stk[0].ymin);p.stk[0].xmin=k.xmin;p.stk[0].xmax=k.xmax;p.stk[0].ymin=k.ymin;p.stk[0].ymax=k.ymax;k.panxmin=Math.min(k.panxmin,k.xmin);k.panxmax=Math.max(k.panxmax,k.xmax);k.panymin=Math.min(k.panymin,k.ymin);
k.panymax=Math.max(k.panymax,k.ymax);k.xmin=p.stk[0].xmin;k.ymin=p.stk[0].ymin;a.set_font(p,Math.min(7,p.width/64));k.ncolors=void 0===d.ncolors?16:d.ncolors;k.cmap=void 0===d.xc?-1:d.xc;0>k.ncolors&&(k.ncolors*=-1,k.cmap=Math.max(1,k.cmap));if(1>k.cmap||5<k.cmap)k.cmap=2==k.cmode?2:1;a.colormap(p,e.Mc.colormap[k.cmap],k.ncolors);k.cntrls="leftmouse"===d.xcnt?1:"continuous"===d.xcnt?2:void 0===d.xcnt?1:d.xcnt;k.default_rubberbox_mode=void 0===d.rubberbox_mode?"box":d.rubberbox_mode;k.default_rubberbox_action=
void 0===d.rubberbox_action?"zoom":d.rubberbox_action;k.cross=void 0===d.cross?!1:d.cross;k.grid=void 0===d.nogrid?!0:!d.nogrid;k.gridBackground=d.gridBackground;k.gridStyle=d.gridStyle;k.wheelZoom=d.wheelZoom;k.wheelZoomPercent=d.wheelZoomPercent;k.legend=void 0===d.legend?!1:d.legend;k.legendBtnLocation={x:0,y:0,width:0,height:0};k.pan=void 0===d.nopan?!0:!d.nopan;k.nomenu=void 0===d.nomenu?!1:d.nomenu;k.modmode=0;k.modlayer=-1;k.modsource=0;k.modified=d.mod&&0<k.lyr.length;k.nmark=0;k.iabsc=0;
k.index&&(k.iabsc=1);k.specs=!d.nospecs;k.scroll_time_interval=void 0===d.scroll_time_interval?k.scroll_time_interval:d.scroll_time_interval;k.autohide_readout=d.autohide_readout;k.autohide_panbars=d.autohide_panbars;k.specs?(k.show_x_axis=!d.noxaxis,k.show_y_axis=!d.noyaxis,k.show_readout=!d.noreadout,k.specs=k.show_x_axis||k.show_y_axis||k.show_readout?!0:!1):(k.show_x_axis=!1,k.show_y_axis=!1,k.show_readout=!1);k.hide_note=d.hide_note||!1;k.xmrk=0;k.ymrk=0;d.nodragdrop||(a.addEventListener(p,"dragover",
function(a){a.preventDefault()},!1),a.addEventListener(p,"drop",function(a){return function(c){var e=c.dataTransfer.files;0<e.length&&(c.preventDefault(),a.load_files(e))}}(c),!1))}function l(a,c){var e=a._Gx,d=a._Mx;if(c){var f=e.HCB[0];e.xstart=f.xstart;e.xdelta=f.xdelta}else e.xstart=0,e.xdelta=1,e.autol=-1,e.zmin=void 0,e.zmax=void 0;d.origin=1}function q(c,d){var p=c._Mx,k=c._Gx;if(0<d&&(4<=d&&k.show_readout&&!k.hide_note&&a.text(p,p.width-k.lbtn-(k.note.length+1)*p.text_w,p.text_h,k.note),4<=
d&&D(c),1<=d&&k.legend)){for(var p=c._Mx,k=c._Gx,f=p.canvas.getContext("2d"),g=0,h=0,l=0,q=0,s=0,t=0,u=0,w=g=0,x=0,q=p.text_w,u=23*q,g=(k.lyr.length+1)*p.text_h,s=p.r-u,t=p.t,h=s+2,l=t+2,w=u-5,x=g-5,y=0,g=u=0;g<k.lyr.length;g++){var A=f.measureText(k.lyr[g].name).width;A>y&&(y=A)}98<y&&(u=y-98,w+=u,h-=u);f.strokeStyle=p.fg;f.fillStyle=p.bg;f.fillRect(h,l,w,x);f.strokeRect(h,l,w,x);for(g=0;g<k.lyr.length;g++)h=s+4*q,l=t+g*p.text_h+p.text_h,g===k.modlayer&&a.text(p,s+q-u,l+Math.floor(p.text_w/2),"**"),
k.lyr[g].display&&(x=k.lyr[g].color,0<k.lyr[g].line&&(w=e.sign(Math.min(q,Math.abs(k.lyr[g].thick)),k.lyr[g].thick),0>w||w===a.L_dashed?a.draw_line(p,x,h-u,l-3,h+2*q-u,l-3,Math.abs(w),{mode:"dashed",on:4,off:4}):a.draw_line(p,x,h-u,l-3,h+2*q-u,l-3,Math.abs(w))),0<k.lyr[g].symbol&&(w=0>k.lyr[g].radius?-e.trunc(0.6*q):Math.min(k.lyr[g].radius,e.trunc(0.6*q)),a.draw_symbol(p,x,h+q-u,l-3,k.lyr[g].symbol,w))),h+=3*q,l+=0.3*p.text_h,a.text(p,h-u,l,k.lyr[g].name)}}function C(a){var c=a._Gx;a=a._Mx.canvas.getContext("2d");
for(var e=0;e<c.plugins.length;){if(c.plugins[e].impl.refresh){var d=c.plugins[e].canvas;d.getContext("2d").clearRect(0,0,d.width,d.height);c.plugins[e].impl.refresh(d)}e+=1;a.drawImage(d,0,0)}}function x(a){a=a._Gx;if(0===a.HCB.length)a.note="";else if(void 0===a.HCB[0].plotnote){for(var c=[],e=0;e<a.HCB.length;e++)a.HCB[e].file_name&&c.push(a.HCB[e].file_name);a.note=c.join("|").toUpperCase()}}function F(a,c){var e=a._Gx;c>=e.lyr.length||!e.lyr[c].display||0!==e.hold||e.lyr[c].draw()}function B(c){var e=
c._Gx;c=c._Mx;e.cross&&(("vertical"===e.cross||!0===e.cross)&&c.xpos>=c.l&&c.xpos<=c.r&&e.cross_xpos!=c.xpos&&(void 0!==e.cross_xpos&&a.rubberline(c,e.cross_xpos,c.t,e.cross_xpos,c.b),a.rubberline(c,c.xpos,c.t,c.xpos,c.b),e.cross_xpos=c.xpos),("horizontal"===e.cross||!0===e.cross)&&c.ypos>=c.t&&c.ypos<=c.b&&e.cross_ypos!=c.ypos&&(void 0!==e.cross_ypos&&a.rubberline(c,c.l,e.cross_ypos,c.r,e.cross_ypos),a.rubberline(c,c.l,c.ypos,c.r,c.ypos),e.cross_ypos=c.ypos))}function A(a,c){var e=a._Mx,d=a._Gx;
d.xdata=!1;for(var f=0;f<d.lyr.length;f++)d.lyr[f].xdata=5==c?!0:!1,d.lyr[f].xdata&&(d.xdata=!0);if(c!=d.cmode)if(5==c&&d.index)alert("Imag/Real mode not permitted in INDEX mode");else if(0>=d.lyr.length)d.cmode=c,T(a);else if(0<c){f=d.cmode;d.cmode=c;var g=d.autox,h=d.autoy;d.autox=3;d.autoy=3;if(5==c||5==f)d.panxmin=1,d.panxmax=-1,d.panymin=1,d.panymax=-1,e.level=0,c==d.basemode?(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):5==c||5==d.basemode?U(a,{get_data:!0}):
(e.stk[0].xmin=d.xmin,e.stk[0].xmax=d.xmax,U(a,{get_data:!0},d.xmin,d.xmax));else if(6<=c&&6<=f){var l=1;6==f&&(l=2);7==f&&(l=0.5);d.panymin*=l;d.panymax*=l;for(f=0;f<=e.level;f++)e.stk[f].ymin*=l,e.stk[f].ymax*=l}else for(c==d.basemode?(d.panymin=1,d.panymax=-1,e.stk[0].ymin=d.ymin,e.stk[0].ymax=d.ymax):U(a,{},e.stk[e.level].xmin,e.stk[e.level].xmax),f=1;f<=e.level;f++)e.stk[f].ymin=e.stk[0].ymin,e.stk[f].ymax=e.stk[0].ymax;d.autox=g;d.autoy=h;a.refresh()}}function D(c){var e,d=c._Mx,k=c._Gx;if(k.pan&&
!d.widget){e=d.level;var f={ps:d.stk[e].ymin,pe:d.stk[e].ymax},g=f.ps!=k.panymin||f.pe!=k.panymax,g=g&&0<d.level;!k.autohide_panbars||g&&c.mouseOnCanvas||k.panning?(a.scrollbar(d,0,k.pyl,k.pyl+k.pthk,d.t,d.b,f,k.panymin,k.panymax,void 0,d.scrollbar_y),d.stk[e].ymin=f.ps,d.stk[e].ymax=f.pe):(f=d.canvas.getContext("2d"),f.fillStyle=d.bg,f.fillRect(k.pyl,d.t,k.pyl+k.pthk,d.b-d.t));k.pl<d.width&&(f={ps:d.stk[e].xmin,pe:d.stk[e].xmax},g=(g=f.ps!=k.panxmin||f.pe!=k.panxmax)&&(!k.all||0<d.level),!k.autohide_panbars||
g&&c.mouseOnCanvas||k.panning?(a.scrollbar(d,0,k.pl,k.pr,k.pt,k.pt+k.pthk,f,k.panxmin,k.panxmax,void 0,d.scrollbar_x),d.stk[e].xmin=f.ps,d.stk[e].xmax=f.pe):(f=d.canvas.getContext("2d"),f.fillStyle=d.bg,f.fillRect(k.pl,k.pt-1,k.pr-k.pl,k.pthk+4)))}}function E(c,e,d,k){var f=c._Mx,g=c._Gx,h,l,q,s;s=new a.SCROLLBAR;l=new a.SCROLLBAR;var t=!1;h=f.level;0<g.panmode?(s.flag=11,l.flag=11):(s.flag=-12,l.flag=-12);0===d&&(s.action=0,l.action=0);if("Y"===e.substring(0,1)){if(s=f.stk[h].ymin,d=f.stk[h].ymax,
q=d-s,"YPAN"===e?(e=f.scrollbar_y,d={ps:s,pe:d},a.scrollbar(f,l,g.pyl,g.pyl+g.pthk,f.t,f.b,d,g.panymin,g.panymax,k,e),s=d.ps,d=d.pe,0!==l.action&&a.scroll(f,l,a.XW_UPDATE,void 0,e)):"YCENTER"===e&&(s-=q*(f.ypos-(f.t+f.b)/2)/(f.b-f.t),d=s+q),s!==f.stk[h].ymin||d!==f.stk[h].ymax)f.stk[h].ymin=s,f.stk[h].ymax=d,g.cmode===g.basemode&&1===f.level&&(g.ymin=Math.min(g.ymin,s),g.ymax=Math.max(g.ymax,d)),c.refresh(),t=!0}else if(l=f.stk[h].xmin,d=f.stk[h].xmax,q=d-l,"XPAN"===e?(e=f.scrollbar_x,d={ps:l,pe:d},
a.scrollbar(f,s,g.pl,g.pr,g.pt,g.pt+g.pthk,d,g.panxmin,g.panxmax,k,e),l=d.ps,d=d.pe,0!==s.action&&a.scroll(f,s,a.XW_UPDATE,void 0,e)):"XCENTER"===e&&(l+=q*(f.xpos-(f.l+f.r)/2)/(f.r-f.l),l!==f.stk[h].xmin&&(d=l+q)),f.stk[h].xmin!==l||f.stk[h].xmax!==d)f.stk[h].xmin=l,f.stk[h].xmax=d,g.xdata||1!==f.level||(g.xmin=f.stk[1].xmin,g.xmax=f.stk[1].xmax),c.refresh(),t=!0;return t}function L(c,e,d,k,f,g,h,l){var q=c._Mx;if(q.prompt)throw"Prompt already exists! Can only have one prompt at a time!";a.disableListeners(q);
c.disable_listeners();var s=function(c,e){return function(d){e(d);a.enableListeners(q);c.enable_listeners();c.refresh();void 0!=l&&l()}},t=function(){c.refresh()};try{a.prompt(q,e,d,s(c,k),t,f,g,h,5E3)}catch(u){console.log("ERROR: Failed to set up prompt due to: "+u)}}function T(c){var e=c._Mx,d=c._Gx,k=e.canvas.getContext("2d");0==d.sections&&(d.isec=0);d.aretx=d.retx;d.arety=d.rety;d.dretx=d.retx-d.xmrk;d.drety=d.rety-d.ymrk;5==d.cmode&&1==d.iabsc&&(d.iabsc=2);1==d.iabsc?(d.aretx=Math.round((d.aretx-
d.xstart)/d.xdelta),d.index||(d.aretx+=1),d.dretx=Math.round(d.dretx/d.xdelta)):2==d.iabsc&&(0!=d.aretx&&(d.aretx=1/d.aretx),0!=d.arety&&(d.arety=1/d.arety),0!=d.dretx&&(d.dretx=1/d.dretx),0!=d.drety&&(d.drety=1/d.drety));if(d.show_readout&&!e.widget){k.fillStyle=e.bg;var f=Math.floor(e.height-2.5*e.text_h);k.fillRect(e.text_w,f,49*e.text_w,f+1.5*e.text_h);var f=Math.floor(e.height-0.5*e.text_h),g=Math.max(d.pr+e.text_w,e.width-2*e.text_w);k.fillStyle=e.bg;k.fillRect(g,f-e.text_h,e.text_w,e.text_h);
if(!d.autohide_readout||c.mouseOnCanvas||d.panning)c="y: "+a.format_g(d.arety,16,9,!0)+" dy: "+a.format_g(d.drety,16,9)+" L="+e.level+" "+w[d.cmode-1],k="x: "+a.format_g(d.aretx,16,9,!0)+" dx: "+a.format_g(d.dretx,16,9)+" "+Z[d.iabsc],3==d.iabsc&&(c=0==d.dretx?c.substr(0,20)+"sl: Inf             "+c.substr(40,c.length):c.substr(0,20)+"sl: "+a.format_g(d.drety/d.dretx,16,9)+c.substr(40,c.length)),f=Math.floor(e.height-1.5*e.text_h),a.text(e,e.text_w,f,c),f=Math.floor(e.height-0.5*e.text_h),a.text(e,
e.text_w,f,k),g<e.width&&(0<d.cntrls?a.text(e,g,f,"C"):a.text(e,g,f," ")),a.colorbar(e,49*e.text_w-1,e.height-2.5*e.text_h,e.text_w,2*e.text_h)}}function U(a,c,e,d,f,g){var h=a._Mx;a=a._Gx;c=!0==c.get_data;a.panxmin=1;a.panxmax=-1;a.panymin=1;a.panymax=-1;var l=void 0===e,q=void 0===d;if(0===a.lyr.length)a.panxmin=-1,a.panxmax=1,a.panymin=-1,a.panymax=1;else for(void 0===f&&(a.xlab=a.lyr[0].xlab),void 0===g&&(a.ylab=a.lyr[0].ylab),f=0;f<a.lyr.length;f++)if(l&&(e=a.lyr[f].xmin),q&&(d=a.lyr[f].xmax),
a.xlab!==a.lyr[f].xlab&&(a.xlab=0),a.ylab!==a.lyr[f].ylab&&(a.ylab=0),c&&a.lyr[f].get_data(e,d),0<a.autox||0<a.autoy)for(;e<d;)a.lyr[f].get_data(e,d),g=a.lyr[f].prep(e,d),a.all&&a.expand?0===a.lyr[f].size?e=d:a.index?e+=g:0<=a.lyr[f].xdelta?e+=a.lyr[f].size*a.lyr[f].xdelta:d+=a.lyr[f].size*a.lyr[f].xdelta:e=d;else a.lyr[f].prep(1,-1);f=a.panxmax-a.panxmin;0>f&&(a.panxmax=a.panxmin,a.panxmin=a.panxmax+f,f=-f);1E-20>=f&&(a.panxmin-=1,a.panxmax+=1);0!=(a.autox&1)&&l&&(h.stk[0].xmin=a.panxmin);if(0!=
(a.autox&2)&&q&&(h.stk[0].xmax=a.panxmax,!a.all&&!a.xdata))for(f=0;f<a.lyr.length;f++)d=Math.min(a.lyr[f].xmax,h.stk[0].xmax),g=Math.abs((d-a.lyr[f].xmin)/a.lyr[f].xdelta)-a.bufmax+1,0<g&&(h.stk[0].xmax=d-g*Math.abs(a.lyr[f].xdelta));0!=(a.autoy&1)&&(h.stk[0].ymin=a.panymin);0!=(a.autoy&2)&&(h.stk[0].ymax=a.panymax)}function Q(c,e,d){var k=c._Gx;c=a.pixel_to_real(c._Mx,e,d);k.index&&(c.x*=k.xdelta);return c}function K(a,c,e,d,f,g){return a>=e&&a<=e+f&&c>=d&&c<=d+g}function X(a){var c=!1,d=a._Gx,k=
a._Mx,f=k.xpos,g=k.ypos,h=" ";if(!a.mouseOnCanvas)return!1;d.pan&&f>k.r&&g>=k.t&&g<=k.b?(h="YPAN",k.xpos=d.pyl+e.trunc(d.pthk/2),c=!0):d.pan&&f>=d.pl&&f<=d.pr&&(d.show_readout&&g>d.pt-2||!d.show_readout&&g<=d.pt+d.pthk+2)&&(h="XPAN",k.ypos=d.pt+e.trunc(d.pthk/2),c=!0);return{inPanRegion:c,command:h}}function c(c,e){var d,k,f;e.origin&1?(f=c.x-e.x,e.origin&2&&(f=e.w-f)):(f=c.y-e.y,2>=e.origin&&(f=e.h-f));k=a.scroll_real2pix(e);d=k.s1;k=k.sw;return f>=d&&f<=d+k?!0:!1}function t(c,e,d){var k=c._Mx,f=
void 0;"XPAN"===d?f=k.scrollbar_x:"YPAN"===d&&(f=k.scrollbar_y);f.action=e;f.step=0.1*f.srange;f.page=9*f.step;f.scale=2;a.scroll(k,f,a.XW_COMMAND,void 0,f);G(c,f.smin,f.smin+f.srange,d.slice(0,1))}function G(a,c,e,d){var f=a._Mx,g=a._Gx,h=f.level;if("X"===d){if(f.stk[h].xmin!==c||f.stk[h].xmax!==e)f.stk[h].xmin=c,f.stk[h].xmax=e,g.xdata||1!==f.level||(g.xmin=f.stk[1].xmin,g.xmax=f.stk[1].xmax),a.refresh()}else"Y"!==d||c===f.stk[h].ymin&&e===f.stk[h].ymax||(f.stk[h].ymin=c,f.stk[h].ymax=e,g.cmode===
g.basemode&&1===f.level&&(g.ymin=Math.min(g.ymin,c),g.ymax=Math.max(g.ymax,e)),a.refresh())}var y="Keypress Table:\n--------------\n?    - Main help box.\nA    - Toggle display x,y readouts:\n       (absc) -> (index) -> (1/absc) -> (time).\nB    - Toggle LM Drag Mode:\n       (box) -> (horizontal) -> (vertical).\nC    - Toggle controls.\nL    - Toggle legend.\nM    - Pops up main menu\nR    - Toggle display specs (x/y readout)\nS    - Toggle display specs and axes.\nT    - Popup box with timecode value at mouse.\nX    - Popup box with X value at mouse.\nY    - Popup box with Y value at mouse.\nF    - Toggle fullscreen.\n";
d.browserIsCompatible=function(){var a=document.createElement("canvas").getContext?!0:!1,c="ArrayBuffer"in window;return a&&c};navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?d.PointArray=Float32Array:d.PointArray=Float64Array;d.Plot=function(r,n){if(!d.browserIsCompatible())throw"Browser is not compatible";var l=this._Mx=a.open(r);this._Gx=new u;this._Gx.parent=r;this.mouseOnCanvas=!1;n||(n={});h(this,n);this._refresh();this.onmousemove=function(c){return function(e){var d=c._Mx,f=c._Gx,n=e.target.getBoundingClientRect(),
g=void 0===e.offsetX?e.pageX-n.left-window.scrollX:e.offsetX;e=void 0===e.offsetX?e.pageY-n.top-window.scrollY:e.offsetY;n=Q(c,g,e);f.retx=n.x;f.rety=n.y;d.widget||(T(c),n=document.createEvent("Event"),n.initEvent("mmove",!0,!0),n.xpos=g,n.ypos=e,n.x=f.retx,n.y=f.rety,a.dispatchEvent(d,n)&&(f.cross&&(d.warpbox?(void 0!==f.cross_xpos&&a.rubberline(d,f.cross_xpos,d.t,f.cross_xpos,d.b),void 0!==f.cross_ypos&&a.rubberline(d,d.l,f.cross_ypos,d.r,f.cross_ypos),f.cross_xpos=void 0,f.cross_ypos=void 0):B(c)),
2===f.cntrls&&(n=document.createEvent("Event"),n.initEvent("mtag",!0,!0),n.x=f.retx,n.y=f.rety,a.dispatchEvent(d,n))))}}(this);this.ontouchmove=function(a){return function(c){c.preventDefault();a.onmousemove(c)}}(this);this.throttledOnMouseMove=e.throttle(this._Gx.scroll_time_interval,this.onmousemove);a.addEventListener(l,"mousemove",this.throttledOnMouseMove,!1);this.onmouseout=function(a){return function(c){c=a._Gx;var e=a._Mx;a.mouseOnCanvas&&(a.mouseOnCanvas=!1,c.autohide_readout&&T(a),c.autohide_panbars&&
D(a),e.prompt&&e.prompt.input.enableBlur())}}(this);a.addEventListener(l,"mouseout",this.onmouseout,!1);this.onmouseover=function(a){return function(c){c=a._Gx;var e=a._Mx;a.mouseOnCanvas=!0;c.autohide_panbars&&D(a);e.prompt&&e.prompt.input.disableBlur()}}(this);a.addEventListener(l,"mouseover",this.onmouseover,!1);this.onmousedown=function(e){return function(d){d.preventDefault();var n=e._Mx,r=e._Gx;n.widget&&"ONESHOT"===n.widget.type&&(n.widget=null,e.refresh());a.ifevent(n,d);var h=document.createEvent("Event");
h.initEvent("mdown",!0,!0);h.xpos=n.xpos;h.ypos=n.ypos;h.x=r.retx;h.y=r.rety;h.which=d.which;if(!a.dispatchEvent(n,h))return!1;var l=X(e);if(l.inPanRegion){if(d.preventDefault()," "!==l.command){var p=null,h=null;"XPAN"===l.command?p=n.scrollbar_x:"YPAN"===l.command&&(p=n.scrollbar_y);if(2===d.which)h={x:n.xpos,y:n.ypos},void 0!==p&&c(h,p)&&s(e,l.command);else if(" "!==l.command&&(h={x:n.xpos,y:n.ypos},!c(h,p)&&1===d.which)){E(e,l.command,0,d);var q=function(){c({x:n.xpos,y:n.ypos},p)?r.stillPanning&&
(window.clearInterval(r.stillPanning),r.repeatPanning=void 0):E(e,l.command,0,d)};r.stillPanning=window.setTimeout(function(){r.repeatPanning=window.setInterval(q,50)},250)}}}else if(1===d.which)if(K(n.xpos,n.ypos,r.legendBtnLocation.x,r.legendBtnLocation.y,r.legendBtnLocation.width,r.legendBtnLocation.height))e.change_settings({legend:!r.legend});else{r.xmrk=r.retx;r.ymrk=r.rety;T(e);var h={opacity:0,return_value:"zoom"},t={opacity:0.4,fill_color:n.hi,return_value:"select"};"zoom"===r.default_rubberbox_action?
a.rubberbox(n,g(e),r.default_rubberbox_mode,h,t):"select"===r.default_rubberbox_action&&a.rubberbox(n,g(e),r.default_rubberbox_mode,t,h)}else 2===d.which&&(r.nomenu||f(e));return!1}}(this);this.ontouchstart=function(a){return function(c){c.preventDefault();a.onmousedown({which:1})}}(this);a.addEventListener(l,"mousedown",this.onmousedown,!1);this.docMouseUp=function(a){return function(c){var e=a._Gx;1===c.which&&(e.panning=void 0,a._Mx.scrollbar_x.action=0,a._Mx.scrollbar_y.action=0);e.stillPanning&&
(window.clearTimeout(e.stillPanning),e.stillPanning=void 0);e.repeatPanning&&(window.clearInterval(e.repeatPanning),e.repeatPanning=void 0);return!1}}(this);document.addEventListener("mouseup",this.docMouseUp,!1);this.mouseup=function(c){return function(e){e.preventDefault();var d=c._Gx,f=c._Mx;a.ifevent(c._Mx,e);var n=document.createEvent("Event");n.initEvent("mup",!0,!0);n.xpos=f.xpos;n.ypos=f.ypos;n.x=d.retx;n.y=d.rety;n.which=e.which;if(a.dispatchEvent(f,n))if(3===e.which)e.preventDefault(),c.unzoom(1),
c.refresh();else if(2===e.which&&d.nomenu&&(n=document.createEvent("Event"),n.initEvent("showmenu",!0,!0),n.x=e.x||e.clientX,n.y=e.y||e.clientY,a.dispatchEvent(f,n))){e.stopPropagation&&e.stopPropagation();e.cancelBubble=!0;a.removeEventListener(f,"mousedown",c.onmousedown,!1);var g=function(){try{var e=document.createEvent("Event");e.initEvent("hidemenu",!0,!0);a.dispatchEvent(f,e)&&a.addEventListener(f,"mousedown",c.onmousedown,!1)}finally{document.removeEventListener("mouseup",g,!1)}};document.addEventListener("mouseup",
g,!1)}}}(this);this.ontouchend=function(a){return function(a){a.preventDefault()}}(this);a.addEventListener(l,"mouseup",this.mouseup,!1);this.mouseclick=function(c){return function(e){e.preventDefault();var d=c._Gx,f=c._Mx;a.ifevent(c._Mx,e);var n=document.createEvent("Event");n.initEvent("mclick",!0,!0);n.xpos=f.xpos;n.ypos=f.ypos;n.x=d.retx;n.y=d.rety;n.which=e.which;a.dispatchEvent(f,n);return!1}}(this);a.addEventListener(l,"click",this.mouseclick,!1);this.mousedblclick=function(c){return function(e){e.preventDefault();
var d=c._Gx,f=c._Mx;a.ifevent(c._Mx,e);var n=document.createEvent("Event");n.initEvent("mdblclick",!0,!0);n.xpos=f.xpos;n.ypos=f.ypos;n.x=d.retx;n.y=d.rety;n.which=e.which;a.dispatchEvent(f,n);return!1}}(this);a.addEventListener(l,"dblclick",this.mousedblclick,!1);this.dragMouseDownHandler=function(a){return function(e){var d=a._Mx,f=a._Gx,n=X(a);if(n.inPanRegion&&(e.preventDefault()," "!==n.command)){var g=void 0;"XPAN"===n.command?g=d.scrollbar_x:"YPAN"===n.command&&(g=d.scrollbar_y);var r={x:d.xpos,
y:d.ypos};void 0!==g&&c(r,g)&&1===e.which&&(f.panning={axis:n.command,xpos:e.screenX,ypos:e.screenY,xmin:d.stk[d.level].xmin,xmax:d.stk[d.level].xmax,ymin:d.stk[d.level].ymin,ymax:d.stk[d.level].ymax})}}}(this);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);this.dragMouseMoveHandler=function(c){return function(e){var d=c._Gx;if(void 0!==d.panning)try{var f=d.panning.axis,n=c._Mx,g=c._Gx,r,h,l;if("XPAN"===f)l=c._Mx.scrollbar_x;else if("YPAN"===f)l=c._Mx.scrollbar_y;else throw"Unable to drag scrollbar - scrollAction is not 'XPAN' or 'YPAN'!!";
l.flag=-12;var p=n.level;"XPAN"===f?(r=n.stk[p].xmin,h=n.stk[p].xmax):"YPAN"===f?(r=n.stk[p].ymin,h=n.stk[p].ymax):h=r=void 0;var d=r,p=h,q=l;q.action=a.SB_DRAG;if("YPAN"===f){var s=n.scrollbar_y.trange/n.scrollbar_y.h;4===q.origin&&(s*=-1);var t=e.screenY-g.panning.ypos,u=t*s;g.panning.ymin-u<g.panymin?(p=g.panymin+(p-d),d=g.panymin):g.panning.ymax-u>g.panymax?(d=g.panymax-(p-d),p=g.panymax):(d=g.panning.ymin-u,p=g.panning.ymax-u)}else"XPAN"===f&&(s=n.scrollbar_x.trange/n.scrollbar_x.w,3===q.origin&&
(s*=-1),t=e.screenX-g.panning.xpos,u=t*s,g.panning.xmin+u<g.panxmin?(p=g.panxmin+(p-d),d=g.panxmin):g.panning.xmax+u>g.panxmax?(d=g.panxmax-(p-d),p=g.panxmax):(d=g.panning.xmin+u,p=g.panning.xmax+u));r=d;h=p;l.smin=r;l.srange=h-r;a.redrawScrollbar(l,n,void 0);G(c,l.smin,l.smin+l.srange,f.slice(0,1));l.action=0;c.refresh()}catch(w){console.log("Error: "+w)}}}(this);this.throttledDragOnMouseMove=e.throttle(this._Gx.scroll_time_interval,this.dragMouseMoveHandler);window.addEventListener("mousemove",
this.throttledDragOnMouseMove,!1);this.dragMouseUpHandler=function(a){return function(c){var e=a._Gx;1===c.which&&(e.panning=void 0)}}(this);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);this.onresize=function(c){return function(e){a.checkresize(c._Mx)&&c.refresh()}}(this);this.wheelHandler=function(c){var d=c._Mx,f=c._Gx,n=e.throttle(100,function(e){var n=void 0;"XPAN"===e.command?n=d.scrollbar_x:"YPAN"===e.command&&(n=d.scrollbar_y);n.action=f.wheelscroll_mode_natural?0>event.deltaY?
a.SB_WHEELDOWN:a.SB_WHEELUP:0>event.deltaY?a.SB_WHEELUP:a.SB_WHEELDOWN;n.step=0.1*n.srange;n.page=9*n.step;a.scroll(d,n,a.XW_COMMAND,void 0,n);G(c,n.smin,n.smin+n.srange,e.command.slice(0,1))}),g=e.throttle(100,function(){var a=f.wheelZoomPercent||0.2;f.wheelscroll_mode_natural?0<event.deltaY&&(a*=-1):0>event.deltaY&&(a*=-1);"x"===f.wheelZoom?c.percent_zoom(a,1,!0):"y"===f.wheelZoom?c.percent_zoom(1,a,!0):c.percent_zoom(a,a,!0)});return function(e){a.ifevent(d,e);var r=X(c);c.mouseOnCanvas&&(e.preventDefault(),
r.inPanRegion?n(r):f.wheelZoom&&g())}}(this);window.addWheelListener(window,this.wheelHandler,!1);window.addEventListener("resize",this.onresize,!1);n.nokeypress||(this.onkeypress=function(c){return function(d){var n=c._Mx,g=c._Gx;if(c.mouseOnCanvas&&(!n.widget||"MENU"!==n.widget.type))if(n.widget&&"ONESHOT"===n.widget.type)n.widget=null,c.refresh();else{var r=getKeyCode(d);97==r?(g.iabsc=(g.iabsc+1)%4,T(c)):108==r?c.change_settings({legend:!g.legend}):103==r?c.change_settings({grid:!g.grid}):98==
r||2==r?n.warpbox&&(n.warpbox.mode="box"===n.warpbox.mode?"horizontal":"horizontal"===n.warpbox.mode?"vertical":"box",a.redraw_warpbox(n)):99==r?c.change_settings({xcnt:-1*g.cntrls}):114==r?c.change_settings({show_readout:!g.show_readout}):115==r?c.change_settings({specs:!g.specs}):120==r?(d=c._Gx,n=c._Mx,g=d.aretx.toString(),1===d.iabsc?a.message(n,"INDEX = "+g):2===d.iabsc?a.message(n,"1/X = "+g):a.message(n,"X = "+g)):121==r?(d=c._Gx,n=c._Mx,g=d.arety.toString(),2===d.iabsc?a.message(n,"1/Y = "+
g):a.message(n,"Y = "+g)):122==r?(d=c._Gx,n=c._Mx,d.zmin&&d.zmax&&(g="",g=1===d.lyr.length?"Z = "+d.lyr[0].get_z(d.retx,d.rety).toString():"TODO",a.message(n,g))):116==r?(d=c._Gx,n=c._Mx,0<d.lyr.length&&(g=d.lyr[0].hcb,1===g.xunits?a.message(n,"Time = "+e.sec2tod(g.timecode+d.retx)):a.message(n,"Time = UNK"))):109==r?f(c):63==r?a.message(n,"To zoom, press and drag the left mouse (LM) over the region of interest and release. To unzoom, press right mouse (RM).  Press the middle mouse (MM) button or press the key 'M' to bring up the menu.  Information about keypresses and what they do can be foundby selecting 'Keypress Info' from the main menu."):
102==r?(a.fullscreen(n),c.refresh()):9==r&&d.ctrlKey&&c.change_settings({invert:null})}}}(this),setKeypressHandler(this.onkeypress));return this};d.Plot.prototype={add_plugin:function(a,c){void 0===c&&(c=Number.MAX_VALUE);if(0>=c)throw"Invalid plugin zorder";a.init(this);var e=document.createElement("canvas");e.width=this._Mx.canvas.width;e.height=this._Mx.canvas.height;this._Gx.plugins.push({impl:a,zorder:c,canvas:e});this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},
remove_plugin:function(a){for(var c=0;c<this._Gx.plugins.length;c++)this._Gx.plugins[c].impl===a&&(array.splice(c,1),a.dispose&&a.dispose(),this._Gx.plugins[c].canvas.parentNode&&this._Gx.plugins[c].canvas.parentNode.removeElement(this._Gx.plugins[c].canvas));this._Gx.plugins.sort(function(a,c){return a.zorder-c.zorder});this.refresh()},addListener:function(c,e){a.addEventListener(this._Mx,c,e,!1)},removeListener:function(c,e){a.removeEventListener(this._Mx,c,e,!1)},change_settings:function(c){for(var d=
this._Gx,f=this._Mx,g=0;g<d.lyr.length;g++)d.lyr[g].change_settings(c);void 0!==c.grid&&(d.grid=null===c.grid?!d.grid:c.grid);void 0!==c.gridBackground&&(d.gridBackground=c.gridBackground);void 0!==c.gridStyle&&(d.gridStyle=c.gridStyle);void 0!==c.wheelZoom&&(d.wheelZoom=c.wheelZoom);void 0!==c.wheelZoomPercent&&(d.wheelZoomPercent=c.wheelZoomPercent);void 0!==c.autol&&(d.autol=c.autol);void 0!==c.index&&c.index!=d.index&&(d.index=null===c.index?!d.index:c.index,d.index&&1!==d.iabsc?d.iabsc=1:d.index||
1!==d.iabsc||(d.iabsc=0),U(this,{get_data:!1},void 0,void 0),this.unzoom());void 0!==c.all&&(d.all=null===c.all?!d.all:c.all);void 0!==c.show_x_axis&&(d.show_x_axis=null===c.show_x_axis?!d.show_x_axis:c.show_x_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_y_axis&&(d.show_y_axis=null===c.show_y_axis?!d.show_y_axis:c.show_y_axis,d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.show_readout&&(d.show_readout=null===c.show_readout?!d.show_readout:c.show_readout,
d.specs=d.show_x_axis||d.show_y_axis||d.show_readout);void 0!==c.specs&&(d.specs=null===c.specs?!d.specs:c.specs,d.specs?(d.show_x_axis=!0,d.show_y_axis=!0,d.show_readout=!0):(d.show_x_axis=!1,d.show_y_axis=!1,d.show_readout=!1));void 0!==c.xcnt&&(d.cntrls="leftmouse"===c.xcnt?1:"continuous"===c.xcnt?2:"disable"===c.xcnt&&0<d.cntrls?-1*d.cntrls:"enable"===c.xcnt&&0>d.cntrls?-1*d.cntrls:c.xcnt);void 0!==c.legend&&(d.legend=null===c.legend?!d.legend:c.legend,q(this,-1),g=d.lbtn-2,d.show_readout?(d.legendBtnLocation=
{x:this._Mx.width-d.lbtn,y:2,width:g,height:g},a.shadowbox(this._Mx,this._Mx.width-d.lbtn,2,g,g,1,-1,"L")):(d.legendBtnLocation={x:this._Mx.width-d.lbtn,y:2,width:g,height:g},a.shadowbox(this._Mx,this._Mx.width-d.lbtn,2,g,g,1,1,"L")),q(this,1));void 0!==c.pan&&(d.pan=null===c.pan?!d.pan:c.pan);void 0!==c.cross&&(d.cross=null===c.cross?!d.cross:c.cross,d.cross?(d.cross_xpos=void 0,d.cross_ypos=void 0,B(this)):(void 0!=d.cross_xpos&&a.rubberline(f,d.cross_xpos,f.t,d.cross_xpos,f.b),void 0!=d.cross_ypos&&
a.rubberline(f,f.l,d.cross_ypos,f.r,d.cross_ypos),d.cross_xpos=void 0,d.cross_ypos=void 0));void 0!==c.cmode&&A(this,c.cmode);if(void 0!==c.phunits){var h=c.phunits,g=this._Gx,l=this._Mx,s=g.plab;"R"==h?s=23:"D"==h&&(s=24);"C"==h&&(s=25);if(s!=g.plab&&(h=[Math.PI,180,0.5],h=h[s-23]/h[g.plab-23],g.plab=s,2==g.cmode)){for(s=0;s<=l.level;s++)l.stk[s].ymin*=h,l.stk[s].ymax*=h,l.stk[s].yscl*=h;g.panymin*=h;g.panymax*=h;this.refresh()}}void 0!==c.rubberbox_action&&(d.default_rubberbox_action=c.rubberbox_action);
void 0!==c.rubberbox_mode&&(d.default_rubberbox_mode=c.rubberbox_mode);void 0!=c.wheelscroll_mode_natural&&(d.wheelscroll_mode_natural=c.wheelscroll_mode_natural);void 0!=c.colors&&(c.colors.fg||(c.colors.fg=f.fg),c.colors.bg||(c.colors.bg=f.bg),a.setbgfg(f,c.colors.bg,c.colors.fg,f.xi));void 0!==c.cmap&&(d.cmap=null===c.cmap?2==d.cmode?2:1:c.cmap,a.colormap(f,e.Mc.colormap[d.cmap],d.ncolors));void 0!==c.yinv&&(f.origin=c.yinv?4:1);void 0!==c.rasterSmoothing&&(d.rasterSmoothing=null===c.rasterSmoothing?
!d.rasterSmoothing:c.rasterSmoothing);void 0!==c.fillStyle&&(d.fillStyle=c.fillStyle);void 0!==c.invert&&(null===c.invert?a.invertbgfg(f):!0===c.invert?a.setbgfg(this,"white","black"):a.setbgfg(this,"black","white"));void 0!==c.nomenu&&(d.nomenu=null===c.nomenu?!d.nomenu:c.nomenu);void 0!==c.ymin&&G(this,c.ymin,f.stk[0].ymax,"Y");void 0!==c.ymax&&G(this,f.stk[0].ymin,c.ymax,"Y");this.refresh();void 0!=c.pan&&T(this)},reread:function(){for(var c=this._Gx,d=[],e=0;e<c.lyr.length;e++)d[e]=c.lyr[e];e=
c.HCB.slice();this.deoverlay();for(var f=0;f<e.length;f++)this.overlay_bluefile(e[f]);for(e=0;e<c.lyr.length;e++)c.lyr[e].symbol=d[e].symbol,c.lyr[e].radius=d[e].radius;this.refresh();c=document.createEvent("Event");c.initEvent("reread",!0,!0);a.dispatchEvent(this._Mx,c)},cleanup:function(){},reload:function(a,c){var d=this._Mx,e=this._Gx;if(!(0>a||a>=e.lyr.length)){var f=e.lyr[a].hcb,g=f.dview.length!==c.length;f.setData(c);e.lyr[a].imin=0;e.lyr[a].xstart=void 0;e.lyr[a].size=0;var h=e.lyr[a].xmin,
l=e.lyr[a].xmax;g&&(g=f.xstart+f.xdelta*(f.size-1),e.lyr[a].xmin=Math.min(f.xstart,g),e.lyr[a].xmax=Math.max(f.xstart,g),e.lyr[a].xdelta=f.xdelta,e.lyr[a].xstart=f.xstart,l=h=void 0);0===d.level&&U(this,{get_data:!1},h,l);this.refresh()}},rescale:function(){0===this._Mx.level&&U(this,{get_data:!1},void 0,void 0);this.refresh()},push:function(a,c){var d=this._Gx;0>a||a>=d.lyr.length||(e.filad(d.lyr[a].hcb,c),this.refresh())},overlay_array:function(a,c,d){e.log.debug("Overlay array");a=e.initialize(a,
c);return this.overlay_bluefile(a,d)},overlay_pipe:function(a,c){e.log.debug("Overlay pipe");a||(a={});a.pipe=!0;var d=e.initialize(null,a);return this.overlay_bluefile(d,c)},overlay_websocket:function(a,c,d){e.log.debug("Overlay websocket: "+a);a=new WebSocket(a,"plot-data");a.binaryType="arraybuffer";var f=this,g=e.initialize(null,c);g.ws=a;var h=this.overlay_bluefile(g,d);a.onopen=function(a){};a.onmessage=function(a){return function(a){if(a.data instanceof ArrayBuffer){var c=g.createArray(a.data);
f.reload(h,c)}else if("string"===typeof a.data){var d=f._Gx,d=d.HCB[d.lyr[h].hcb];a=JSON.parse(a.data);for(c in a)d[c]=a[c];g.size=void 0}}}(a);return h},overlay_href:function(a,c,d){e.log.debug("Overlay href: "+a);try{this.show_spinner();var f=function(a,c){return function(e){try{if(e){var f=a.overlay_bluefile(e,d);c&&c(e,f)}else alert("Failed to load data")}finally{a.hide_spinner()}}}(this,c);(new BlueFileReader).read_http(a,f)}catch(g){console.log(g),alert("Failed to load data"),this.hide_spinner()}},
show_spinner:function(){this._Gx.spinner||(R.color=this._Mx.xwfg,this._Gx.spinner=(new Spinner(R)).spin(this._Gx.parent))},hide_spinner:function(){this._Gx.spinner&&this._Gx.spinner.stop();this._Gx.spinner=void 0},add_layer:function(c){var d=this._Gx,e=this._Mx;d.lyr.push(c);var f=document.createEvent("Event");f.initEvent("file_overlayed",!0,!0);f.index=d.lyr.length-1;f.name=c.name;a.dispatchEvent(e,f)},get_layer:function(a){var c=this._Gx;return 0<=a&&a<c.lyr.length?c.lyr[a]:null},overlay_bluefile:function(a,
c){e.log.debug("Overlay bluefile: "+a.file_name);var f=this._Mx,g=this._Gx;c=c||{};var h=0===g.HCB.length;g.HCB.push(a);1===g.HCB.length&&l(this,!0);var q=g.lyr.length;void 0===c.layerType?1===a["class"]?d.Layer1D.overlay(this,a,c):2===a["class"]&&d.Layer2D.overlay(this,a,c):c.layerType.overlay(this,a,c);A(this,g.cmode);if(h)0===g.HCB.length?l(this,!1):(g.basemode=g.cmode,q=h=void 0,0===(g.autox&&1)&&(h=g.xmin),0===(g.autox&&2)&&(q=g.xmin),U(this,{get_data:!0},h,q),f.level=0,0!==(g.autox&&1)&&(g.xmin=
f.stk[0].xmin),0!==(g.autox&&2)&&(g.xmax=f.stk[0].xmax),0!==(g.autoy&&1)&&(g.ymin=f.stk[0].ymin),0!==(g.autoy&&2)&&(g.ymax=f.stk[0].ymax),f.resize=!0,f.origin=g.lyr[0].preferred_origin?g.lyr[0].preferred_origin:1);else for(f=q;f<g.lyr.length;f++)F(this,f);x(this);this.refresh();return g.HCB.length-1},load_files:function(a,c){for(var d=0;d<a.length;d++){var e=a[d];(new BlueFileReader).read(e,function(a){return function(d){a.overlay_bluefile(d,c)}}(this))}},deoverlay:function(a){var c=this._Gx;if(0<
c.HCB.length)if(void 0===a)for(a=c.HCB.length-1;0<=a;a--)this.remove_layer(a);else if(0>a){a=c.HCB.length+a;if(0>a)return;this.remove_layer(a)}else a<c.HCB.length&&this.remove_layer(a);0===c.lyr.length&&(l(this,!1),U(this,{}))},remove_layer:function(c){var d=this._Gx,e="",f=null;if(0<=c&&c<d.HCB.length){e=d.HCB[c].file_name;f=d.HCB[c];for(d.HCB[c]=null;c<d.HCB.length-1;c++)d.HCB[c]=d.HCB[c+1];d.HCB.length-=1}for(c=d.lyr.length-1;0<=c;c--)if(d.lyr[c].hcb===f){var g=c,h=this._Gx;h.lyr[g].ybufn=0;h.lyr[g].ybuf=
null;if(g<h.lyr.length-1)for(;g<h.lyr.length-1;g++)h.lyr[g]=h.lyr[g+1];h.lyr.length-=1;0<h.HCB.length&&(h.panxmin=1,h.panxmax=-1,h.panymin=1,h.panymax=-1)}x(this);this.refresh();d=document.createEvent("Event");d.initEvent("file_deoverlayed",!0,!0);""!=e&&(d.fileName=e);a.dispatchEvent(this._Mx,d)},pixel_zoom:function(a,c,d,e,f){a=Q(this,a,c);d=Q(this,d,e);this.zoom(a,d,f)},percent_zoom:function(a,c,d){var e=this._Mx,f=this._Gx,g=0;1>Math.abs(a)&&(g=Math.abs(e.stk[e.level].xmax-e.stk[e.level].xmin),
g=g*a/2);a=0;1>Math.abs(c)&&(a=Math.abs(e.stk[e.level].ymax-e.stk[e.level].ymin),a=a*c/2);c={x:Math.max(e.stk[e.level].xmin+g,f.panxmin),y:Math.max(e.stk[e.level].ymin+a,f.panymin)};e={x:Math.min(e.stk[e.level].xmax-g,f.panxmax),y:Math.min(e.stk[e.level].ymax-a,f.panymax)};this.zoom(c,e,d)},zoom:function(c,d,e){var f=this._Mx,g=this._Gx;if(!(9<=f.level)){void 0===c.x&&(c.x=f.stk[f.level].xmin);void 0===c.y&&(c.y=f.stk[f.level].ymin);void 0===d.x&&(d.x=f.stk[f.level].xmax);void 0===d.y&&(d.y=f.stk[f.level].ymax);
if(d.x<c.x){var h=d.x;d.x=c.x;c.x=h}d.y<c.y&&(h=d.y,d.y=c.y,c.y=h);h={};h.xscl=f.stk[f.level].xscl;h.yscl=f.stk[f.level].yscl;h.xmin=c.x;h.xmax=d.x;h.ymin=c.y;h.ymax=d.y;g.index&&(h.xmin=Math.min(h.xmin/g.xdelta),h.xmax=Math.min(h.xmax/g.xdelta));e&&g.inContinuousZoom?f.stk[f.level]=h:(f.stk.push(h),f.level=f.stk.length-1);g.inContinuousZoom=e;c=document.createEvent("Event");c.initEvent("zoom",!0,!0);c.level=f.level;c.inContinuousZoom=g.inContinuousZoom;c.xmin=f.stk[f.level].xmin;c.ymin=f.stk[f.level].ymin;
c.xmax=f.stk[f.level].xmax;c.ymax=f.stk[f.level].ymax;a.dispatchEvent(f,c);this.refresh()}},unzoom:function(c){var d=this._Mx,e=this._Gx;if(0!=d.level){c||(c=d.stk.length);for(;0<c&&0!=d.level;)d.stk.pop(),d.level=d.stk.length-1,c-=1;e.inContinuousZoom=!1;c=document.createEvent("Event");c.initEvent("unzoom",!0,!0);c.level=d.level;c.xmin=d.stk[d.level].xmin;c.ymin=d.stk[d.level].ymin;c.xmax=d.stk[d.level].xmax;c.ymax=d.stk[d.level].ymax;a.dispatchEvent(d,c);console.log("UNZOOM EVENT");this.refresh()}},
mimic:function(a,c){var d=this;c||(c={});c.zoom?a.addListener("zoom",function(a){d.zoom({x:a.xmin,y:a.ymin},{x:a.xmax,y:a.ymax},a.inContinuousZoom)}):c.xzoom?a.addListener("zoom",function(a){d.zoom({x:a.xmin,y:void 0},{x:a.xmax,y:void 0},a.inContinuousZoom)}):c.yzoom&&a.addListener("zoom",function(a){d.zoom({x:void 0,y:a.ymin},{x:void 0,y:a.ymax},a.inContinuousZoom)});c.unzoom&&a.addListener("unzoom",function(a){d.unzoom(1)})},redraw:function(){var a=this._Gx,c=this._Mx,d=c.canvas.getContext("2d");
a.plotData.valid?(d.drawImage(a.plotData,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2,c.l-1,c.t-1,c.r-c.l+2,c.b-c.t+2),C(this),a.cross_xpos=void 0,a.cross_ypos=void 0,B(this)):this.refresh()},refresh:function(){var c=this;a.render(this._Mx,function(){c._refresh()})},enable_listeners:function(){var c=this._Mx;a.addEventListener(c,"mousedown",this.onmousedown,!1);a.addEventListener(c,"mousemove",this.throttledOnMouseMove,!1);document.addEventListener("mouseup",this.docMouseUp,!1);a.addEventListener(c,"mouseup",
this.mouseup,!1);window.addEventListener("mousedown",this.dragMouseDownHandler,!1);window.addEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.addEventListener("mouseup",this.dragMouseUpHandler,!1);window.addEventListener("wheel",this.wheelHandler,!1);window.addEventListener("mousewheel",this.wheelHandler,!1);window.addEventListener("DOMMouseScroll",this.wheelHandler,!1);window.addEventListener("keypress",this.onkeypress,!1)},disable_listeners:function(){var c=this._Mx;a.removeEventListener(c,
"mousedown",this.onmousedown,!1);a.removeEventListener(c,"mousemove",this.throttledOnMouseMove,!1);document.removeEventListener("mouseup",this.docMouseUp,!1);a.removeEventListener(c,"mouseup",this.mouseup,!1);window.removeEventListener("mousedown",this.dragMouseDownHandler,!1);window.removeEventListener("mousemove",this.throttledDragOnMouseMove,!1);window.removeEventListener("mouseup",this.dragMouseUpHandler,!1);window.removeEventListener("wheel",this.wheelHandler,!1);window.removeEventListener("mousewheel",
this.wheelHandler,!1);window.removeEventListener("DOMMouseScroll",this.wheelHandler,!1);window.removeEventListener("keypress",this.onkeypress,!1)},checkresize:function(){a.checkresize(plot._Mx)&&plot.refresh()},_refresh:function(){var c=this._Mx,d=this._Gx;c.canvas.getContext("2d");if(!d.hold){a.set_font(c,Math.min(8,c.width/64));d.pthk=1.5*c.text_w;d.specs?(c.l=!0===d.show_y_axis?6*c.text_w:1,c.r=!0===d.pan?c.width-(d.pthk+2*c.text_w):c.width-2,d.show_readout?(c.t=2*c.text_h,c.b=d.show_x_axis?c.height-
4*c.text_h:c.height-3*c.text_h):(c.t=d.pan?d.pthk+2*c.text_w:1,c.b=d.show_x_axis?c.height-3*c.text_h/2:c.height-2),d.pl=d.show_readout?50*c.text_w:35*c.text_w,d.pr=Math.max(d.pl+9*c.text_w,c.r),d.pt=d.show_readout?d.show_x_axis?c.b+c.text_h+(c.height-c.b-c.text_h-d.pthk)/2:c.b+(c.height-c.b-d.pthk)/2:(c.t-d.pthk)/2,d.lbtn=c.text_h+c.text_w+2):(d.pan?(c.t=d.pthk+2*c.text_w,c.r=c.width-(d.pthk+c.text_w)):(c.t=1,c.r=c.width-2),c.b=c.height-2,c.l=1,d.pl=c.l,d.pr=c.r,d.pt=(c.t-d.pthk)/2,d.lbtn=0);d.pyl=
c.r+(c.width-c.r-d.pthk)/2+1;var e=c.level;c.stk[e].x1=c.l;c.stk[e].y1=c.t;c.stk[e].x2=c.r;c.stk[e].y2=c.b;c.stk[e].xscl=(c.stk[e].xmax-c.stk[e].xmin)/(c.r-c.l);c.stk[e].yscl=(c.stk[e].ymax-c.stk[e].ymin)/(c.b-c.t);if(0===d.panning||0!==d.panning)d.plotData.valid=!1,a.clear_window(c);var e=d.xlab,f=d.ylab;void 0===e&&(e=30);d.index&&(e=0);void 0===f&&(f=0<d.lyr.length&&d.lyr[0].cx,1===d.cmode?f=28:2===d.cmode?f=d.plab:3===d.cmode&&f?f=21:4===d.cmode?f=22:5===d.cmode?(f=22,e=21):f=6===d.cmode?26:7===
d.cmode?27:0);if(d.specs){if(0===d.sections){var g={grid:d.grid};2==d.panning&&(g.noxtlab=!0);d.show_x_axis||(g.noxtics=!0,g.noxtlab=!0,g.noxplab=!0);d.show_y_axis||(g.noytics=!0,g.noytlab=!0,g.noyplab=!0);!d.specs||d.show_readout||d.pan||(g.noyplab=!0,g.noxplab=!0);d.gridBackground&&(g.fillStyle=d.gridBackground);d.gridStyle&&(g.gridStyle=d.gridStyle);a.drawaxis(c,d.xdiv,d.ydiv,e,f,g)}e=d.lbtn-2;d.show_readout&&d.pan&&(d.legend?(d.legendBtnLocation={x:c.width-d.lbtn,y:2,width:e,height:e},a.shadowbox(c,
c.width-d.lbtn,2,e,e,1,-2,"L")):(d.legendBtnLocation={x:c.width-d.lbtn,y:2,width:e,height:e},a.shadowbox(c,c.width-d.lbtn,2,e,e,1,2,"L")),T(this))}else d.grid&&0<=d.sections&&(g={grid:!0,noaxisbox:!0,noxtics:!0,noxtlab:!0,noxplab:!0,noytics:!0,noytlab:!0,noyplab:!0},a.drawaxis(c,d.xdiv,d.ydiv,e,f,g));for(e=0;e<d.lyr.length;e++)F(this,e);q(this,4);c.r>c.l&&c.b>c.t&&(d.plotData.width=c.canvas.width,d.plotData.height=c.canvas.height,d.plotData.getContext("2d").drawImage(c.canvas,0,0),d.plotData.valid=
!0);C(this);d.cross_xpos=void 0;d.cross_ypos=void 0;B(this)}}};var R={lines:13,length:7,width:4,radius:10,corners:1,rotate:0,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2E9,top:"auto",left:"auto"},w="Ma Ph Re Im IR Lo L2".split(" "),Z=["(absc)","(indx)","(1/ab)","(dydx)"]})(window.sigplot,window.mx,window.m);
